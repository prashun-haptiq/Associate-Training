try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c7a56ea8-3d28-4ce4-98d7-080214bcb96b",e._sentryDebugIdIdentifier="sentry-dbid-c7a56ea8-3d28-4ce4-98d7-080214bcb96b")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5403],{34700:function(e,t,r){Promise.resolve().then(r.bind(r,7515))},28713:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});let n="allow-scripts allow-same-origin allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-popups-to-escape-sandbox allow-popups allow-downloads allow-storage-access-by-user-activation"},7515:function(e,t,r){"use strict";r.d(t,{ChatPanel:function(){return Q}});var n=r(52155),a=r(98244),s=r(87294),o=r(77162),i=r(75748),l=r(62970),u=r(78159),c=r(61222);let d=e=>{let[t,r]=(0,a.useState)(!1),n=(0,a.useRef)(0),s=(0,a.useRef)(void 0);return(0,a.useEffect)(()=>{n.current=e.length,e.length>0&&(s.current=e[e.length-1])},[]),(0,a.useEffect)(()=>{if(0===e.length)return;let t=e[e.length-1];t!==s.current&&e.length>n.current&&(r(!0),s.current=t)},[e]),{shouldShowExtraSpace:t,hideExtraSpace:(0,a.useCallback)(()=>{r(!1),n.current=e.length,e.length>0&&(s.current=e[e.length-1])},[e])}};var f=r(99526);let m=e=>{let{sortedMessageIds:t,listRef:r}=e,n=(0,f.useSearchParams)().get("messageId");(0,a.useLayoutEffect)(()=>{if(!r.current||0===t.length)return;let e=t.length-1;if(n){let e=t.indexOf(n);e>=0&&r.current.scrollToIndex(e,{align:"start"})}else r.current.scrollToIndex(e,{align:"end"})},[])},p=e=>{let[t,r]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let t=e.current;if(!t)return;let n=()=>{r(t.offsetHeight)};n();let a=new ResizeObserver(n);return a.observe(t),window.addEventListener("resize",n),()=>{a.disconnect(),window.removeEventListener("resize",n)}},[e]),t},g=e=>{let{listRef:t,containerRef:r,itemIndex:n,messagesLength:s}=e,[o,i]=(0,a.useState)(0);return(0,a.useEffect)(()=>{if(n<0||!t.current)return;let e=()=>{if(t.current&&n>=0){let e=t.current.getItemOffset(n);e&&i(e)}};e();let a=r.current,s=null;return a&&(s=new ResizeObserver(e)).observe(a),window.addEventListener("resize",e),()=>{s&&a&&s.disconnect(),window.removeEventListener("resize",e)}},[t,r,n,s]),o},h=e=>{let{shouldShowExtraSpace:t,listRef:r,containerRef:n,lastUserMessageIndex:s,lastMessageIndex:o,messageCount:i}=e,l=p(n),u=g({listRef:r,containerRef:n,itemIndex:s,messagesLength:i}),c=g({listRef:r,containerRef:n,itemIndex:o,messagesLength:i})-u,d=(0,a.useRef)(0);return(0,a.useMemo)(()=>{let e=d.current,r=l-c;return t?r>0?e=r:r<0&&(e=0):e=0,d.current=e,e},[t,l,c])};var v=r(30025),E=r(21198),N=r(3989),b=r(71919);let y=e=>{let{sortedMessageIds:t,listRef:r,containerRef:n}=e,s=(0,E.aK)(e=>e.messages),o=(0,N.hT)(e=>e.chatMode!==N.jE.DEFAULT),i=(0,a.useCallback)(()=>{for(let e=t.length-1;e>=0;e--){let r=t[e],n=s[r];if((null==n?void 0:n.type)==="userMessage")return r}return null},[t,s]),l=(0,a.useRef)(i()),u=t.length-1,c=(0,a.useMemo)(()=>{for(let e=t.length-1;e>=0;e--){let r=s[t[e]];if((null==r?void 0:r.type)==="userMessage")return e}return -1},[t,s]),f=(0,a.useCallback)(()=>{setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.scrollToIndex(u,{align:"end"})},0)},[u,r]),p=(0,a.useCallback)(()=>{setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.scrollToIndex(u,{smooth:!0})},0)},[u,r]);(0,a.useEffect)(()=>{if(0===t.length){l.current=null;return}let e=t[t.length-1],r=s[e],n=s[t[t.length-2]];((null==r?void 0:r.type)==="userMessage"||o&&(null==n?void 0:n.type)==="userMessage"&&(null==r?void 0:r.type)==="aiMessage"&&"running"===r.status)&&e!==l.current&&(p(),l.current=e)},[t,s,p,o]);let{shouldShowExtraSpace:g,hideExtraSpace:y}=d(t),_=h({shouldShowExtraSpace:g,listRef:r,containerRef:n,lastUserMessageIndex:c,lastMessageIndex:u,messageCount:t.length});m({sortedMessageIds:t,listRef:r});let{isScrollable:x,isScrolledToEnd:I,isScrolledToStart:S,checkScrollPosition:R}=(0,v.W)({listRef:r,containerRef:n}),w=(0,b.UC)(e=>e.isVisualEditingActive);return(0,a.useEffect)(()=>{w&&!g&&f(),w||y()},[w]),{newMessageMinHeight:_,scrollToEnd:f,isScrollable:x,isScrolledToEnd:I,isScrolledToStart:S,checkScrollPosition:R}},_=e=>{let{listRef:t}=e,{store:r,snapshot:n}=(0,E.mx)();return(0,a.useCallback)(e=>{let a,{type:s,value:o}=e,i=r.getState().sortedMessageIds;if("editId"===s){let e=n.getMessageByEditId(o);e&&(a=i.indexOf(e.id))}else if("shortCommitHash"===s){let e=n.getUserCommitMessageByShortCommitHash(o);e&&(a=i.indexOf(e.id))}t.current&&void 0!==a&&a>=0&&t.current.scrollToIndex(a,{align:"start"})},[n,r,t])};var x=r(52162),I=r(88182),S=r(99792),R=r(4578),w=e=>{let{isScrollable:t,isScrolledToEnd:r,scrollToEnd:a}=e;return(0,n.jsx)(x.M,{children:t&&!r&&(0,n.jsx)(I.E.button,{className:(0,R.cn)("pointer-events-auto z-[1000] flex size-9 items-center justify-center rounded-full border border-muted-border bg-muted shadow-md transition-colors hover:bg-muted-hover md:size-7"),"aria-label":"Scroll to bottom",initial:{translateY:8,opacity:0},animate:{translateY:0,opacity:1},exit:{translateY:0,opacity:0},transition:{duration:.15,bounce:0},onClick:a,children:(0,n.jsx)(S.Z,{name:"arrow_downward",size:"small"})})})},T=r(48946),C=r(52532),O=r(26047);let j=()=>{let[e,t]=(0,C.Z)("message-status-bar-visible",{defaultValue:!1});return{isVisible:e,toggleVisibility:()=>t(e=>!e)}},M=()=>{let e=(0,O.v)(),t=(0,E.aK)(e=>e.sortedMessageIds),r=(0,E.aK)(e=>e.messages),{isVisible:s}=j(),o=(0,a.useMemo)(()=>e?t.map(e=>{let t=r[e];return!!t&&("userMessage"===t.type||"aiMessage"===t.type)&&t.content.includes("Please think step-by-step")}):[],[t,r,e]);return e&&s?(0,n.jsx)("div",{className:"pointer-events-none absolute right-0 top-0 z-10 h-full w-0.5",children:(0,n.jsx)("div",{className:"relative h-full w-full",children:o.map((e,t)=>(0,n.jsx)("div",{className:(0,R.cn)("absolute w-full transition-colors duration-200",e?"bg-orange-500":"bg-transparent"),style:{top:"".concat(t/o.length*100,"%"),height:"".concat(100/o.length,"%")}},t))})}):null};var D=r(96659),L=r(70980);let A=e=>{let{show:t}=e;return(0,n.jsxs)(I.E.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:t?1:0},transition:{duration:.2,ease:"easeOut"},className:(0,R.cn)("relative ml-2 flex h-auto items-center justify-center gap-2 pt-1 text-muted-foreground"),children:[(0,n.jsx)(F,{}),(0,n.jsx)("p",{className:(0,R.cn)("text-base md:text-sm"),children:"Working..."})]})},k=e=>{let{children:t,scrolledToEnd:r,showThinkingIndicator:a}=e;return(0,n.jsx)(I.E.div,{className:(0,R.cn)("group pointer-events-none absolute inset-x-0 bottom-0 z-20 flex items-end justify-start bg-gradient-to-t from-background via-background/50 via-50% pb-2 pr-2 text-sm text-card-foreground",a&&"from-20% via-background/80 via-70%"),initial:{opacity:0},animate:{opacity:1,marginTop:r||!a?"-40px":"-64px",minHeight:r||!a?"40px":"64px"},exit:{opacity:0},transition:{duration:.1,ease:"easeOut"},children:t})},P=e=>{let{scrolledToEnd:t}=e,r=(0,L.bk)(e=>e.isSendChatMessageMutationPending),a=(0,N.hT)(e=>e.chatMode===N.jE.DEFAULT),s=(0,D.C)(),o=(0,L.bk)(e=>e.isSomeRevertMutationPending),i=r&&s||o,l=!t||i;return(0,n.jsx)(x.M,{children:l&&a&&(0,n.jsx)(k,{scrolledToEnd:t,showThinkingIndicator:i,children:(0,n.jsx)(A,{show:i})})})},F=()=>{let e=(0,s.Z)("md");return(0,n.jsx)(I.E.div,{className:"flex items-center justify-center",variants:{beat:{scale:[1,1.2,1,1,1,1.15,1,1.1,1,1,1,1],transition:{duration:2.4,repeat:1/0,ease:"easeOut",times:[0,.08,.16,.24,.32,.4,.46,.52,.58,.66,.8,1]}}},animate:"beat",children:(0,n.jsx)(S.Z,{name:"lovable_icon",size:e?"default":"small"})})},U=(0,a.memo)(()=>(0,E.aK)(e=>e.isInitialized)?(0,n.jsx)(H,{}):(0,n.jsx)("div",{className:"flex flex-1 flex-grow flex-col items-center justify-center gap-2 text-sm",children:(0,n.jsx)(S.Z,{className:"animate-spin",name:"progress_activity"})}));U.displayName="Chat";let H=(0,a.memo)(()=>{let{loadEarlierMessages:e}=(0,E.mx)(),t=(0,a.useRef)(null),r=(0,a.useRef)(null),s=(0,E.aK)(e=>e.sortedMessageIds),o=(0,E.aK)(e=>e.hasOlderMessages),i=(0,E.aK)(e=>"loading"===e.loadingMessagesStatus),l=(0,E.aK)(e=>e.canLoadMoreMessages),{newMessageMinHeight:u,scrollToEnd:d,isScrollable:f,isScrolledToStart:m,isScrolledToEnd:p,checkScrollPosition:g}=y({sortedMessageIds:s,listRef:t,containerRef:r}),h=_({listRef:t});return(0,a.useEffect)(()=>{m&&o&&l&&e()},[m,o,l,e]),(0,n.jsxs)("div",{className:"relative flex min-h-0 w-full flex-1 shrink",ref:r,children:[(0,n.jsxs)("div",{className:"h-full w-full overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted-foreground",style:{overflowAnchor:"none"},children:[m&&i&&(0,n.jsx)("div",{className:"absolute inset-x-0 top-0 z-10 flex h-8 items-start justify-center bg-gradient-to-t from-transparent to-background text-sm",children:(0,n.jsx)(S.Z,{className:"animate-spin",name:"progress_activity",size:"small"})}),(0,n.jsx)(c.dM,{keepMounted:s.length>0?[s.length-1]:void 0,ref:t,overscan:E.ei.MESSAGES_PAGE_SIZE,onScroll:()=>{g()},shift:f&&m,children:s.map((e,t)=>(0,n.jsx)(T.z,{messageId:e,previousMessageId:s[t-1],isLastMessage:t===s.length-1,newMessageMinHeight:u,scrollToEdit:h},e))}),p&&i&&(0,n.jsx)("div",{className:"flex items-center justify-center gap-2 text-sm",children:(0,n.jsx)(S.Z,{className:"animate-spin",name:"progress_activity",size:"small"})}),(0,n.jsx)(M,{})]}),(0,n.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 mb-4 flex w-full items-center justify-center",children:(0,n.jsx)(w,{scrollToEnd:d,isScrolledToEnd:p,isScrollable:f})}),(0,n.jsx)(P,{scrolledToEnd:p})]})});H.displayName="InnerChat";var $=r(29605),z=r(13018),W=r(50484),Y=r(32282),B=r(76268),V=r(7287),G=r(17001),K=r(10178),J=r(45060),Z=r(41173);let Q=()=>{let e=(0,o.D)(),t=(0,a.useRef)(null),r=(0,l.z)(e=>e.showHistory);!function(e){let t=(0,$.NL)().getQueryData(Y.iZ.initialPrompt(e)),r=(0,$.NL)(),n=(0,a.useRef)(!1),{createOptimisticMessage:s}=(0,G.m)(),{setIsSendChatMessageMutationPending:o}=(0,L.Xr)(),{startLiveMode:i}=(0,V.My)(),l=(0,K.OU)({projectId:e}),{setIsInitialized:u}=(0,E.mx)(),c=(0,z.dl)(W.P.SendMessageOnCreation)||!1;(0,a.useEffect)(()=>{var a,d;if(!t||n.current)return;n.current=!0;let f={id:t.id,message:t.message};(null===(a=t.selectedElements)||void 0===a?void 0:a.length)&&(f.selected_elements=t.selectedElements),(null===(d=t.images)||void 0===d?void 0:d.length)&&(f.optimisticImageUrls=t.images.map(e=>e.url),f.images=t.images.map(e=>({image_id:e.id,type:B.V.USER_UPLOAD}))),t.chatOnly&&(f.chat_only=t.chatOnly),t.agentMode&&(f.agent_mode=t.agentMode),t.builderToken&&(f.builder_token=t.builderToken),t.model&&(f.model=t.model),t.ai_message_id&&(f.ai_message_id=t.ai_message_id),f.is_creation=!0,c?(u(!0),o(!0),s({body:f})):l.mutate({body:f,isCreation:!0}),i(),r.invalidateQueries({queryKey:Y.E.all}),r.removeQueries({queryKey:Y.iZ.initialPrompt(e)})},[t,e,u,o,s,r,c,l,i])}(e);let{canEdit:c}=(0,i.t)(),d=(0,s.Z)("md");return c?(0,n.jsxs)("div",{className:"flex min-h-0 w-full flex-1 flex-col pl-2",ref:t,children:[(0,n.jsx)(Z.A,{}),r&&!d?(0,n.jsx)(u.p,{}):(0,n.jsx)(U,{}),!d&&(0,n.jsx)(J.t,{chatPanelRef:t})]}):null}},86818:function(e,t,r){"use strict";r.d(t,{UL:function(){return m},hw:function(){return p},t6:function(){return h},v7:function(){return g}});var n,a=r(52155),s=r(48535),o=r(94127),i=r(26696),l=r(4578),u=r(10178),c=r(39230);(n||(n={})).AI_FIX="AI Fix";let{AI_FIX:d}=n;o.N.NO_CODE_CHANGE,o.N.CODE_DIFF,o.N.FILE_EDITED_WITHOUT_PERMISSION,o.N.EXCLUDED_FILE_EDITED,o.N.DEPENDENCY_INSTALL,o.N.IMMEDIATE_RUNTIME,o.N.RUNTIME,o.N.BUILD,o.N.HTTP_CLIENT_ERROR,o.N.HTTP_SERVER_ERROR,o.N.SUPABASE_EDGE_FUNCTION_ERROR,o.N.CORS_ERROR,o.N.DEPLOY_SUPABASE_FUNCTIONS,o.N.SUPABASE_SQL_ERROR,o.N.SEARCH_REPLACE_FAILED,o.N.SEARCH_REPLACE_MISSING_FILE,o.N.CHANGED_MISSING_FILE,o.N.RENAME_FAILED,o.N.DELETION_FAILED;let f=e=>{let t=(0,s.H$)(e),r=t.length>1?e=>"# Error number ".concat(e+1,":\n#################\n\n"):()=>"",n=t.map((e,t)=>"".concat(r(t)).concat(e.error_message,"\n").concat(e.meta_data?"\n"+JSON.stringify(e.meta_data,null,2):"")).join("\n\n").replace(/\x1B\[[0-9;]*[JKmsu]/g,"");return n.length>2e4?n.slice(0,2e4)+"... (truncated)":n},m=e=>{let{errors:t,roundedTop:r=!0}=e;return(0,a.jsx)("div",{className:r?"mt-4":"",children:(0,a.jsx)("pre",{className:(0,l.cn)("w-full rounded-xl border-[3px] border-warning bg-background p-3 text-sm text-foreground",r?"mt-2 rounded-t-md":""),children:(0,a.jsx)("code",{className:"block w-full overflow-x-auto overflow-y-auto whitespace-pre-wrap",children:f(t)})})})},p=e=>{let{projectId:t,errors:r}=e,{mutate:n,isPending:a}=(0,u.mo)({projectId:t});return{onClick:()=>{n({body:{id:(0,c.Fd)(),message:"For the code present, I get the error below.\n\nPlease think step-by-step in order to resolve it.\n```\n".concat(f(r),"\n```\n"),mode:i.S.INSTANT,contains_error:!0,error_ids:r.map(e=>e.id)},projectId:t})},isPending:a}},g={[o.N.BUILD]:"Build unsuccessful",[o.N.CODE_DIFF]:"Changes couldn't be applied",[o.N.DEPLOY_SUPABASE_FUNCTIONS]:"Couldn't deploy Supabase functions",[o.N.DEPENDENCY_INSTALL]:"Couldn't install dependency",[o.N.FILE_EDITED_WITHOUT_PERMISSION]:"Tried editing file without permission",[o.N.EXCLUDED_FILE_EDITED]:"Unwanted changes",[o.N.IMMEDIATE_RUNTIME]:"Oops, it looks like our AI had a bit of a hiccup and broke the app",[o.N.NO_CODE_CHANGE]:"Changes already applied",[o.N.RUNTIME]:"The app encountered an error",[o.N.HTTP_CLIENT_ERROR]:"The app encountered an error",[o.N.HTTP_SERVER_ERROR]:"The app encountered an error",[o.N.SUPABASE_EDGE_FUNCTION_ERROR]:"The app encountered an error",[o.N.CORS_ERROR]:"The app encountered an error",[o.N.SUPABASE_SQL_ERROR]:"An error occurred while applying the migration",[o.N.SEARCH_REPLACE_FAILED]:"Failed search-replace",[o.N.SEARCH_REPLACE_MISSING_FILE]:"Search-replace on missing file",[o.N.CHANGED_MISSING_FILE]:"Tried deleting or renaming non-existent file",[o.N.RENAME_FAILED]:"Failed to rename file",[o.N.DELETION_FAILED]:"Failed to delete file"},h={[o.N.BUILD]:!0,[o.N.CODE_DIFF]:!0,[o.N.SUPABASE_EDGE_FUNCTION_ERROR]:!0,[o.N.DEPENDENCY_INSTALL]:!0,[o.N.DEPLOY_SUPABASE_FUNCTIONS]:!0,[o.N.HTTP_CLIENT_ERROR]:!0,[o.N.HTTP_SERVER_ERROR]:!0,[o.N.CORS_ERROR]:!0,[o.N.FILE_EDITED_WITHOUT_PERMISSION]:!0,[o.N.EXCLUDED_FILE_EDITED]:!0,[o.N.IMMEDIATE_RUNTIME]:!0,[o.N.NO_CODE_CHANGE]:!0,[o.N.RUNTIME]:!0,[o.N.SUPABASE_SQL_ERROR]:!0,[o.N.SEARCH_REPLACE_FAILED]:!0,[o.N.SEARCH_REPLACE_MISSING_FILE]:!0,[o.N.CHANGED_MISSING_FILE]:!0,[o.N.RENAME_FAILED]:!0,[o.N.DELETION_FAILED]:!0}},96659:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var n=r(98244),a=r(21517);let s=e=>{try{if(null==e)return!1;let t=e.toDate();if(new Date().getTime()-t.getTime()>6e4)return!1;return!0}catch(e){return!1}},o=()=>{let e=(0,a.iZ)(e=>e.project),t=null==e?void 0:e.locked_at,[r,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!t||!s(t)){o(!1);return}let e=setInterval(()=>{let r=s(t);o(r),r||clearInterval(e)},250);return()=>clearInterval(e)},[t]),r}},54140:function(e,t,r){"use strict";r.d(t,{N:function(){return l}});var n=r(52155),a=r(98244),s=r(3415),o=r(84183),i=r(4578);let l=e=>{let{name:t,isInteractive:r,className:l,photoSrc:u,userColor:c,isWorkspace:d=!1,tooltipContent:f=t,...m}=e,p=t?t.charAt(0).toUpperCase():"",[g,h]=(0,a.useState)(!1);return(0,n.jsxs)(o.u,{open:!!r&&!!t&&g,onOpenChange:h,children:[(0,n.jsx)(o.aJ,{asChild:!0,children:(0,n.jsxs)(s.qE,{className:(0,i.cn)("h-[26px] w-[26px] shrink-0 border border-transparent text-xs",{["hover:bg-".concat(c)]:!u&&!d&&r,"cursor-pointer":r,["hover:border-".concat(c)]:r,["group-[.avatars]:hover:border-".concat(c)]:r,"group-[.avatars]:border-background":!0,"rounded-[8px] hover:border-transparent":d},l),...m,children:[(0,n.jsx)(s.F$,{className:"aspect-auto object-cover",src:u}),(0,n.jsx)(s.Q5,{className:(0,i.cn)("font-medium text-white bg-".concat(c),d&&"rounded-[8px]",l),children:p})]})}),(0,n.jsx)(o._v,{children:f})]})}},60468:function(e,t,r){"use strict";r.d(t,{Y:function(){return o}});var n=r(52155),a=r(54140),s=r(92887);let o=e=>{var t;let{isInteractive:r=!1,className:o,user:i,photoURL:l,...u}=e,c=(0,s.Q)(null==i?void 0:i.id),d=(null==i?void 0:null===(t=i.attributes)||void 0===t?void 0:t.display_name)||(null==i?void 0:i.username)||(null==i?void 0:i.id);return(0,n.jsx)(a.N,{name:d,isInteractive:r,photoSrc:l,userColor:c,className:o,...u})}},3415:function(e,t,r){"use strict";r.d(t,{F$:function(){return l},Q5:function(){return u},qE:function(){return i}});var n=r(52155),a=r(12553),s=r(98244),o=r(4578);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.fC,{ref:t,className:(0,o.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...s})});i.displayName=a.fC.displayName;let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.Ee,{ref:t,className:(0,o.cn)("aspect-square h-full w-full",r),...s})});l.displayName=a.Ee.displayName;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.NY,{ref:t,className:(0,o.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...s})});u.displayName=a.NY.displayName},7815:function(e,t,r){"use strict";r.d(t,{NI:function(){return h},Wi:function(){return d},l0:function(){return u},lX:function(){return g},pf:function(){return v},xJ:function(){return p},zG:function(){return E}});var n=r(52155),a=r(21622),s=r(98244),o=r(96869),i=r(30335),l=r(4578);let u=o.RV,c=s.createContext({}),d=e=>{let{...t}=e;return(0,n.jsx)(c.Provider,{value:{name:t.name},children:(0,n.jsx)(o.Qr,{...t})})},f=()=>{let e=s.useContext(c),t=s.useContext(m),{getFieldState:r,formState:n}=(0,o.Gc)(),a=r(e.name,n);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},m=s.createContext({}),p=s.forwardRef((e,t)=>{let{className:r,...a}=e,o=s.useId();return(0,n.jsx)(m.Provider,{value:{id:o},children:(0,n.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...a})})});p.displayName="FormItem";let g=s.forwardRef((e,t)=>{let{className:r,...a}=e,{error:s,formItemId:o}=f();return(0,n.jsx)(i.Label,{ref:t,className:(0,l.cn)(s&&"",r),htmlFor:o,...a})});g.displayName="FormLabel";let h=s.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:o,formDescriptionId:i,formMessageId:l}=f();return(0,n.jsx)(a.g7,{ref:t,id:o,"aria-describedby":s?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!s,...r})});h.displayName="FormControl";let v=s.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:s}=f();return(0,n.jsx)("p",{ref:t,id:s,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});v.displayName="FormDescription";let E=s.forwardRef((e,t)=>{let{className:r,children:a,...s}=e,{error:o,formMessageId:i}=f(),u=o?String(null==o?void 0:o.message):a;return u?(0,n.jsx)("p",{ref:t,id:i,className:(0,l.cn)("text-xs font-medium text-destructive-primary",r),...s,children:u}):null});E.displayName="FormMessage"},30335:function(e,t,r){"use strict";r.d(t,{Label:function(){return u}});var n=r(52155),a=r(30541),s=r(34255),o=r(98244),i=r(4578);let l=(0,s.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=o.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.f,{ref:t,className:(0,i.cn)(l(),r),...s})});u.displayName=a.f.displayName},25938:function(e,t,r){"use strict";r.d(t,{SP:function(){return u},dr:function(){return l},mQ:function(){return i},nU:function(){return c}});var n=r(52155),a=r(41932),s=r(98244),o=r(4578);let i=a.fC,l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.aV,{ref:t,className:(0,o.cn)("inline-flex h-9 items-center justify-center rounded-lg p-1 text-muted-foreground",r),...s})});l.displayName=a.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",r),...s})});u.displayName=a.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,n.jsx)(a.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});c.displayName=a.VY.displayName},47684:function(e,t,r){"use strict";r.d(t,{F:function(){return o}});var n=r(52155),a=r(84183),s=r(98244);let o=e=>{let[t,r]=(0,s.useState)(!1),o=(0,s.useRef)(),i=(0,s.useCallback)(e=>{e&&(clearTimeout(o.current),navigator.clipboard.writeText(e),r(!0),o.current=setTimeout(()=>{r(!1)},1e3))},[]);return r=>{let{TriggerComponent:s,textToCopy:o,copiedFeedbackText:l="Copied!"}=r;return(0,n.jsx)(a.pn,{children:(0,n.jsxs)(a.u,{open:t,children:[(0,n.jsx)(a.aJ,{onClick:t=>{(null==e||!e.altKey||t.altKey)&&o&&i(o)},asChild:!0,className:"hello",children:(0,n.jsx)(s,{})}),(0,n.jsx)(a._v,{children:(0,n.jsx)("p",{children:l})})]})})}}},48535:function(e,t,r){"use strict";r.d(t,{H$:function(){return g},hT:function(){return E},qV:function(){return h}});var n=r(56166),a=r(95713),s=r(98244),o=r(43456),i=r(7287),l=r(94671),u=r(92361),c=r(84864),d=r(94127),f=r(66813),m=r(17138);function p(e){var t,r,n;let a=e.meta_data?"|".concat(null===(t=e.meta_data)||void 0===t?void 0:t.colno,"|").concat(null===(r=e.meta_data)||void 0===r?void 0:r.lineno,"|").concat(null===(n=e.meta_data)||void 0===n?void 0:n.filename):"";return"".concat(e.error_message,"|").concat(e.type).concat(a)}function g(e){return e.filter((e,t,r)=>t===r.findIndex(t=>p(t)===p(e)))}function h(e){let{projectId:t,errorIds:r,setErrors:a}=e;return(0,n.D)({mutationFn:async()=>(a([]),(0,l.SJ)().patch("/projects/".concat(t,"/handle-errors"),{error_ids:r})),onError:e=>{c.logging.error("failed_to_submit_handled_errors",{error:e})}})}let v=e=>{e.sort((e,t)=>e.type===d.N.RUNTIME&&t.type!==d.N.RUNTIME?-1:t.created_at.seconds-e.created_at.seconds);let t={uniqueErrors:[],runtimeErrorMessages:new Set};return e.reduce((e,t)=>{if(t.type===d.N.IMMEDIATE_RUNTIME||t.type===d.N.RUNTIME){let r=t.error_message.replace(/\?v=[a-z0-9]{8}/,"?'");e.runtimeErrorMessages.has(r)||(e.runtimeErrorMessages.add(r),e.uniqueErrors.push(t))}else e.uniqueErrors.push(t);return e},t).uniqueErrors},E=e=>{let{projectId:t}=e,[r,n]=(0,s.useState)([]),d=(0,l.SJ)(),p=(0,i.vE)();(0,o.ZP)(p,{protocols:"vite-hmr",share:!0,onMessage:e=>{try{let n=JSON.parse(e.data);if((null==n?void 0:n.type)==="error"){var r;c.logging.info("build_error_from_devserver",{message:null==n?void 0:null===(r=n.err)||void 0===r?void 0:r.message});let e=f.p.safeParse(null==n?void 0:n.err);e.success?(0,m.e)(e.data,t,d):(c.logging.error("error_parsing_devserver_error",{error:e}),(0,m.e)(null==n?void 0:n.err,t,d))}}catch(e){c.logging.error("error_parsing_devserver_error",{error:e})}},onOpen:e=>{c.logging.debug("devserver_websocket_open")},onClose:e=>{c.logging.debug("devserver_websocket_close")},onError:e=>{c.logging.error("devserver_websocket_error",{event:e})},shouldReconnect:()=>!0,reconnectInterval:1e3});let g=h({projectId:t,errorIds:r.map(e=>e.id),setErrors:n});return(0,s.useEffect)(()=>{let e=function(e,t){let r=(0,a.hJ)(u.db,"projects/".concat(e,"/errors")),n=(0,a.IO)(r,(0,a.ar)("handled_at","==",null));return(0,a.cf)(n,e=>{e.empty?t([]):t(e.docs.map(e=>({...e.data(),id:e.id})))})}(t,n);return()=>e()},[t]),{errors:(0,s.useMemo)(()=>0===r.length?null:v(r),[r]),setErrors:n,handleErrorMutation:r.length>0?g:null}}},92887:function(e,t,r){"use strict";r.d(t,{Q:function(){return s}});var n=r(98244);let a=["brand-ocean-primary","brand-twilight-primary","brand-flamingo-primary","brand-bubblegum-primary","brand-saffron-primary","brand-tiger-primary"];function s(e){return(0,n.useMemo)(()=>{e||(e="fake-user");let t=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return Math.abs(t)}(e)%a.length;return a[t]},[e])}},17176:function(e,t,r){"use strict";r.d(t,{t:function(){return a}});var n=r(92104);let a=e=>{let{projectId:t,projectName:r,useCacheBuster:a,sha:s}=e;if(!t&&!r)throw Error("projectId or projectName must be provided");if(t&&r)throw Error("projectId and projectName cannot both be provided");let o=n.env.NEXT_PUBLIC_PROXY_WORKER_PROTOCOL||"https",i=n.env.NEXT_PUBLIC_PROXY_WORKER_PORT?":".concat(n.env.NEXT_PUBLIC_PROXY_WORKER_PORT):"",l=s?"-".concat(s.slice(0,8)):"";try{let e=new URL("".concat(o,"://").concat(void 0!==r?"preview":"id-preview").concat(l,"--").concat(r||t,".").concat("lovable.app").concat(i));return a&&e.searchParams.set("cache",Date.now().toString()),e.toString()}catch(e){return window.location.href="/","/"}}},33864:function(e,t,r){"use strict";function n(e){return Number.isInteger(e)?e.toString():e.toFixed(2)}function a(e,t){return"".concat(n(e),"/").concat(n(t))}r.d(t,{H:function(){return n},u:function(){return a}})},58010:function(e,t,r){"use strict";r.d(t,{LJ:function(){return s},ZU:function(){return i},sb:function(){return o}});var n=r(18587),a=r(72353);function s(e){return{absolute:(0,n.WU)(e,"h:mm a"),relative:(0,n.WU)(e,"h:mm a")}}function o(e){let t=!(0,a.X)(e),r="MMM d";return t&&(r+=", yyyy"),r+=", h:mm a",{absolute:(0,n.WU)(e,r),relative:(0,n.WU)(e,r)}}function i(e){return"string"==typeof e?new Date(e):e.toDate()}},38109:function(e,t,r){"use strict";r.d(t,{F:function(){return u},f:function(){return c}});var n=r(98244);let a=["light","dark"],s="(prefers-color-scheme: dark)",o="undefined"==typeof window,i=(0,n.createContext)(void 0),l={setTheme:e=>{},themes:[]},u=()=>{var e;return null!==(e=(0,n.useContext)(i))&&void 0!==e?e:l},c=e=>(0,n.useContext)(i)?n.createElement(n.Fragment,null,e.children):n.createElement(f,e),d=["light","dark"],f=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:o=!0,storageKey:l="theme",themes:u=d,defaultTheme:c=r?"system":"light",attribute:f="data-theme",value:v,children:E,nonce:N})=>{let[b,y]=(0,n.useState)(()=>p(l,c)),[_,x]=(0,n.useState)(()=>p(l)),I=v?Object.values(v):u,S=(0,n.useCallback)(e=>{let n=e;if(!n)return;"system"===e&&r&&(n=h());let s=v?v[n]:n,i=t?g():null,l=document.documentElement;if("class"===f?(l.classList.remove(...I),s&&l.classList.add(s)):s?l.setAttribute(f,s):l.removeAttribute(f),o){let e=a.includes(c)?c:null,t=a.includes(n)?n:e;l.style.colorScheme=t}null==i||i()},[]),R=(0,n.useCallback)(e=>{y(e);try{localStorage.setItem(l,e)}catch(e){}},[e]),w=(0,n.useCallback)(t=>{x(h(t)),"system"===b&&r&&!e&&S("system")},[b,e]);(0,n.useEffect)(()=>{let e=window.matchMedia(s);return e.addListener(w),w(e),()=>e.removeListener(w)},[w]),(0,n.useEffect)(()=>{let e=e=>{e.key===l&&R(e.newValue||c)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[R]),(0,n.useEffect)(()=>{S(null!=e?e:b)},[e,b]);let T=(0,n.useMemo)(()=>({theme:b,setTheme:R,forcedTheme:e,resolvedTheme:"system"===b?_:b,themes:r?[...u,"system"]:u,systemTheme:r?_:void 0}),[b,R,e,_,r,u]);return n.createElement(i.Provider,{value:T},n.createElement(m,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:r,enableColorScheme:o,storageKey:l,themes:u,defaultTheme:c,attribute:f,value:v,children:E,attrs:I,nonce:N}),E)},m=(0,n.memo)(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:o,enableColorScheme:i,defaultTheme:l,value:u,attrs:c,nonce:d})=>{let f="system"===l,m="class"===r?`var d=document.documentElement,c=d.classList;c.remove(${c.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${r}',s='setAttribute';`,p=i?a.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",g=(e,t=!1,n=!0)=>{let s=u?u[e]:e,o=t?e+"|| ''":`'${s}'`,l="";return i&&n&&!t&&a.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===r?l+=t||s?`c.add(${o})`:"null":s&&(l+=`d[s](n,${o})`),l},h=e?`!function(){${m}${g(e)}}()`:o?`!function(){try{${m}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${f})){var t='${s}',m=window.matchMedia(t);if(m.media!==t||m.matches){${g("dark")}}else{${g("light")}}}else if(e){${u?`var x=${JSON.stringify(u)};`:""}${g(u?"x[e]":"e",!0)}}${f?"":"else{"+g(l,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${m}var e=localStorage.getItem('${t}');if(e){${u?`var x=${JSON.stringify(u)};`:""}${g(u?"x[e]":"e",!0)}}else{${g(l,!1,!1)};}${p}}catch(t){}}();`;return n.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:h}})},()=>!0),p=(e,t)=>{let r;if(!o){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},g=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},h=e=>(e||(e=window.matchMedia(s)),e.matches?"dark":"light")},43456:function(e,t,r){"use strict";t.ZP=void 0;var n=r(36397);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return n.useWebSocket}}),r(47130),r(84999),r(26678),r(42893)},26678:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};Object.defineProperty(t,"__esModule",{value:!0}),t.useEventSource=void 0;var s=r(98244),o=r(36397),i=r(84999);t.useEventSource=function(e,t,r){void 0===t&&(t=i.DEFAULT_EVENT_SOURCE_OPTIONS);var l=t.withCredentials,u=t.events,c=a(t,["withCredentials","events"]);void 0===r&&(r=!0);var d=n(n({},c),{eventSourceOptions:{withCredentials:l}}),f=(0,s.useRef)(i.EMPTY_EVENT_HANDLERS);u&&(f.current=u);var m=(0,o.useWebSocket)(e,d,r),p=m.lastMessage,g=m.readyState,h=m.getWebSocket;return(0,s.useEffect)(function(){(null==p?void 0:p.type)&&Object.entries(f.current).forEach(function(e){var t=e[0],r=e[1];t===p.type&&r(p)})},[p]),{lastEvent:p,readyState:g,getEventSource:h}}},47130:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.useSocketIO=void 0;var a=r(98244),s=r(36397),o=r(84999),i={type:"empty",payload:null},l=function(e){if(!e||!e.data)return i;var t=e.data.match(/\[.*]/);if(!t)return i;var r=JSON.parse(t);return Array.isArray(r)&&r[1]?{type:r[0],payload:r[1]}:i};t.useSocketIO=function(e,t,r){void 0===t&&(t=o.DEFAULT_OPTIONS),void 0===r&&(r=!0);var i=(0,a.useMemo)(function(){return n(n({},t),{fromSocketIO:!0})},[]),u=(0,s.useWebSocket)(e,i,r),c=u.sendMessage,d=u.sendJsonMessage,f=u.lastMessage,m=u.readyState,p=u.getWebSocket,g=(0,a.useMemo)(function(){return l(f)},[f]);return{sendMessage:c,sendJsonMessage:d,lastMessage:g,lastJsonMessage:g,readyState:m,getWebSocket:p}}},32315:function(e,t,r){"use strict";r.d(t,{Fw:function(){return _},VY:function(){return w},fC:function(){return S},p_:function(){return g},wy:function(){return b},xz:function(){return R}});var n=r(98244),a=r(52886),s=r(10635),o=r(92542),i=r(81605),l=r(96501),u=r(5408),c=r(64626),d=r(84823),f=r(52155),m="Collapsible",[p,g]=(0,s.b)(m),[h,v]=p(m),E=n.forwardRef((e,t)=>{let{__scopeCollapsible:r,open:a,defaultOpen:s,disabled:i,onOpenChange:l,...c}=e,[p,g]=(0,o.T)({prop:a,defaultProp:null!=s&&s,onChange:l,caller:m});return(0,f.jsx)(h,{scope:r,disabled:i,contentId:(0,d.M)(),open:p,onOpenToggle:n.useCallback(()=>g(e=>!e),[g]),children:(0,f.jsx)(u.WV.div,{"data-state":I(p),"data-disabled":i?"":void 0,...c,ref:t})})});E.displayName=m;var N="CollapsibleTrigger",b=n.forwardRef((e,t)=>{let{__scopeCollapsible:r,...n}=e,s=v(N,r);return(0,f.jsx)(u.WV.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":I(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:t,onClick:(0,a.M)(e.onClick,s.onOpenToggle)})});b.displayName=N;var y="CollapsibleContent",_=n.forwardRef((e,t)=>{let{forceMount:r,...n}=e,a=v(y,e.__scopeCollapsible);return(0,f.jsx)(c.z,{present:r||a.open,children:e=>{let{present:r}=e;return(0,f.jsx)(x,{...n,ref:t,present:r})}})});_.displayName=y;var x=n.forwardRef((e,t)=>{let{__scopeCollapsible:r,present:a,children:s,...o}=e,c=v(y,r),[d,m]=n.useState(a),p=n.useRef(null),g=(0,l.e)(t,p),h=n.useRef(0),E=h.current,N=n.useRef(0),b=N.current,_=c.open||d,x=n.useRef(_),S=n.useRef(void 0);return n.useEffect(()=>{let e=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,i.b)(()=>{let e=p.current;if(e){S.current=S.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();h.current=t.height,N.current=t.width,x.current||(e.style.transitionDuration=S.current.transitionDuration,e.style.animationName=S.current.animationName),m(a)}},[c.open,a]),(0,f.jsx)(u.WV.div,{"data-state":I(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!_,...o,ref:g,style:{"--radix-collapsible-content-height":E?"".concat(E,"px"):void 0,"--radix-collapsible-content-width":b?"".concat(b,"px"):void 0,...e.style},children:_&&s})});function I(e){return e?"open":"closed"}var S=E,R=b,w=_},72353:function(e,t,r){"use strict";r.d(t,{X:function(){return s}});var n=r(16309),a=r(41423);function s(e){return function(e,t){let r=(0,a.Q)(e),n=(0,a.Q)(t);return r.getFullYear()===n.getFullYear()}(e,(0,n.y)(e))}},29717:function(e,t,r){"use strict";r.d(t,{k:function(){return s}});var n=r(41423),a=r(49974);function s(e,t){return function(e,t){let r=(0,n.Q)(e);return isNaN(t)?(0,a.L)(e,NaN):(t&&r.setDate(r.getDate()+t),r)}(e,-t)}}},function(e){e.O(0,[8622,9241,2625,1729,4282,2255,1307,313,7990,6555,7522,2703,2352,5283,5243,9361,3521,2122,6166,5394,8089,5108,8046,704,9217,7025,2368,368,3556,8476,7929,8648,2196,4671,66,5619,3880,3475,2417,6900,7472,6839,5143,1744],function(){return e(e.s=34700)}),_N_E=e.O()}]);