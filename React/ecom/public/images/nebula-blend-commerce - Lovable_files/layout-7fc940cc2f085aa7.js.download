try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="01a2d4a3-7afd-4e27-8851-bf3c33d0b667",e._sentryDebugIdIdentifier="sentry-dbid-01a2d4a3-7afd-4e27-8851-bf3c33d0b667")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8825],{53996:function(e,t,a){Promise.resolve().then(a.bind(a,71840))},8020:function(e,t,a){"use strict";a.d(t,{hO:function(){return d},j1:function(){return m},jZ:function(){return p},ls:function(){return c}});var s=a(99526),l=a(98244),r=a(13273),n=a(94671),i=a(84864),o=a(22894);let c="pending-collaboration-invite",d=()=>{let[e,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{try{let e=sessionStorage.getItem(c);if(e){let a=JSON.parse(e);t(a)}}catch(e){i.logging.error("Error reading pending collaboration invite:",{error:e})}},[]),{pendingInvite:e,clearPendingInvite:(0,l.useCallback)(()=>{sessionStorage.removeItem(c),t(null)},[])}},u=e=>{let t=new URL((null==e?void 0:e.get("redirect"))?decodeURIComponent(e.get("redirect")):"/",window.location.origin);return t.searchParams.set("should-refresh-credentials","1"),t},m=()=>{let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),{pendingInvite:a,clearPendingInvite:r}=d();return(0,l.useCallback)(s=>{if(a){let e="".concat(a.projectUrl,"?magic_link=").concat(a.magicLink);r(),window.location.href=e;return}let l=u(t),n=new URLSearchParams(t);s?(n.set("redirect",l.pathname+l.search),s.includes("?")?e.push(s+"&".concat(n.toString())):e.push(s+"?".concat(n.toString()))):e.push(l.pathname+l.search),e.refresh()},[e,t,a,r])},p=()=>{let{setIsSuccessfulReferral:e}=(0,o.l)();return(0,l.useCallback)(async(t,a)=>{if(!a)return;let s=(0,n.Tb)();try{let l=await t.getIdToken();await s.post("/user/referral-code/use",{referral_code:a},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}}),e()}catch(t){let e=(0,r.B8)(t);400===e.status&&(e.message=e.message||"Invalid referral code",e.details="Your sign-up will proceed without the referral bonus."),(0,r.Eo)(e)}},[e])}},2247:function(e,t,a){"use strict";a.d(t,{A:function(){return N}});var s=a(52155),l=a(68820),r=a(98392),n=a(37298),i=a(17195),o=a(98244),c=a(12703),d=a(45776),u=a(13018),m=a(59561),p=a(14070),h=a(99792),x=a(3011),f=a(45145),g=a(89671),v=a(50484),b=a(42690);let j=["This offer is for new Lovable users only (gotta share the magic with fresh eyes).","Rewards are unlocked once your invite actually publishes an app. No ghost referrals, please.","Each referral code can be used by a maximum of 5 new users. Once you reach this limit, your referral link will no longer accept new signups.","We reserve the right to change, pause, or end this program anytime. We're experimental like that.","Don't spam or post your link where it doesn't belong. Let's keep it classy.","If we suspect sketchy behavior, we may withhold rewards or deactivate your link.","One reward per new user invited. No stacking loopholes - we're nerds, we'll catch it."],y=e=>{let{back:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)(p.fK,{className:"flex flex-col gap-4",children:[(0,s.jsxs)(m.z,{onClick:t,variant:"ghost",className:"w-fit px-2",children:[(0,s.jsx)(h.Z,{name:"arrow_left_alt"}),"Back"]}),(0,s.jsx)(p.$N,{children:"Terms and conditions"})]}),(0,s.jsx)("div",{className:"pb-6",children:(0,s.jsx)("ul",{className:"flex max-h-[15rem] list-disc flex-col gap-2 overflow-auto px-5",children:j.map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:e})},t))})})]})},w=[{icon:"bolt",children:"Share your invite link"},{icon:"crown",children:(0,s.jsxs)(s.Fragment,{children:["They sign up and get ",(0,s.jsx)("b",{children:"extra 10 credits"})]})},{icon:"chat",children:(0,s.jsxs)(s.Fragment,{children:["You get ",(0,s.jsx)("b",{children:"10 credits"})," once they publish their first website"]})}],N=e=>{var t,a,j;let{onSuccess:N}=e,[E,k]=(0,o.useState)(!1),C=(0,d.useCurrentWorkspaceStore)(e=>e.currentWorkspace),[_,S]=(0,o.useState)(!1),T=null!==(j=(0,u.dl)(v.P.ReferralCopyConfetti))&&void 0!==j&&j,R=(0,l.a)(b.t.referralCode({referralCode:null==C?void 0:C.referral_code,workspaceId:null==C?void 0:C.id})),I=(0,o.useRef)(null);(0,o.useEffect)(()=>{let e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="10001",e.style.pointerEvents="none",document.body.appendChild(e),I.current=new r.Z({canvas:e}),()=>{document.body.removeChild(e)}},[]);let D=window.location.protocol+"//"+window.location.host,P="".concat(D,"/invite/").concat(null===(t=R.data)||void 0===t?void 0:t.referral_code),z=async()=>{if(!E)try{if(await navigator.clipboard.writeText(P),k(!0),T){var e;null===(e=I.current)||void 0===e||e.addConfetti({emojis:["❤️","\uD83D\uDC96","\uD83D\uDC9D","\uD83D\uDC97","\uD83D\uDC93"],emojiSize:58})}i.ZP.capture(g.PU.COPIED_LINK,{method:"button",did_confetti:T}),setTimeout(()=>{k(!1)},2e3)}catch(e){c.Am.error("Failed to copy link")}};return(0,s.jsxs)(p.cZ,{hideCloseButton:!0,className:"pointer-events-auto flex max-h-[95vh] flex-col gap-4 overflow-y-auto border-none bg-background outline-none",children:[(0,s.jsx)(p.$N,{className:"sr-only",children:"Refer & Earn"}),_?(0,s.jsx)(y,{back:()=>S(!1)}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.fK,{children:(0,s.jsxs)("div",{className:"relative h-fit overflow-hidden rounded-xl",children:[(0,s.jsx)("button",{onClick:N,className:"absolute right-4 top-4 z-10 bg-transparent",tabIndex:-1,children:(0,s.jsx)(h.Z,{name:"close",className:"h-5 w-5 cursor-pointer text-muted-foreground"})}),(0,s.jsx)(n.default,{src:"/img/referral/dark-spread.png",alt:"Referral",className:"hidden w-full object-contain dark:block",width:406,height:188,priority:!0}),(0,s.jsx)(n.default,{src:"/img/referral/light-spread.png",alt:"Lovable 2.0",className:"block w-full object-contain dark:hidden",width:406,height:188,priority:!0})]})}),(0,s.jsxs)("div",{className:"md:py-2",children:[(0,s.jsx)("div",{className:"mb-3 text-base font-normal text-muted-foreground",children:"How it works:"}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:w.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(h.Z,{name:e.icon,className:"h-5 w-5"}),(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsx)("span",{className:"text-base font-normal text-foreground",children:e.children})})]},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"mb-3 text-base font-normal text-muted-foreground",children:"Your invite link:"}),R.isLoading?(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(f.O,{className:"h-12 w-full rounded-xl"})}):(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-2 rounded-xl bg-muted p-2 sm:flex-row sm:space-y-0",children:[(0,s.jsxs)("div",{className:"flex w-full flex-1 items-center px-2",children:[(0,s.jsx)(h.Z,{name:"link",className:"mr-2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(x.I,{onCopy:()=>{i.ZP.capture(g.PU.COPIED_LINK,{method:"input_copy",did_confetti:T})},value:R.error?"Error fetching the link, sorry":P,tabIndex:-1,readOnly:!0,className:"border-none shadow-none focus:outline-none focus:ring-0 focus-visible:ring-0"})]}),(0,s.jsx)(m.z,{onClick:z,className:"w-full rounded-xl sm:w-24",variant:"default",disabled:R.isLoading||!(null===(a=R.data)||void 0===a?void 0:a.referral_code),children:E?"Copied!":"Copy link"})]})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(m.z,{variant:"link",className:"h-fit w-fit py-0 text-xs font-normal text-muted-foreground underline",onClick:()=>S(!0),children:"View Terms and Conditions"})})]})]})}},22894:function(e,t,a){"use strict";a.d(t,{l:function(){return s}});let s=(0,a(67801).Ue)(e=>({shouldShowReferralNotice:!1,setIsSuccessfulReferral:()=>e({shouldShowReferralNotice:!0})}))},71840:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return iZ}});var s,l,r,n,i,o,c,d,u,m,p=a(52155),h=a(29605),x=a(56166),f=a(99526),g=a(98244),v=a(12703),b=a(75970),j=a(16022),y=a(87294),w=a(75748),N=a(13273),E=a(94671),k=a(10683),C=a(81121),_=a(32282),S=a(17195),T=a(45776),R=a(84864),I=a(89671),D=a(33619),P=a(26985),z=a(21198),A=a(70980),O=a(39230),L=a(69395),Z=a(37156);let M=()=>{let e=(0,g.useRef)({}),t=(0,g.useMemo)(()=>["click","mousemove","keydown","touchstart","touchmove","touchend"],[]),a=(0,g.useCallback)((a,s)=>{let l=new Date().getTime()-a;for(let a of(S.ZP.capture(I.SL.FIRST_INTERACT_AFTER_GEN,{plinged_feature:s,time_to_activity_ms:l}),t))document.removeEventListener(a,e.current[a])},[t]),s=(0,g.useCallback)(s=>{let l=new Date().getTime();for(let r of t){let t=()=>{a(l,s.didPling)};e.current[r]=t,document.addEventListener(r,t)}},[t,a]);return(0,g.useEffect)(()=>()=>{for(let a of t)e.current[a]&&document.removeEventListener(a,e.current[a])},[t]),{startTrackingUserActivity:s}},F=()=>{let{userData:e}=(0,Z.SE)(),t=(0,g.useRef)(e);(0,g.useEffect)(()=>{t.current=e},[e]);let{startTrackingUserActivity:a}=M();return{playAudioOnGenerationComplete:(0,g.useCallback)(e=>{var s;let l=t.current,r=null!==(s=null==l?void 0:l.sound_effect_active)&&void 0!==s?s:"firstgen",n=!e.isChatOnly&&"never"!==r&&("always"===r||"firstgen"===r&&!!e.isCreation),i=n;n&&new Audio("/audio/generation-complete.mp3").play().catch(()=>{i=!1}),a({didPling:i})},[a])}};var U=a(87950);let K=(e,t)=>{let a=(0,g.useRef)();return(0,g.useEffect)(()=>()=>{a.current&&clearTimeout(a.current)},[]),(0,g.useCallback)(function(){for(var s=arguments.length,l=Array(s),r=0;r<s;r++)l[r]=arguments[r];a.current&&clearTimeout(a.current),a.current=setTimeout(()=>e(...l),t)},[e,t])};var V=a(8020),W=a(19214),B=a(77162);let G="lovable_collaboration_status",H=()=>{try{let e=localStorage.getItem(G);return e?JSON.parse(e):{}}catch(e){return{}}},J=(e,t)=>{let a=H()[e];return a&&a.userId===t?Date.now()-a.timestamp>3e5?null:a.isMember:null},q=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=H();r[e]={userId:t,isMember:a,joinedAt:s,accessLevel:l,timestamp:Date.now()},localStorage.setItem(G,JSON.stringify(r))},X=(e,t)=>{let a=H();a[e]&&a[e].userId===t&&(delete a[e],localStorage.setItem(G,JSON.stringify(a)))};var $=a(84516),Y=a(21517),Q=a(59561),ee=a(14070),et=a(99792),ea=a(77658);let es=e=>{let{projectId:t,projectName:a,invitor:s,magicCodeId:l,done:r,onReject:n}=e,[i,o]=(0,g.useState)(!1),c=(0,h.NL)(),{authUser:d}=(0,b.Eu)(),u=(0,$.c)(e=>e.collaborators).find(e=>e.id===(null==d?void 0:d.uid)),m=u&&!u.joined_at,x=async()=>{o(!0);try{if(l){r();return}let e=(0,E.SJ)();await e.put("/projects/".concat(t,"/collaborators/accept-invite")),v.Am.success("Invitation accepted!",{description:'You can now access "'.concat(a,'"')}),await c.invalidateQueries({queryKey:_.iZ.collaborators(t)}),await c.invalidateQueries({queryKey:_.iZ.detail(t)}),r()}catch(e){console.error("Error accepting invite:",e),(0,N.Eo)(e)}finally{o(!1)}},f=async()=>{o(!0);try{if(m){let e=(0,E.SJ)();await e.put("/projects/".concat(t,"/collaborators/reject-invite"))}await c.invalidateQueries({queryKey:_.iZ.collaborators(t)}),null==n||n()}catch(e){(0,N.Eo)(e)}finally{o(!1)}};return(0,p.jsxs)(ee.cZ,{className:"gap-4 outline-none focus:ring-0",size:"md",hideCloseButton:!0,blurOverlay:!0,onInteractOutside:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,p.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,p.jsx)(ea.xx,{className:"h-9"}),(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{className:"text-2xl md:text-3xl",children:"You've been invited!"}),(0,p.jsxs)(ee.Be,{children:["You've been invited to collaborate on \"",a,'"',s&&" by ".concat(s)]})]})]}),(0,p.jsxs)(ee.cN,{fullWidthButtons:!0,className:"flex-col gap-2",children:[(0,p.jsxs)(Q.z,{onClick:e=>{e.preventDefault(),e.stopPropagation(),x()},disabled:i,className:"w-full",children:[(0,p.jsx)(et.Z,{name:"check",size:"small",className:"mr-2"}),"Accept invitation"]}),(0,p.jsxs)(Q.z,{onClick:e=>{e.preventDefault(),e.stopPropagation(),f()},disabled:i,className:"w-full",variant:"outline",children:[(0,p.jsx)(et.Z,{name:"close",size:"small",className:"mr-2"}),"Decline invitation"]})]})]})},el="magic_link",er=()=>{let{authUser:e}=(0,b.Eu)(),t=(0,f.useRouter)(),a=(0,f.usePathname)(),[s,l]=(0,g.useState)(!1),r=(0,f.useSearchParams)(),n=(0,h.NL)(),i=(0,B.D)(),o=r.get(el),c=(0,W.z)(es),d=(0,$.c)(e=>e.collaborators),u=(0,$.c)(e=>e.hasFetchedCollaborators),m=d.find(t=>t.id===(null==e?void 0:e.uid)),p=(null==e?void 0:e.uid)?J(i,e.uid):null,j=m&&m.joined_at,y=null!==p?p:j;(0,g.useEffect)(()=>{if(u&&(null==e?void 0:e.uid)){let a=!!(null==m?void 0:m.joined_at),s=J(i,e.uid);if(null!==s&&s!==a&&X(i,e.uid),m){var t;q(i,e.uid,a,(null===(t=m.joined_at)||void 0===t?void 0:t.toString())||null,m.access_level||null)}else!0===s&&X(i,e.uid)}},[u,null==e?void 0:e.uid,m,i]);let{mutate:w}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,E.SJ)().get("/projects/".concat(i,"/magic-codes/").concat(t,"/validate"))},onSuccess:e=>{c({childProps:{projectId:i,projectName:e.project_name,invitor:e.invitor_display_name,magicCodeId:o,done:()=>{k({token:o})},onReject:()=>{T({token:o})}}})},onError:e=>{(0,N.Eo)(e),t.push("/")}}),{mutate:k}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,E.SJ)().post("/projects/".concat(i,"/magic-codes/").concat(t,"/accept"))},onSuccess:()=>{(null==e?void 0:e.uid)&&(X(i,e.uid),q(i,e.uid,!0)),i&&n.invalidateQueries({queryKey:_.iZ.collaborators(i)});let s=new URLSearchParams(r.toString());s.delete(el),t.replace("".concat(a,"?").concat(s.toString())),v.Am.success("You've joined the project!")},onError:e=>{(0,N.Eo)(e)}}),[C,S]=(0,g.useState)(new Set),{mutate:T}=(0,x.D)({mutationFn:async e=>{let{token:t}=e;return(0,E.SJ)().post("/projects/".concat(i,"/magic-codes/").concat(t,"/reject"))},onSuccess:()=>{(null==e?void 0:e.uid)&&X(i,e.uid),o&&S(e=>new Set(e).add(o)),v.Am.info("Invitation declined",{description:"You've declined the invitation to the project"}),c(!1);let s=new URLSearchParams(r.toString());s.delete(el),t.replace("".concat(a,"?").concat(s.toString()))},onError:e=>{(0,N.Eo)(e)}}),R=!!(o&&!e);(0,g.useEffect)(()=>{if(e&&o&&!s){if(C.has(o)){let e=new URLSearchParams(r.toString());e.delete(el),t.replace("".concat(a,"?").concat(e.toString()));return}if(y){c(!1);let e=new URLSearchParams(r.toString());e.delete(el),t.replace("".concat(a,"?").concat(e.toString()));return}w({token:o})}},[e,w,s,o,y,r,t,C,a]),(0,g.useEffect)(()=>{if(R){if(o&&i){let e={projectId:i,magicLink:o,timestamp:Date.now(),projectUrl:a};sessionStorage.setItem(V.ls,JSON.stringify(e))}(0,v.Am)("Log in",{description:"You have to log in to join this project"}),t.push("/login?redirect=".concat(a))}},[t,R,o,i,a]);let I=!o||o&&C.has(o)||!!y,{setHasHandledCollaborationInvite:D}=(0,Y.d2)();return(0,g.useEffect)(()=>{D(I)},[I,D]),I};var en=a(70766),ei=a(77105),eo=a(56551),ec=a(6685),ed=a(84183),eu=a(4578),em=a(62970),ep=e=>{let{openSidebar:t}=e,a=(0,em.z)(e=>e.showHistory),{setShowHistory:s}=(0,em.VF)();return(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",className:(0,eu.cn)("bg-transparent hover:bg-transparent md:hover:bg-accent-primary/75 md:hover:text-accent-primary-foreground",a&&"bg-accent-primary text-accent-primary-foreground hover:bg-accent-primary md:hover:bg-accent-primary/75"),onClick:()=>{a||(S.ZP.capture(I.SL.TABS.HISTORY_OPENED),t()),s(e=>!e)},children:(0,p.jsx)(et.Z,{name:"history_2",size:"small"})})}),(0,p.jsx)(ed._v,{children:a?"Hide history":"View history"})]})},eh=a(2247),ex=a(10416),ef=a(82259),eg=a(52078),ev=a(62797),eb=a(34947),ej=a(87161),ey=a(32870),ew=a(59882),eN=a(76816),eE=a(53259),ek=a(26047),eC=a(63708),e_=a(17855),eS=a(6065),eT=a(14343),eR=a(35127);function eI(){let{project_id:e}=(0,f.useParams)(),[t,a]=(0,g.useState)(!1),s=(0,Y.iZ)(e=>e.project);if(!(0,eR.qT)())return null;let l=async()=>{if(!t)try{a(!0);let t=await eT.g.getValidToken(),l={};t&&(l.Authorization="Bearer ".concat(t));let r=(0,eS.t)(),n=await fetch("".concat(r,"/projects/").concat(e,"/download-zip"),{method:"GET",headers:l,credentials:"include"});if(!n.ok){let e=Error("Download failed: ".concat(n.status," ").concat(n.statusText));throw e.status=n.status,e}let i=await n.blob(),o=window.URL.createObjectURL(i),c=document.createElement("a");c.href=o;let d=n.headers.get("Content-Disposition"),u=null==d?void 0:d.match(/filename="(.+)"/),m=(null==s?void 0:s.name)||(null==s?void 0:s.github_repo_name),p=m?"".concat(m,".zip"):"project-".concat(e,".zip"),h=(null==u?void 0:u[1])||p;c.download=h,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(o)}catch(e){console.error("Error downloading project:",e),403===e.status?v.Am.error("You don't have permission to download this project."):v.Am.error(e.message||e.details||"Download failed. Please try again or contact support if this issue persists.")}finally{a(!1)}};return(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"secondary",size:"icon-sm",onClick:l,disabled:t,children:(0,p.jsx)(et.Z,{name:t?"refresh":"arrow_downward",size:"small",className:(0,eu.cn)(t&&"animate-spin")})})}),(0,p.jsx)(ed._v,{children:(0,p.jsx)("p",{children:"Download project as ZIP"})})]})}var eD=a(65276),eP=a(93946),ez=a(7287),eA=a(59253),eO=e=>{let{open:t,setOpen:a,projectId:s}=e,{authUser:l}=(0,b.Eu)(),r=(0,Y.iZ)(e=>e.project),n=(0,ek.v)(),{isEnabled:i,toggleStats:o}=(0,e_.V)(),{isEnabled:c,toggleReactScan:d}=(0,eC.u)(),{switchToView:u}=(0,eA.Z)(),{setIsOutOfCreditsDialogOpen:m}=(0,Z.SE)(),h=(0,ef.Q)(e=>e.setShowCreateWorkspaceDialog),{openSettings:x}=(0,eN.r)(),f=(0,W.z)(ex.g),v=(0,W.z)(eh.A),[j,y]=(0,g.useState)(!1),{setSelectedImageUrl:w}=(0,z.mx)(),{showErrorDialog:N}=(0,eD.t)(),E=(0,W.z)(ew.Z),k=(0,W.z)(ej.p),C=(0,W.z)(ey.i);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(eE.h_,{open:t,onOpenChange:a,children:[(0,p.jsx)(eE.$F,{asChild:!0,children:(0,p.jsx)("button",{className:"pointer-events-none absolute inset-x-0 select-none bg-transparent text-transparent"})}),(0,p.jsxs)(eE.AW,{className:"z-[1001] flex max-h-[80vh] min-w-[200px] max-w-[250px] flex-col gap-3 overflow-y-auto rounded-md border bg-background p-4",alignOffset:2,collisionPadding:8,sideOffset:18,children:[(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("h3",{className:"",children:"Advanced Settings"}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Developer & debug options."})]}),(0,p.jsx)(eb.Z,{iconName:"bolt",title:"Toggle Stats.js (".concat(i?"ON":"OFF",")"),onClick:o},"toggle-stats"),(0,p.jsx)(eb.Z,{iconName:"scan",title:"Toggle React Scan (".concat(c?"ON":"OFF",")"),onClick:d},"toggle-react-scan"),n&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eb.Z,{iconName:"person",title:"Impersonate User",externalHref:"/lovable-admin"},"impersonate-user"),(0,p.jsx)(eE.VD,{}),(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("h3",{className:"text-sm font-medium",children:"Dialog Triggers"}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:"Open any dialog for testing"})]}),(0,p.jsxs)(eE.Ph,{children:[(0,p.jsxs)(eE.kt,{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)(et.Z,{name:"visibility",size:"small"}),"Show Dialogs"]}),(0,p.jsx)(eE.TG,{className:"z-[1002] max-h-[70vh] min-w-[200px] max-w-[250px] overflow-y-auto p-2",sideOffset:8,children:(0,p.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,p.jsx)(eb.Z,{iconName:"warning",title:"Open Out of Credits Dialog",onClick:()=>m(!0)},"open-out-of-credits"),(0,p.jsx)(eb.Z,{iconName:"payments",title:"Open Subscriptions Dialog",onClick:()=>f({childProps:{}})},"open-subscriptions"),(0,p.jsx)(eb.Z,{iconName:"add",title:"Open Create Workspace Dialog",onClick:()=>h(!0)},"open-create-workspace"),(0,p.jsx)(eb.Z,{iconName:"featured_seasonal_and_gifts",title:"Open Referral Dialog",onClick:()=>v({childProps:{}})},"open-referral"),(0,p.jsx)(eb.Z,{iconName:"security",title:"Open Auth Dialog",onClick:()=>y(!0)},"open-auth"),(0,p.jsx)(eb.Z,{iconName:"settings",title:"Open Settings Dialog",onClick:()=>x()},"open-settings"),(0,p.jsx)(eb.Z,{iconName:"image",title:"Open Image Preview Dialog",onClick:()=>w("https://images.unsplash.com/photo-1636955779321-819753cd1741?w=800")},"open-image-preview"),(0,p.jsx)(eb.Z,{iconName:"error",title:"Open Error Alert Dialog",onClick:()=>N("This is a test error message for debugging purposes.",!0,"trace-id-12345")},"open-error-dialog"),(0,p.jsx)(eb.Z,{iconName:"delete",title:"Open Remove Confirm Dialog",onClick:()=>E({childProps:{title:"Remove Test Item",targetName:"Test User",descriptionTemplate:"Are you sure you want to remove {name}? This action cannot be undone.",onConfirm:async()=>{console.log("Remove confirmed"),E(!1)},onCancel:()=>E(!1)}})},"open-remove-confirm"),r&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eb.Z,{iconName:"delete",title:"Open Delete Project Dialog",onClick:()=>k({childProps:{project:{id:"test-project-id-do-not-delete",name:"Test Project",github_owner:{name:"test-user"},github_repo_name:"test-repo-name"},isOpen:!0,onClose:()=>k(!1)}})},"open-delete-project"),(0,p.jsx)(eb.Z,{iconName:"edit",title:"Open Rename Project Dialog",onClick:()=>C({childProps:{project:{id:"test-project-id-do-not-rename",name:"Test Project",github_owner:{name:"test-user"},github_repo_name:"test-repo-name"},isOpen:!0,onClose:()=>C(!1)}})},"open-rename-project")]})]})})]})]}),(n||!1)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eE.VD,{}),(0,p.jsx)(eb.Z,{externalHref:(0,eg.U1)(s),iconName:"language",title:"Firestore: Project"},"preview"),(null==r?void 0:r.user_id)&&(null==l?void 0:l.uid)!==(null==r?void 0:r.user_id)&&(0,p.jsx)(eb.Z,{externalHref:(0,eg.fA)(null==r?void 0:r.user_id),iconName:"language",title:"Firestore: User that created this project"},"firestore-user"),(null==l?void 0:l.uid)&&(0,p.jsx)(eb.Z,{externalHref:(0,eg.fA)(null==l?void 0:l.uid),iconName:"language",title:"Firestore: This user"},"firestore-current-user"),(null==r?void 0:r.workspace_id)&&(0,p.jsx)(eb.Z,{externalHref:(0,eg.Ny)(r.workspace_id),iconName:"language",title:"Firestore: Workspace"},"firestore-workspace")]}),!1,n&&(0,p.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)(eI,{}),(0,p.jsx)("p",{children:"Download Project as Zip"})]}),n&&(0,p.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,p.jsx)(Q.z,{variant:"secondary",size:"icon-sm",onClick:()=>u("debug"),children:(0,p.jsx)(et.Z,{name:"bug_report",size:"small"})}),(0,p.jsx)("p",{children:"Open Debug Console"})]})]})]}),(0,p.jsx)(ev.o,{open:j,onOpenChange:y})]})},eL=a(13592),eZ=a(97940),eM=a(33353),eF=a(35020),eU=a(69130),eK=a(33877),eV=a(52162),eW=a(88182),eB=a(45145);let eG=e=>{let{project:t}=e,a=null==t?void 0:t.visibility,s=(0,ez.f6)(e=>"live"===e.visibleMode),l=(0,ez.f6)(e=>"live"!==e.visibleMode&&("live"===e.activeMode||"starting"===e._sandboxState)),r=(0,en.VJ)(e=>e.activeEditId);return t?(0,p.jsx)("div",{className:"flex w-full min-w-0 flex-col items-start gap-0 truncate",children:(0,p.jsxs)(eV.M,{mode:"popLayout",initial:!1,children:[(0,p.jsxs)(eW.E.div,{className:"flex min-w-0 items-center gap-1 truncate",layout:"position",transition:{duration:.25,bounce:.1,type:"spring"},layoutDependency:s||r,children:[t&&t.name?(0,p.jsx)("p",{className:"hidden min-w-0 truncate text-sm font-medium leading-none md:block",children:null==t?void 0:t.name}):(0,p.jsx)(eB.O,{className:"hidden h-3 w-[150px] md:flex"}),"public"===a&&(0,p.jsx)(et.Z,{name:"globe",size:"xsmall",className:"hidden md:flex"}),"private"===a&&(0,p.jsx)(et.Z,{name:"lock",size:"xsmall",className:"hidden md:flex"}),(0,p.jsx)(et.Z,{size:"small",name:"keyboard_arrow_down",className:"text-foreground/50 group-data-[state=open]:text-primary"})]},"project-name"),!s&&!r&&(0,p.jsx)(eW.E.div,{layout:!0,transition:{duration:.3,bounce:0,type:"spring"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,p.jsx)(eV.M,{mode:"wait",initial:!1,children:(0,p.jsx)(eW.E.p,{className:"hidden w-full min-w-0 truncate text-left text-xs text-muted-foreground md:flex",initial:{y:5,opacity:0},animate:{y:0,opacity:t?1:0},exit:{y:-5,opacity:0},transition:{duration:.15,bounce:0,type:"spring"},children:l?"Loading Live Preview...":"Previewing last saved version"},l?"loading":"saved")})},"status")]})}):(0,p.jsxs)("div",{className:"hidden w-full min-w-0 flex-col items-start gap-1 md:flex",children:[(0,p.jsx)(eB.O,{className:"flex h-3 w-[150px]"}),(0,p.jsx)(eB.O,{className:"flex h-3 w-[125px]"})]})};var eH=e=>{let{}=e,{openSettings:t}=(0,eN.r)(),a=(0,Y.iZ)(e=>e.project),s=(0,eK.hO)(e=>e.projectWorkspace),l=(0,eK.hO)(e=>e.membership),{isMac:r}=(0,eU.Z)(),[n,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(!1),d=(0,ek.v)(),{canEdit:u}=(0,w.t)(),[m,h]=(0,g.useState)(!1);return(0,p.jsxs)("div",{id:"main-menu",className:"relative flex md:min-w-0 md:shrink",children:[(0,p.jsxs)(eE.h_,{children:[(0,p.jsx)(eE.$F,{asChild:!0,onPointerDown:e=>{e.altKey&&(e.preventDefault(),e.stopPropagation(),i(!0),S.ZP.capture(I.SL.HEADER.SETTINGS_OPENED,{project_id:null==a?void 0:a.id}))},children:(0,p.jsxs)("button",{className:"group flex items-center gap-2 border-none text-foreground outline-none duration-150 ease-in-out hover:opacity-80 focus:outline-none md:min-w-0 md:shrink",children:[(0,p.jsx)(ea.xx,{className:"h-[18px] w-[18px] shrink-0"}),a&&(0,p.jsx)(eG,{project:a})]})}),(0,p.jsxs)(eE.AW,{className:"min-w-[200px] border md:min-w-[275px]",align:"start",sideOffset:10,children:[(0,p.jsx)(eb.Z,{title:"Go to Dashboard",iconName:"chevron_left",internalHref:"/"},"dashboard"),s&&(0,p.jsx)(eE.VD,{}),s&&(0,p.jsxs)("div",{className:"flex flex-col gap-1.5 px-2 py-1.5",children:[(0,p.jsx)("p",{className:"text-xs font-medium text-muted-foreground",children:s.name}),(0,p.jsx)(eL.H,{workspace:s,membership:l})]}),(0,p.jsx)(eE.VD,{}),(0,p.jsx)(eZ.r,{}),u&&(0,p.jsx)(eE.VD,{}),u&&(0,p.jsxs)(eE.Xi,{onClick:()=>t("project"),children:[(0,p.jsx)(et.Z,{name:"settings"}),(0,p.jsx)("p",{children:"Settings"}),r?(0,p.jsx)(eE.KM,{className:"hidden sm:flex",children:"⌘."}):(0,p.jsx)(eE.KM,{className:"hidden sm:flex",children:"Ctrl."})]}),u&&(0,p.jsx)(eb.Z,{title:"Rename project",iconName:"edit_square",onClick:()=>h(!0)},"rename-project"),(0,p.jsx)(eE.VD,{}),(0,p.jsx)(eF.O,{}),(0,p.jsx)(eb.Z,{title:"Help",iconName:"help",externalHref:"/support"},"help")]})]}),a&&d&&(0,p.jsx)(eO,{open:n,setOpen:i,projectId:a.id}),(0,p.jsx)(eM.O,{projectId:null==a?void 0:a.id,projectName:null==a?void 0:a.name,currentWorkspaceId:null==a?void 0:a.workspace_id,open:o,setOpen:c,isRootDialog:!0}),a&&(0,p.jsx)(ey.i,{project:a,isOpen:m,onClose:()=>h(!1)})]})},eJ=a(44426),eq=a(77528),eX=g.memo(e=>{let{children:t,showScrollButtonsInitially:a=!1,className:s}=e,[l,r]=(0,g.useState)(!1),[n,i]=(0,g.useState)(a),[o,c]=(0,g.useState)(a),d=n||o,u=(0,g.useRef)(null),m=()=>{if(!u.current)return;let{scrollLeft:e,scrollWidth:t,clientWidth:a}=u.current;i(e>0),c(e<t-a)};return(0,g.useEffect)(()=>{r(!0),m()},[t]),(0,g.useEffect)(()=>(window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}),[]),(0,p.jsxs)("div",{className:(0,eu.cn)("relative flex max-w-full gap-1",s),children:[d&&(0,p.jsx)(Q.z,{variant:"ghost",size:"sm",className:(0,eu.cn)("absolute left-0 z-10 bg-background px-1 opacity-100 transition-opacity duration-200",{"!opacity-0":!l||!n,"pointer-events-none":!l||!n}),onClick:e=>{e.preventDefault(),u.current&&u.current.scrollTo({behavior:"smooth",left:u.current.scrollLeft-.8*u.current.clientWidth})},children:(0,p.jsx)(et.Z,{name:"chevron_left",size:"small"})}),(0,p.jsx)("div",{ref:u,onScroll:m,className:"w-full overflow-x-auto whitespace-nowrap scrollbar-hide md:overflow-visible",children:t}),d&&(0,p.jsx)(Q.z,{variant:"ghost",size:"sm",className:"px-1",disabled:!o,onClick:e=>{e.preventDefault(),u.current&&u.current.scrollTo({behavior:"smooth",left:u.current.scrollLeft+.8*u.current.clientWidth})},children:(0,p.jsx)(et.Z,{name:"chevron_right",size:"small"})})]})}),e$=a(92361);let eY=(0,g.memo)(e=>{let{isSidebarOpen:t,toggleSidebar:a}=e;return(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(Q.z,{size:"icon-sm",variant:"ghost",onClick:()=>{S.ZP.capture(I.SL.HEADER.SIDEBAR_TOGGLED),a()},className:(0,eu.cn)("hover:bg-muted-hover"),children:(0,p.jsx)(et.Z,{name:t?"dock_to_right-fill":"dock_to_right",size:"small"})})}),(0,p.jsx)(ed._v,{children:t?"Hide sidebar":"View sidebar"})]})});eY.displayName="SidebarToggle";var eQ=a(58093);let e0=e=>{let{className:t}=e,{setDevice:a}=(0,ez.My)(),s=(0,ez.f6)(e=>e.device),l=eQ.H[s];return(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(Q.z,{className:(0,eu.cn)(t),variant:"ghost",size:"icon-sm",onClick:()=>{switch(s){case"desktop":a("tablet");break;case"tablet":a("mobile");break;case"mobile":a("desktop")}S.ZP.capture(I.SL.PREVIEW.DEVICE_CHANGED)},children:(0,p.jsx)(et.Z,{name:l.icon,size:"small"})})}),(0,p.jsx)(ed._v,{side:"bottom",children:l.tooltip})]})};var e1=a(25393),e2=a(3011),e5=a(58915),e4=a(81922);let e3=()=>{let e=(0,z.IE)();return{pages:e?e.filter(e=>"*"!==e.path):null}};var e6=a(71919);let e8=()=>{let{pages:e}=e3(),t=(0,e4.u)(e=>e.setCurrentPage),a=(0,ez.My)().refreshPreview,s=(0,ez.f6)(e=>e.currentPath),l=(0,g.useRef)(null),[r,n]=(0,g.useState)(""),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(""),[u,m]=(0,g.useState)(!1),{closeVisualEditsPanel:h}=(0,e6.S9)(),x=()=>{o(!1),n(e7(s)),m(!1)},f=function(e){let{onClickOutside:t,enabled:a=!0}=e,s=(0,g.useRef)(null);return(0,g.useEffect)(()=>{if(!a)return;let e=e=>{s.current&&e.target&&!s.current.contains(e.target)&&t()},l=()=>{s.current&&t()};return document.addEventListener("mousedown",e),window.addEventListener("blur",l),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("blur",l)}},[t,a]),s}({onClickOutside:x,enabled:i});(0,g.useEffect)(()=>{t(s||"/")},[s,t]),(0,g.useEffect)(()=>{n(e7(s))},[s]);let v=e7(s),b=e=>{if(!e)return"/";let t=e.replace(/\s+/g,"");return t.startsWith("/")?t:"/".concat(t)},j=(0,g.useMemo)(()=>Array.from(new Set((e||[]).map(e=>e.path))).map(e=>({value:e,label:e})),[e]),y=e=>{e&&(a(e===s?void 0:e),t(e),h(),o(!1))},w=r===s,N=j.some(e=>e.value===r);return(0,p.jsx)("div",{className:"relative min-w-0 flex-1 flex-grow",children:(0,p.jsxs)(e5.J2,{open:i,onOpenChange:o,children:[(0,p.jsx)(e2.I,{ref:l,value:r,onFocus:()=>o(!0),className:"h-auto rounded-none border-none p-0 shadow-none focus-visible:outline-none focus-visible:ring-0",placeholder:v,onKeyDown:e=>{if("Enter"===e.key)e.preventDefault(),y(b(c||r.trim()||"/")),x(),e.target.blur();else if("Escape"===e.key)x(),e.target.blur();else if("ArrowDown"===e.key||"ArrowUp"===e.key){var t;if(e.preventDefault(),0===j.length)return;let a=(j.findIndex(e=>e.value===c)+("ArrowDown"===e.key?1:-1)+j.length)%j.length;d((null===(t=j[a])||void 0===t?void 0:t.value)||"")}},onChange:e=>{i||o(!0);let t=e.target.value;n(t);let a=t!==e7(s);!u&&a&&m(!0)}}),(0,p.jsx)(e5.xo,{className:"sr-only w-full"}),(0,p.jsx)(e5.yk,{className:(0,eu.cn)("bg-popover p-0",!i&&"hidden"),onOpenAutoFocus:e=>e.preventDefault(),ref:f,sideOffset:8,style:{width:"calc(var(--radix-popover-trigger-width) + 32px)"},align:"start",alignOffset:-12,children:(0,p.jsxs)(e1.mY,{value:c,onValueChange:d,children:[(0,p.jsx)("div",{tabIndex:-1,className:"pointer-events-none hidden",inert:!0,children:(0,p.jsx)(e1.sZ,{value:u?r:""})}),(0,p.jsx)(e1.e8,{children:j.length>0&&(0,p.jsxs)(e1.fu,{children:[!w&&!N&&""!==r&&(0,p.jsx)(e1.di,{value:r,onSelect:y,keywords:[r],className:"w-full overflow-hidden",children:(0,p.jsx)("span",{className:"min-w-0 max-w-full overflow-hidden pr-2",children:r})}),j.map(e=>{let t=s===e.value,a=e9(s,e.value);return(0,p.jsxs)(e1.di,{value:e.value,onSelect:y,keywords:[e.label],children:[e.label,(0,p.jsx)(et.Z,{name:"check",className:(0,eu.cn)("ml-auto",t||a?"opacity-100":"opacity-0")})]},e.value)})]})})]})})]})})};function e9(e,t){e.endsWith("/")&&(e=e.slice(0,-1)),t.endsWith("/")&&(t=t.slice(0,-1));let a=e.split("/"),s=t.split("/");if(a.length!==s.length)return!1;for(let e=0;e<a.length;e++){let t=a[e],l=s[e];if(t!==l&&!l.startsWith(":"))return!1}return!0}function e7(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new URL(e,"https://lovable.dev").pathname;return t&&"/"!==t?(t.endsWith("/")&&(t=t.slice(0,-1)),t):"/"}var te=a(17176);let tt=()=>{let e=(0,Y.iZ)(e=>e.project),t=(0,eK.hO)(e=>e.projectWorkspace),a=(null==t?void 0:t.disable_named_previews)?(0,te.t)({projectId:null==e?void 0:e.id}):(null==e?void 0:e.name)?(0,te.t)({projectName:null==e?void 0:e.name}):"#",s=!(null==e?void 0:e.preview_build_commit_sha),{buildFullPreviewUrl:l}=(0,ez.My)(),r=l({baseUrl:a,path:(0,ez.f6)(e=>e.currentPath)}),n=s?void 0:r;return{openPreview:e=>{if(s){e.preventDefault();return}e.altKey&&n&&(e.preventDefault(),window.open(n,"_blank"))},disabledState:s?{disabled:!0,reason:"There is no preview build to open yet"}:void 0,previewUrl:null!=n?n:void 0}},ta=e=>{let{openPreview:t,disabledState:a,previewUrl:s}=tt(),l=(0,y.Z)("md");return a?(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)("span",{children:(0,p.jsx)(Q.z,{disabled:a.disabled,...e,children:(0,p.jsx)(et.Z,{name:"arrow_outward",size:"small"})})})}),(0,p.jsx)(ed._v,{side:"bottom",align:"center",children:a.reason})]}):l?(0,p.jsx)(Q.z,{...e,asChild:!0,children:(0,p.jsx)("a",{href:s,target:"_blank",rel:"noreferrer",onClick:t,children:(0,p.jsx)(et.Z,{name:"arrow_outward"})})}):(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(Q.z,{...e,asChild:!0,children:(0,p.jsx)("a",{href:s,target:"_blank",rel:"noreferrer",onClick:t,children:(0,p.jsx)(et.Z,{name:"arrow_outward",size:"small"})})})}),(0,p.jsx)(ed._v,{side:"bottom",align:"center",children:"Open preview in new tab"})]})},ts=()=>{let{refreshPreview:e}=(0,ez.My)(),[t,a]=(0,g.useState)(!1);return(0,p.jsx)("div",{id:"preview-url-bar",className:"relative flex min-w-0 flex-1 flex-grow flex-row-reverse items-center gap-2 md:flex-auto md:flex-row",children:(0,p.jsxs)("div",{className:"relative flex h-8 min-w-[150px] flex-grow items-center justify-between gap-2 rounded-lg border border-input px-1 text-sm @xl:min-w-[250px]",children:[(0,p.jsx)(e0,{className:"hidden h-6 w-6 p-1 hover:bg-muted md:flex"}),(0,p.jsx)("div",{className:"flex-grow",children:(0,p.jsx)(e8,{})}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(ta,{variant:"ghost",size:"icon-xs",className:"h-6 w-6 p-1 hover:bg-muted"}),(0,p.jsx)(eP.Z,{label:"Refresh page",children:(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-xs",className:"h-6 w-6 p-1 hover:bg-muted",onClick:()=>{a(!0),e(),setTimeout(()=>{a(!1)},1e3)},disabled:t,children:(0,p.jsx)(et.Z,{name:"refresh",size:"small",className:t?"animate-spin":""})})})]})]})})};var tl=a(99861),tr=a(68820),tn=a(77467),ti=a(38109),to=a(35046),tc=a(25938),td=a(93846),tu=a(98260),tm=a(6486),tp=a(30930),th=a(38466),tx=a(43730),tf=a(11836),tg=a(21691);let tv=tf.Py.define(),tb=tf.QQ.define({create:()=>null,update(e,t){for(let e of t.effects)if(e.is(tv))return e.value;return e}}),tj=tg.p.line({attributes:{style:"background-color: rgba(255, 255, 0, 0.2); border-left: 3px solid #ffcc00;"}}),ty=tg.lg.fromClass(class{update(e){e.state.field(tb)!==e.startState.field(tb)&&(this.decorations=this.buildDecorations(e.view))}buildDecorations(e){let t=e.state.field(tb);if(null===t)return tg.p.none;let{startLine:a,endLine:s}=t,l=[];if(a===s){let t=e.state.doc.line(Math.min(a,e.state.doc.lines));l.push({from:t.from,to:t.from,value:tj})}else for(let t=a;t<=s&&!(t>e.state.doc.lines);t++){let a=e.state.doc.line(t);l.push({from:a.from,to:a.from,value:tj})}return tg.p.set(l)}constructor(e){this.decorations=this.buildDecorations(e)}},{decorations:e=>e.decorations}),tw=[tb,ty],tN=(e,t,a)=>{let s=a||t,l=Math.floor((t+s)/2),r=e.state.doc.line(Math.min(l,e.state.doc.lines)),n=e.state.doc.line(Math.min(t,e.state.doc.lines));e.dispatch({effects:[tv.of({startLine:t,endLine:s}),tg.tk.scrollIntoView(r.from,{y:"center"})],selection:{anchor:n.from}})},tE=(0,tx.P0)({settings:{background:"hsl(var(--background))",gutterBackground:"hsl(var(--muted))",fontFamily:"var(--font-roboto-mono)",selection:"#2d333b",caret:"#c9d1d9",foreground:"#c9d1d9",gutterActiveForeground:"#c9d1d9",gutterForeground:"#6e7681",gutterBorder:"#21262d",lineHighlight:"#c9d1d910",selectionMatch:"#3392FF44"},styles:[{tag:th.pJ.comment,color:"#8b949e"},{tag:th.pJ.variableName,color:"#c9d1d9"},{tag:[th.pJ.string,th.pJ.special(th.pJ.brace)],color:"#a5d6ff"},{tag:th.pJ.number,color:"#79c0ff"},{tag:th.pJ.bool,color:"#ff7b72"},{tag:th.pJ.null,color:"#ff7b72"},{tag:th.pJ.keyword,color:"oklch(0.833 0.145 321.434)"},{tag:th.pJ.operator,color:"#ff7b72"},{tag:th.pJ.className,color:"#ffa657"},{tag:th.pJ.definition(th.pJ.typeName),color:"#ffa657"},{tag:th.pJ.typeName,color:"#ffa657"},{tag:th.pJ.angleBracket,color:"#7ee787"},{tag:th.pJ.tagName,color:"#7ee787"},{tag:th.pJ.attributeName,color:"#79c0ff"},{tag:th.pJ.function(th.pJ.variableName),color:"#d2a8ff"},{tag:th.pJ.function(th.pJ.propertyName),color:"#d2a8ff"},{tag:th.pJ.squareBracket,color:"#c9d1d9"},{tag:th.pJ.brace,color:"#c9d1d9"}]}),tk=(0,tx.P0)({settings:{background:"hsl(var(--background))",gutterBackground:"hsl(var(--muted))",fontFamily:"var(--font-roboto-mono)",selection:"#C7E4FF",caret:"#24292e",foreground:"#24292e",gutterActiveForeground:"#24292e",gutterForeground:"#57606a",gutterBorder:"#e8eaed",lineHighlight:"#2437921a",selectionMatch:"#3392FF33"},styles:[{tag:th.pJ.comment,color:"#6e7781"},{tag:th.pJ.variableName,color:"#24292e"},{tag:[th.pJ.string,th.pJ.special(th.pJ.brace)],color:"#0a3069"},{tag:th.pJ.number,color:"#0550ae"},{tag:th.pJ.bool,color:"#cf222e"},{tag:th.pJ.null,color:"#cf222e"},{tag:th.pJ.keyword,color:"#3479E5"},{tag:th.pJ.operator,color:"#cf222e"},{tag:th.pJ.className,color:"#953800"},{tag:th.pJ.definition(th.pJ.typeName),color:"#953800"},{tag:th.pJ.typeName,color:"#953800"},{tag:th.pJ.angleBracket,color:"#116329"},{tag:th.pJ.tagName,color:"#116329"},{tag:th.pJ.attributeName,color:"#0550ae"},{tag:th.pJ.function(th.pJ.variableName),color:"#8250df"},{tag:th.pJ.function(th.pJ.propertyName),color:"#8250df"},{tag:th.pJ.squareBracket,color:"#24292e"},{tag:th.pJ.brace,color:"#24292e"},{tag:[th.pJ.name,th.pJ.deleted,th.pJ.character,th.pJ.propertyName,th.pJ.macroName],color:"#0E7490"},{tag:[th.pJ.meta],color:"#0E7490"},{tag:[th.pJ.definition(th.pJ.name),th.pJ.separator],color:"#a3be8c"},{tag:[th.pJ.operator,th.pJ.operatorKeyword],color:"#15803D"},{tag:[th.pJ.string],color:"#15803D"},{tag:th.pJ.link,color:"#15803D",textDecoration:"underline",textUnderlinePosition:"under"}]}),tC=[(0,tp.eJ)({jsx:!0,typescript:!0}),(0,tm.dy)({autoCloseTags:!0}),tw];var t_=a(75961),tS=a.n(t_),tT=a(57480);function tR(e){var t;let{node:a,setCurrentFile:s,currentFile:l,level:r}=e,[n,i]=(0,g.useState)(r<1),{store:o}=(0,k.WR)(),c=o(e=>e.setMessage),d=o(e=>e.message),u=null===(t=a.children)||void 0===t?void 0:t.sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name));return(0,p.jsxs)("div",{children:[(0,p.jsxs)("div",{className:(0,eu.cn)("group flex cursor-pointer items-center px-2 py-1 text-sm hover:bg-primary/25",l===a.path&&"!bg-accent/50"),onClick:()=>{"directory"===a.type?i(!n):s(a.path)},role:"button",tabIndex:0,children:[(0,p.jsx)("div",{className:"mr-1 flex-shrink-0",style:{marginLeft:16*r},children:"directory"===a.type?(0,p.jsx)(et.Z,{name:"chevron_right",size:"default",className:(0,eu.cn)("transition-transform duration-200",{"rotate-90":n})}):null}),"directory"!==a.type&&(0,p.jsx)("div",{className:"mr-1 h-4 w-4 flex-shrink-0",children:(0,p.jsx)(et.Z,{name:"docs",size:"small"})}),(0,p.jsx)("span",{className:"flex-1 truncate",children:a.name}),(0,p.jsx)(Q.z,{variant:"ghost",size:"icon",className:"ml-auto h-6 w-6 opacity-0 transition-opacity group-hover:opacity-100",onClick:e=>{e.stopPropagation(),c(d?"".concat(d," ").concat(a.path):a.path)},title:"Reference ".concat(a.type," in chat"),children:(0,p.jsx)(et.Z,{name:"chat_paste_go",size:"xsmall"})})]}),"directory"===a.type&&n&&u&&(0,p.jsx)("div",{children:u.map(e=>(0,p.jsx)(tR,{node:e,setCurrentFile:s,currentFile:l,level:r+1},e.path))})]})}function tI(e){let{setCurrentFile:t,code:a,currentFile:s}=e,l=(function(e){let t=[];return e.forEach(e=>{let[a]=e,s=a.split("/"),l=t;s.forEach((e,t)=>{let a=t===s.length-1,r=l.find(t=>t.name===e),n=s.slice(0,t+1).join("/");if(r)a||(l=r.children);else{let t={name:e,path:n,type:a?"file":"directory",...a?{}:{children:[]}};l.push(t),a||(l=t.children)}})}),t})(a).sort((e,t)=>"directory"===e.type&&"directory"!==t.type?-1:"directory"!==e.type&&"directory"===t.type?1:e.name.localeCompare(t.name));return(0,p.jsx)("div",{className:"overflow-x-auto p-2",children:l.map(e=>(0,p.jsx)(tR,{node:e,setCurrentFile:t,currentFile:s,level:0},e.path))})}var tD=a(47149);let tP=["package-lock.json","yarn.lock","pnpm-lock.yaml",".map",".min.js",".min.css","tailwind.config.lov.json","bun.lockb"];function tz(e){let{code:t,onSelectResult:a}=e,s=(0,to.A7)(e=>e.searchQuery),l=(0,to.A7)(e=>e.setSearchQuery),r=(0,to.A7)(e=>e.expandedSearchFiles),n=(0,to.A7)(e=>e.setExpandedSearchFiles),i=(0,tD.N)(s,300),o=(0,g.useMemo)(()=>{if(!i||i.length<2)return[];let e=[],a=i.toLowerCase(),s=0;for(let[l,r]of t){if("string"!=typeof r||tP.some(e=>l.includes(e))||r.length>1048576)continue;if(s>=500)break;let t=r.split("\n"),n=[];for(let e=0;e<t.length;e++){let l=t[e],r=l.toLowerCase(),o=0;for(;o<r.length&&n.length<50;){let t=r.indexOf(a,o);if(-1===t)break;let c=Math.max(0,t-40),d=Math.min(l.length,t+i.length+40),u=l.substring(c,d),m=u.trim(),p=u.indexOf(m);n.push({line:e+1,column:t+1,lineContent:m,matchStart:t-c-p,matchEnd:t-c+i.length-p}),s++,o=t+i.length}}n.length>0&&e.push({path:l,matches:n})}return e},[t,i]);(0,g.useEffect)(()=>{o.length>0&&o.length<=5&&n(new Set(o.map(e=>e.path)))},[o,n]);let c=(0,g.useCallback)(e=>{let t=new Set(r);t.has(e)?t.delete(e):t.add(e),n(t)},[r,n]),d=o.reduce((e,t)=>e+t.matches.length,0);return(0,p.jsxs)("div",{className:"flex h-full flex-col",children:[(0,p.jsxs)("div",{className:"p-2",children:[(0,p.jsx)(e2.I,{placeholder:"Search in files...",value:s,onChange:e=>l(e.target.value),className:"h-9",autoFocus:!0}),s&&i&&(0,p.jsxs)("div",{className:"mt-2 px-2 text-xs text-muted-foreground",children:[d," result",1!==d?"s":""," in"," ",o.length," file",1!==o.length?"s":"",d>=500&&" (limited)"]})]}),(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto",children:[s!==i&&s.length>=2&&(0,p.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Searching..."}),0===o.length&&i.length>=2&&s===i&&(0,p.jsxs)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:['No results found for "',i,'"']}),o.map(e=>{let t=r.has(e.path);return(0,p.jsxs)("div",{className:"border-b",children:[(0,p.jsxs)("button",{className:"flex w-full items-center gap-1 px-3 py-2 text-left hover:bg-accent",onClick:()=>c(e.path),children:[(0,p.jsx)(et.Z,{name:"chevron_right",size:"small",className:(0,eu.cn)("transition-transform duration-100 ease-in-out",t&&"rotate-90")}),(0,p.jsx)("span",{className:"flex-1 truncate text-sm font-medium",children:e.path}),(0,p.jsx)("span",{className:"text-xs text-muted-foreground",children:e.matches.length})]}),t&&(0,p.jsx)("div",{className:"pb-1",children:e.matches.map((t,s)=>(0,p.jsxs)("button",{className:"flex w-full items-start gap-2 px-6 py-1 text-left hover:bg-accent",onClick:()=>a(e.path,t.line),children:[(0,p.jsx)("span",{className:"min-w-[3ch] text-right text-xs text-muted-foreground",children:t.line}),(0,p.jsx)("span",{className:"flex-1 truncate font-mono text-xs",children:(0,p.jsx)(tA,{text:t.lineContent,start:t.matchStart,end:t.matchEnd})})]},"".concat(t.line,"-").concat(t.column,"-").concat(s)))})]},e.path)})]})]})}function tA(e){let{text:t,start:a,end:s}=e,l=t.substring(0,a),r=t.substring(a,s),n=t.substring(s);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:l}),(0,p.jsx)("span",{className:"bg-yellow-300 dark:bg-yellow-700",children:r}),(0,p.jsx)("span",{children:n})]})}var tO=a(44647);function tL(){let e=(0,eK.hO)(e=>{var t;return null===(t=e.projectWorkspace)||void 0===t?void 0:t.plan});return(0,tO.XB)(e)}let tZ=e=>{let{editorViewRef:t,targetFileAndLineRange:a,currentFile:s}=e,l=(0,g.useRef)(null),r=(0,g.useCallback)(()=>{if(!t.current||!l.current)return;let e=t.current,a=l.current;e.state.doc.lines>0&&a.startLine<=e.state.doc.lines&&(tN(e,a.startLine,a.endLine),l.current=null)},[t]);return(0,g.useEffect)(()=>{if(!a||a.filePath!==s){l.current=null;return}l.current=a,t.current&&r()},[a,s,r,t]),{performHighlight:r}};function tM(e){let{}=e,[t,a]=(0,g.useState)(!1),s=(0,B.D)(),{syncCode:l,hasUnsavedChanges:r,enableServer:n}=(0,tu.v)(),i=(0,to.A7)(e=>e.clearPendingChanges),{snapshot:o}=(0,to.ag)(),{exitView:c}=(0,eA.Z)(),{setBlocker:d,clearBlocker:u}=(0,ei.sV)(),{openSettings:m}=(0,eN.r)(),h=(0,g.useRef)(r);(0,g.useEffect)(()=>{h.current!==r&&(r?d({title:"You have unsaved changes",description:"Are you sure you want to exit the code editor? You'll lose your unsaved changes.",onConfirm:()=>{i()}}):u()),h.current=r},[r,d,u,i]);let x=tL(),f=(0,g.useCallback)(async()=>{a(!0);try{let e=o.getPendingChanges();S.ZP.capture(I.SL.CODE_EDITOR.SAVED,{projectId:s,editedFiles:e}),await l(e,{commitMessage:"Code edited in Lovable Code Editor"}),i(),v.Am.success("Changes saved"),c()}finally{a(!1)}n()},[i,n,s,c,o,l]),b=(0,g.useCallback)(()=>{S.ZP.capture(I.SL.CODE_EDITOR.DISCARDED,{projectId:s}),i()},[i,s]);return x?(0,p.jsx)(eV.M,{children:r&&(0,p.jsxs)(eW.E.div,{initial:{y:"150%"},animate:{y:0},exit:{y:"150%"},transition:{type:"spring",duration:.15,bounce:.25},className:"flex w-full items-center justify-end gap-2",children:[(0,p.jsx)("div",{className:"text-sm text-foreground",children:"You have unsaved changes"}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(Q.z,{variant:"secondary",size:"sm",onClick:b,disabled:t,children:"Discard"}),(0,p.jsx)(Q.z,{variant:"affirmative",size:"sm",onClick:f,loading:t,disabled:t,children:"Save"})]})]})}):(0,p.jsxs)("div",{className:"flex items-center gap-1 text-center text-sm text-muted-foreground",children:[(0,p.jsx)("span",{children:"Read Only. To use the code editor, "}),(0,p.jsx)("span",{className:"cursor-pointer font-medium text-affirmative-primary hover:text-affirmative-primary/80",onClick:()=>m("billing"),children:"upgrade to a paid plan."})]})}let tF={history:tl.cE},tU=["tailwind.config.lov.json","package-lock.json","bun.lockb","vite-env.d.ts"],tK=(e,t)=>e.filter(e=>{let[a]=e;return!tU.some(e=>a.includes(e))&&(!t||a.toLowerCase().includes(t.toLowerCase()))}),tV=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=(0,z.aK)(e=>Object.keys(e.edits||{}).length),{data:s,isFetching:l,refetch:r}=(0,tr.a)(td.W.sourceCode({projectId:e,enabled:t}));return(0,g.useEffect)(()=>{a>0&&!l&&r().catch(t=>{R.logging.error("Error refetching source code",{error:t,projectId:e})})},[a,r]),(0,g.useMemo)(()=>{var e;return null==s?void 0:null===(e=s.files)||void 0===e?void 0:e.filter(e=>{let{binary:t}=e;return!t}).map(e=>{let{name:t,contents:a}=e;return[t,a]})},[s])};function tW(e){let{projectId:t}=e,{code:a,hasInitialCode:s,addPendingChange:l}=(0,tu.v)(),{currentFile:r,setCurrentFile:n,states:i,setStates:o,openTabs:c,setOpenTabs:d,targetFileAndLineRange:u}=(0,tT.r)(),m=(0,to.A7)(e=>e.pendingChanges),h=(0,g.useRef)(null),x=tV(t,!s),f=(0,g.useMemo)(()=>s?a:x,[x,s,a]),v=null==f?void 0:f.length;(0,g.useEffect)(()=>{if(!u||!(null==f?void 0:f.length))return;let e=f.find(e=>{let[t]=e;return t===u.filePath});e&&n(e[0])},[u,f,n]),(0,g.useEffect)(()=>{if(r||!v||u)return;let e=null==f?void 0:f.find(e=>{let[t,a]=e;return t.endsWith("pages/Index.tsx")});e&&n(e[0])},[v,r,u,f,n]);let{performHighlight:b}=tZ({editorViewRef:h,targetFileAndLineRange:u,currentFile:r}),j=tL(),y=(0,g.useMemo)(()=>{var e;if(r)return r in m?m[r]:null==f?void 0:null===(e=f.find(e=>{let[t,a]=e;return t===r}))||void 0===e?void 0:e[1]},[f,r,m]),[w,N]=(0,g.useState)(""),E=(0,to.A7)(e=>e.sidebarTab),k=(0,to.A7)(e=>e.setSidebarTab),[C,_]=(0,g.useState)(null),[S,T]=(0,g.useState)(null),R=(0,g.useMemo)(()=>tK(null!=f?f:[],w),[f,w]),{startLiveMode:I}=(0,ez.My)();(0,g.useEffect)(()=>{r&&!c.includes(r)&&d([...c,r])},[r,c,d]);let D=(0,g.useCallback)((e,t)=>{e&&(l({path:e,content:t}),I())},[l,I]),P=(0,g.useCallback)((e,t)=>{n(e),_(t)},[n]);(0,g.useEffect)(()=>{if(S&&null!==C&&r){let e=()=>{let e=S.state.doc;if(e.length>0){let t=e.line(Math.min(C,e.lines));return S.dispatch({scrollIntoView:!0,selection:{anchor:t.from}}),_(null),!0}return!1};if(e())return;let t=0,a=setInterval(()=>{t++,(e()||t>=10)&&clearInterval(a)},100);return()=>clearInterval(a)}},[S,C,r]),(0,g.useEffect)(()=>{let e=e=>{(e.metaKey||e.ctrlKey)&&e.shiftKey&&"f"===e.key&&(e.preventDefault(),k("search"))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);let{resolvedTheme:z}=(0,ti.F)(),A=(0,eR.qT)();return(0,p.jsxs)("div",{className:"relative flex h-full w-full",children:[(0,p.jsxs)("div",{className:"relative flex h-full w-64 flex-shrink-0 flex-grow-0 flex-col border-r border-border",children:[(0,p.jsxs)(tc.mQ,{value:E,onValueChange:e=>{("files"===e||"search"===e)&&k(e)},className:"flex h-full flex-col",children:[(0,p.jsxs)(tc.dr,{className:"m-2 grid w-[calc(100%-1rem)] grid-cols-2",children:[(0,p.jsxs)(tc.SP,{value:"files",className:"gap-1",children:[(0,p.jsx)(et.Z,{name:"document_search",size:"small"}),"Files"]}),(0,p.jsxs)(tc.SP,{value:"search",className:"gap-1",children:[(0,p.jsx)(et.Z,{name:"search",size:"small"}),"Search"]})]}),(0,p.jsxs)(tc.nU,{value:"files",className:"mt-0 flex-1 overflow-y-auto pb-12",children:[(0,p.jsx)("div",{className:"p-2",children:(0,p.jsx)(e2.I,{placeholder:"Search files",value:w,onChange:e=>N(e.target.value)})}),v?(0,p.jsx)(tI,{setCurrentFile:n,currentFile:r,code:R}):(0,p.jsx)("div",{className:"flex items-center justify-center pb-16",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Starting Live Preview..."})})]}),(0,p.jsx)(tc.nU,{value:"search",className:"mt-0 flex-1 overflow-y-auto",children:(0,p.jsx)(tz,{code:null!=f?f:[],onSelectResult:P})})]}),A&&(0,p.jsxs)("div",{className:"absolute bottom-0 flex min-h-12 w-full flex-shrink-0 items-center gap-2 border-t border-border bg-background p-2",children:[(0,p.jsx)(eI,{}),(0,p.jsx)("span",{className:"text-sm text-muted-foreground",children:"Download codebase"})]})]}),(0,p.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden bg-muted p-0",children:[(0,p.jsx)(tc.mQ,{value:r||"",onValueChange:n,className:(0,eu.cn)({hidden:!r}),children:(0,p.jsx)(tc.dr,{className:"h-auto w-full justify-start overflow-x-auto rounded-none bg-background p-0 scrollbar-hide",children:c.map(e=>(0,p.jsxs)(tc.SP,{value:e,className:"group relative rounded-none border-r px-2 pl-3 data-[state=active]:!bg-muted-active data-[state=active]:text-foreground hover:bg-muted/50","data-state":r===e?"active":"inactive",children:[(0,p.jsx)("span",{children:e}),(0,p.jsx)("button",{onClick:t=>{t.stopPropagation(),t.preventDefault(),d(c.filter(t=>t!==e)),r===e&&n(c.find(t=>t!==e)||null)},className:"ml-2 opacity-0 transition-opacity group-hover:opacity-100 group-data-[state=active]:opacity-100",children:(0,p.jsx)(et.Z,{name:"close",className:"size-4"})})]},e))})}),(0,p.jsx)("div",{className:(0,eu.cn)("flex w-full flex-1 overflow-y-auto bg-muted",tS().editor),children:r&&(0,p.jsx)(tn.ZP,{readOnly:!j,initialState:i[r]?{json:i[r],fields:tF}:void 0,onChange:(e,t)=>{if(r){let e=t.state.toJSON(tF);o(t=>({...t,[r]:e}))}D(r,e)},onCreateEditor:e=>{T(e),h.current=e;let t=()=>{e.state.doc.lines>0?b():requestAnimationFrame(t)};t()},value:y,className:"flex-1 overflow-y-auto",theme:"dark"===z?tE:tk,extensions:[...tC,tn.tk.editable.of(!!j)]},r)})]})]})}let tB=()=>{let{activeView:e}=(0,eA.Z)();return"codeEditor"===e?(0,p.jsx)(tM,{}):(0,p.jsx)(ts,{})};var tG=()=>{let{activeView:e,toggleView:t}=(0,eA.Z)(),{hasUnsavedChanges:a}=(0,tu.v)(),s=tL()?"Code mode":"Code viewer",l=(0,e6.UC)(e=>e.isVisualEditingActive),r="codeEditor"===e,n=a&&r||l&&!r;return(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{className:n?"cursor-default":"cursor-pointer",asChild:!0,children:(0,p.jsx)(Q.z,{type:"button",variant:"outline",size:"icon-sm",onClick:()=>{t("codeEditor"),S.ZP.capture(I.SL.CODE_EDITOR.DEV_MODE_TOGGLE_PRESSED,{devModeIsActive:r,new_tab:r?"code":"preview"})},"aria-label":s,disabled:n,className:(0,eu.cn)("hidden bg-background shadow-none md:flex",{"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/90":r}),children:(0,p.jsx)(et.Z,{name:"code",className:"h-4 w-4"})})}),(0,p.jsx)(ed._v,{children:l&&!r?"Exit visual editor to use code mode":a&&r?"Please save or discard your changes":s})]})};let tH=()=>(0,p.jsx)("div",{className:"flex items-center gap-1",children:(0,p.jsx)(tG,{})});var tJ=a(13350),tq=a(83250),tX=a(68746),t$=a(71131),tY=a(37298),tQ=a(56852);let t0=[{icon:"database",title:"All-in-one backend",description:"Built-in auth, database, and edge functions."},{icon:"account_circle",title:"No Supabase needed",description:"Everything runs inside Lovable."},{icon:"settings",title:"Easy setup",description:"Enable in Labs, then select Lovable backend."}],t1=()=>(0,p.jsxs)(e5.yk,{className:"flex w-[640px] max-w-[95vw] gap-4",side:"bottom",align:"end",sideOffset:6,alignOffset:-10,children:[(0,p.jsx)(e5.xp,{className:"absolute right-4 top-4 z-10",asChild:!0,children:(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",className:"hover:bg-transparent hover:opacity-75 focus-visible:ring-0",children:(0,p.jsx)(et.Z,{name:"close",size:"small"})})}),(0,p.jsx)("div",{className:"relative hidden w-2/5 md:flex",children:(0,p.jsx)(tY.default,{src:"/img/announcements/agent-release.png",alt:"Lovable Backend",fill:!0,className:"w-full rounded-lg object-cover"})}),(0,p.jsxs)("div",{className:"flex w-3/5 min-w-0 flex-col gap-4 py-2",children:[(0,p.jsxs)("div",{className:"flex min-w-0 flex-col",children:[(0,p.jsx)("p",{className:"text-2xl font-medium text-card-foreground",children:"Lovable Backend"}),(0,p.jsx)("p",{className:"whitespace-normal break-words text-base leading-tight text-muted-foreground",children:"Lovable now supports full-stack development — no setup, no external accounts. Here is what's new:"})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[t0.map(e=>(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)("div",{className:"mt-0.5 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-secondary",children:(0,p.jsx)(et.Z,{name:e.icon,size:"small",className:"text-secondary-foreground"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h4",{className:"text-sm font-medium leading-tight text-card-foreground",children:e.title}),(0,p.jsx)("p",{className:"text-sm leading-tight text-muted-foreground",children:e.description})]})]},e.title)),(0,p.jsxs)("div",{className:"flex items-start gap-3",children:[(0,p.jsx)("div",{className:"mt-0.5 h-8 w-8 flex-shrink-0"}),(0,p.jsx)("div",{children:(0,p.jsx)("p",{className:"text-sm leading-tight text-muted-foreground",children:(0,p.jsxs)(tQ.default,{href:"https://docs.lovable.dev/features/backend",className:"flex items-center gap-1 hover:underline",target:"_blank",children:["Read more ",(0,p.jsx)(et.Z,{name:"arrow_outward",size:"small"})]})})})]})]})]})]}),t2=e=>{let{title:t,description:a,badge:s}=e;return(0,p.jsxs)("div",{className:"flex flex-col gap-1 p-4 pb-2",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,p.jsx)("h3",{className:"mt-0 leading-none",children:t}),s]}),a&&(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:a})]})},t5=e=>{let{href:t}=e;return(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",asChild:!0,children:(0,p.jsx)("a",{href:t,target:"_blank",className:"text-muted-foreground",children:(0,p.jsx)(et.Z,{name:"help",size:"small"})})})},t4=e=>[{name:"Manage Users",href:"https://supabase.com/dashboard/project/".concat(e,"/auth/users"),icon:"group"},{name:"SQL Editor",href:"https://supabase.com/dashboard/project/".concat(e,"/editor"),icon:"database"},{name:"Edge Functions",href:"https://supabase.com/dashboard/project/".concat(e,"/functions"),icon:"cloud"},{name:"Manage Secrets",href:"https://supabase.com/dashboard/project/".concat(e,"/settings/functions"),icon:"key"}];var t3=e=>{var t;let{disabled:a=!1}=e,[s,l]=(0,g.useState)(!1),[r,n]=(0,g.useState)(!1),{openSettings:i}=(0,eN.r)(),o=(0,t$.N)(),c=t4(null!==(t=null==o?void 0:o.id)&&void 0!==t?t:""),d=(0,Y.iZ)(e=>e.project),u=(0,tJ.Iu)(d),{supabaseIntegrationData:m}=(0,tJ.v7)(null==d?void 0:d.id),h=null==m?void 0:m.is_managed_by_lovable;return((0,g.useEffect)(()=>{try{let e=localStorage.getItem("lovable-backend-features-shown");u&&!e&&(n(!0),localStorage.setItem("lovable-backend-features-shown","true"))}catch(e){R.logging.error("Failed to access localStorage:",{error:e})}},[u]),u)?(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(t6,{disabled:a,isLovableBackend:u,onClick:()=>{i("supabase"),l(!1),n(!1)}}),(0,p.jsxs)(e5.J2,{open:r,onOpenChange:n,children:[(0,p.jsx)(e5.xo,{asChild:!0,children:(0,p.jsx)("div",{className:(0,eu.cn)("pointer-events-none absolute inset-0 rounded-md",r&&"border border-affirmative-primary bg-affirmative-primary/10")})}),(0,p.jsx)(t1,{})]})]}):(0,p.jsxs)(eE.h_,{open:s,onOpenChange:l,children:[(0,p.jsx)(eE.$F,{disabled:a,children:(0,p.jsx)(t6,{disabled:a,isLovableBackend:u})}),(0,p.jsx)(eE.AW,{collisionPadding:8,className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0",children:o?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t2,{title:"Supabase",badge:(0,p.jsx)(tX.n,{status:o.status})}),(0,p.jsx)(eE.VD,{}),(0,p.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:(0,p.jsx)(eE.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:"https://supabase.com/dashboard/project/".concat(o.id),target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(ea.xR.Supabase,{className:"h-4 w-4"}),(0,p.jsx)("span",{children:o.name}),(0,p.jsx)(et.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(eE.VD,{}),(0,p.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:c.map(e=>(0,p.jsx)(eE.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:e.href,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(et.Z,{name:e.icon,className:"h-4 w-4"}),(0,p.jsx)("span",{children:e.name}),(0,p.jsx)(et.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})},e.name))}),(0,p.jsx)(eE.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(t5,{href:"https://docs.lovable.dev/integrations/supabase"}),(0,p.jsx)(Q.z,{variant:"default",size:"sm",onClick:()=>{i("supabase"),l(!1)},children:"Configure"})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t2,{title:h?"Backend":"Supabase",description:"Integrate user authentication, data storage, and backend capabilities."}),(0,p.jsx)(eE.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(t5,{href:"https://docs.lovable.dev/integrations/supabase"}),(0,p.jsxs)(Q.z,{onClick:()=>{i("supabase"),l(!1)},size:"sm",children:[(0,p.jsx)(ea.xR.Supabase,{className:"h-4 w-4"}),"Connect Supabase"]})]})]})})]})};let t6=e=>{let{onClick:t,disabled:a=!1,isLovableBackend:s=!1}=e;return(0,p.jsx)(eP.Z,{label:s?"Manage Backend":"Manage Supabase",children:(0,p.jsx)(Q.z,{id:"supabase-dropdown",className:"",variant:"secondary",size:"icon-sm",onClick:t,disabled:a,children:s?(0,p.jsx)(et.Z,{name:"database",className:"h-4 w-4"}):(0,p.jsx)(tq.Z,{className:"h-4 w-auto",viewBox:"0 0 109 113"})})})};var t8=(0,g.memo)(e=>{let{disabled:t=!1}=e,{openSettings:a}=(0,eN.r)(),s=(0,Y.iZ)(e=>e.project),{supabaseIntegrationData:l}=(0,tJ.v7)(null==s?void 0:s.id),r=(0,eR.fs)();return(null==l?void 0:l.is_managed_by_lovable)||r?(0,p.jsx)(eP.Z,{label:"Manage Backend",children:(0,p.jsx)(Q.z,{id:"backend-dropdown",className:"",variant:"secondary",size:"icon-sm",onClick:()=>a("supabase"),disabled:t,children:(0,p.jsx)(et.Z,{name:"database",className:"h-4 w-4"})})}):(0,p.jsx)(t3,{disabled:t})}),t9=a(66151),t7=a(76647),ae=a(94284),at=a(63651),aa=e=>{var t,a,s,l;let{disabled:r=!1}=e,n=(0,Y.iZ)(e=>e.project),i=(null==n?void 0:n.name)?(0,ae.c_)(n.github_repo_name,null==n?void 0:null===(t=n.github_owner)||void 0===t?void 0:t.name):"#",o=(null==n?void 0:null===(a=n.github_owner)||void 0===a?void 0:a.name)+"/"+(null==n?void 0:n.github_repo_name),{openSettings:c}=(0,eN.r)(),d=(null==n?void 0:null===(s=n.github_owner)||void 0===s?void 0:s.name)&&n.github_owner.name!==ae.aR,[u,m]=(0,g.useState)(!1);return(0,p.jsxs)(eE.h_,{open:u,onOpenChange:m,children:[(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(eE.$F,{asChild:!0,disabled:r,children:(0,p.jsxs)(Q.z,{variant:"secondary",size:"icon-sm",className:"gap-1.5",children:[(0,p.jsx)(ea.xR.GitHub,{className:"size-4"}),(0,p.jsx)("span",{className:"hidden",children:(null==n?void 0:null===(l=n.github_owner)||void 0===l?void 0:l.name)&&!(n.github_owner.name!==ae.aR)?"Sync with GitHub":"Manage GitHub"})]})})}),(0,p.jsx)(ed._v,{children:"Sync your project to GitHub"})]}),(0,p.jsx)(eE.AW,{className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0",collisionPadding:8,onCloseAutoFocus:e=>e.preventDefault(),children:n&&!d?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t2,{title:"GitHub",description:"Sync your project 2-way with GitHub to collaborate at source."}),(0,p.jsx)(eE.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(t5,{href:"https://docs.lovable.dev/integrations/git-integration"}),(0,p.jsxs)(Q.z,{variant:"default",size:"sm",onClick:()=>c("github"),children:[(0,p.jsx)(ea.xR.GitHub,{className:"size-4"}),(0,p.jsx)("span",{children:"Connect GitHub"})]})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t2,{title:"GitHub",badge:(0,p.jsx)(at.H,{status:"connected"})}),(0,p.jsx)(eE.VD,{}),(0,p.jsx)("div",{className:"px-2 py-0.5",children:(0,p.jsx)(eE.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:i,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(ea.xR.GitHub,{className:"h-4 w-4"}),(0,p.jsx)("span",{children:o}),(0,p.jsx)(et.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(eE.VD,{}),(0,p.jsx)("div",{className:"px-2 py-0.5",children:(0,p.jsx)(eE.Xi,{asChild:!0,children:(0,p.jsxs)("a",{href:"https://github.dev/".concat(o,"?").concat((null==n?void 0:n.main_branch)?"tree/".concat(null==n?void 0:n.main_branch):""),target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(et.Z,{name:"code",size:"small"}),(0,p.jsx)("span",{children:"Edit in VS Code"}),(0,p.jsx)(et.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground",size:"small"})]})})}),(0,p.jsx)(eE.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(t5,{href:"https://docs.lovable.dev/integrations/git-integration"}),(0,p.jsx)(Q.z,{variant:"default",size:"sm",onClick:()=>{c("github"),m(!1)},children:"Configure"})]})]})})]})},as=a(26073),al=e=>{let{children:t}=e;return(0,p.jsx)("div",{className:"avatars group flex flex-row items-center -space-x-3 md:-space-x-2",children:t})},ar=a(60468),an=a(80698),ai=a(67801);let ao=()=>(0,ai.Ue)(()=>({userPresences:{}})),ac=(0,g.createContext)(null),ad=e=>{let{children:t,projectId:a}=e,{canRead:s}=(0,w.t)(),l=(0,g.useRef)();l.current||(l.current=ao());let{authUser:r,authState:n}=(0,b.Eu)(),{isSuccess:i}=(0,tr.a)(td.W.presence({projectId:a,authUser:r,enablePresence:s}));(0,g.useEffect)(()=>{if(!a||!r||!i||!s)return;let e=l.current,t=(0,an.iH)(e$.Fs,"status/".concat(a)),n=(0,an.jM)(t,t=>{let a=t.val();if(a){let t={};Object.entries(a).filter(e=>{let[t,a]=e;return a.lastSeen&&a.id!==r.uid}).forEach(e=>{let[a,{lastSeen:s,username:l,displayName:r,photoURL:n,id:i,email:o}]=e,c=new Date(s);t[a]={lastSeen:c,id:i,username:l,displayName:r||"",photoURL:n,email:o}}),e.setState({userPresences:t})}else e.setState({userPresences:{}})},e=>{R.logging.error("Error listening to presence updates",{projectId:a,error:e})});return()=>{n()}},[a,r,n,i,s]);let o={store:l.current};return(0,p.jsx)(ac.Provider,{value:o,children:t})};var au=a(72124),am=a(85365),ap=a(11515);let ah={ADD_EDITOR:"claim.add_editor",ADD_ADMIN:"claim.add_admin",REMOVE_EDITOR:"claim.remove_editor",REMOVE_ADMIN:"claim.remove_admin",MANAGE_MAGIC_LINK:"claim.manage_magic_link",INVITE:"claim.invite"};class ax{generateClaims(){let e=new Set;return this.isFreeWorkspace?(e.add(ah.ADD_EDITOR),e.add(ah.REMOVE_EDITOR),e.add(ah.MANAGE_MAGIC_LINK),e.add(ah.INVITE)):this.currentUserIsProjectOwner?(e.add(ah.ADD_EDITOR),e.add(ah.ADD_ADMIN),e.add(ah.REMOVE_EDITOR),e.add(ah.REMOVE_ADMIN),e.add(ah.MANAGE_MAGIC_LINK),e.add(ah.INVITE)):this.isProjectAdmin&&(e.add(ah.ADD_EDITOR),e.add(ah.REMOVE_EDITOR),e.add(ah.MANAGE_MAGIC_LINK),e.add(ah.INVITE)),e}hasClaim(e){return this.claims.has(e)}canInvite(){return this.hasClaim(ah.INVITE)}canManageMagicLink(){return this.hasClaim(ah.MANAGE_MAGIC_LINK)}canEditRole(){var e;return!this.isFreeWorkspace&&((null===(e=this.collaborator)||void 0===e?void 0:e.access_level)==="admin"?this.hasClaim(ah.ADD_ADMIN):this.hasClaim(ah.ADD_EDITOR))}canRemoveRole(){var e;return this.isCurrentUser?!this.isCollaboratorProjectOwner:(null===(e=this.collaborator)||void 0===e?void 0:e.access_level)==="admin"?this.hasClaim(ah.REMOVE_ADMIN):this.hasClaim(ah.REMOVE_EDITOR)}isOwner(){return this.isCollaboratorProjectOwner}canManageCollaborator(){return!this.isCollaboratorProjectOwner&&(this.canEditRole()||this.canRemoveRole())}constructor(e){var t,a;this.context=e;let{collaborator:s,currentUserId:l,projectOwnerId:r}=e;this.isCurrentUser=(null==s?void 0:s.id)===l,this.isCollaboratorProjectOwner=r===(null==s?void 0:s.id),this.currentUserIsProjectOwner=l===r,this.isFreeWorkspace=null!==(t=e.isFreeWorkspace)&&void 0!==t&&t,this.isProjectAdmin=null!==(a=e.isProjectAdmin)&&void 0!==a&&a,this.collaborator=s,this.claims=this.generateClaims()}}let af=e=>new ax(e),ag=e=>(0,g.useMemo)(()=>af(e),[e.collaborator,e.currentUserId,e.projectOwnerId,e.isFreeWorkspace,e.isProjectAdmin]);var av=a(7575),ab=a(65323);let aj={owner:"Owner",admin:"Admin",write:"Editor",read:"Viewer"};var ay=e=>{let{collaborator:t,onRoleChange:a,onRemove:s,permissions:l}=e,r=!t.joined_at,n=l.canManageCollaborator(),i=l.isOwner()?"owner":t.access_level,o=r?"Pending":aj[i],c=e=>{e!==t.access_level&&a(t.id,e)};return n?(0,p.jsxs)(eE.h_,{children:[(0,p.jsx)(eE.$F,{asChild:!0,children:(0,p.jsxs)(Q.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",children:[o," ",(0,p.jsx)(et.Z,{name:"keyboard_arrow_down",size:"small"})]})}),(0,p.jsxs)(eE.AW,{align:"end",children:[r&&(0,p.jsx)(av.w,{label:"Pending",isSelected:!0,disabled:!0}),l.canEditRole()&&!r&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(av.w,{label:aj.admin,onClick:()=>c(ab.u.ADMIN),isSelected:i===ab.u.ADMIN}),(0,p.jsx)(av.w,{label:aj.write,onClick:()=>c(ab.u.WRITE),isSelected:i===ab.u.WRITE})]}),l.canRemoveRole()&&(0,p.jsx)(av.w,{label:"Remove",destructive:!0,onClick:()=>{s(t)}})]})]}):(0,p.jsx)(Q.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",disabled:!0,children:o})},aw=e=>{let{collaborator:t,onRoleChange:a,onRemove:s,permissionsContext:l}=e,{authUser:r}=(0,b.Eu)(),n=t.id===(null==r?void 0:r.uid),i=ag({...l,collaborator:t}),o=(0,p.jsx)(ay,{collaborator:t,onRoleChange:a,onRemove:s,permissions:i});return(0,p.jsx)(ap.Q,{id:t.id||"",username:t.username||"",displayName:t.display_name,email:t.email||"",isCurrentUser:n,avatarClassName:"h-6 w-6",actionComponent:o,isInvited:!t.joined_at,showBadge:!1})};let aN=function(){let{copiedText:e="Copied!",resetDelay:t=2e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[a,s]=(0,g.useState)(!1),[l,r]=(0,g.useState)();return{copy:(0,g.useCallback)(async(a,l)=>{if(a)try{await navigator.clipboard.writeText(a),s(!0),l?(r(l),r(e),setTimeout(()=>{r(l),s(!1)},t)):setTimeout(()=>{s(!1)},t)}catch(e){(0,N.Eo)(e)}},[e,t]),isCopied:a,buttonText:l}},aE=e=>{let{projectId:t}=e,{createSecretLink:a,isCreatingSecretLink:s}=function(){let e=(0,h.NL)(),{mutate:t,isPending:a}=(0,x.D)({mutationFn:async e=>{let{projectId:t}=e;return(0,E.SJ)().post("/projects/".concat(t,"/magic-codes"),{access_level:"write"})},onSuccess:async(t,a)=>{let s=td.W.magicCode({projectId:a.projectId}).queryKey;t.id&&e.setQueryData(s,{id:t.id}),v.Am.success("Secret link created")},onError:e=>{(0,N.Eo)(e)},onSettled:(t,a,s)=>{e.invalidateQueries({queryKey:td.W.magicCode({projectId:s.projectId}).queryKey})}});return{createSecretLink:t,isCreatingSecretLink:a}}(),{deactivateSecretLink:l,isDeactivatingSecretLink:r}=function(){let e=(0,h.NL)(),{mutate:t,isPending:a}=(0,x.D)({mutationFn:async e=>{let{projectId:t,magicCodeId:a}=e;return(0,E.SJ)().delete("/projects/".concat(t,"/magic-codes/").concat(a))},onSuccess:async(t,a)=>{let s=td.W.magicCode({projectId:a.projectId}).queryKey,l=e.getQueryData(s);(null==l?void 0:l.id)===a.magicCodeId&&e.setQueryData(s,{id:null})},onError:e=>{(0,N.Eo)(e)},onSettled:(t,a,s)=>{e.invalidateQueries({queryKey:td.W.magicCode({projectId:s.projectId}).queryKey})}});return{deactivateSecretLink:t,isDeactivatingSecretLink:a}}(),{copy:n,buttonText:i}=aN({copiedText:"Copied!",resetDelay:1500}),{data:o,isLoading:c}=(0,tr.a)(td.W.magicCode({projectId:t})),d=(0,g.useMemo)(()=>(null==o?void 0:o.id)?"".concat(window.location.origin,"/projects/").concat(t,"?magic_link=").concat(o.id):null,[t,o]),u=async()=>{try{S.ZP.capture(I.SL.COLLABORATION.SECRET_LINK_CREATED),a({projectId:t})}catch(e){(0,N.Eo)(e)}},m=(0,g.useCallback)(()=>{d&&(S.ZP.capture(I.SL.COLLABORATION.SECRET_LINK_COPIED),n(d,"Copy"))},[n,d]);if(c)return(0,p.jsxs)("div",{className:"flex animate-pulse gap-5",children:[(0,p.jsx)("div",{className:"h-5 w-5 rounded bg-muted"}),(0,p.jsxs)("div",{className:"flex flex-1 flex-col gap-2",children:[(0,p.jsx)("div",{className:"h-4 w-2/3 rounded bg-muted"}),(0,p.jsx)("div",{className:"h-3 w-full rounded bg-muted"})]}),(0,p.jsx)("div",{className:"h-9 w-24 rounded bg-muted"})]});if(null==o?void 0:o.id){let e=async()=>{try{S.ZP.capture(I.SL.COLLABORATION.SECRET_LINK_REMOVED),l({projectId:t,magicCodeId:o.id})}catch(e){(0,N.Eo)(e)}};return(0,p.jsxs)("div",{className:"align-start flex gap-5",children:[(0,p.jsx)(et.Z,{name:"link",size:"small"}),(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1",children:[(0,p.jsx)("div",{className:"text-sm font-medium leading-none",children:"Share invite link"}),(0,p.jsx)("div",{className:"text-xs leading-none text-muted-foreground",children:"Anyone with this link can edit"})]}),(0,p.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,p.jsx)(Q.z,{variant:"link",onClick:e,disabled:r,children:"Remove"}),(0,p.jsx)(Q.z,{variant:"secondary",onClick:m,children:i||"Copy"})]})]})}return(0,p.jsxs)("div",{className:"flex gap-5",children:[(0,p.jsx)(et.Z,{name:"link",size:"small"}),(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center gap-1",children:[(0,p.jsx)("div",{className:"text-sm font-medium leading-none",children:"Create invite link"}),(0,p.jsx)("div",{className:"text-xs leading-none text-muted-foreground",children:"Anyone with this link can edit"})]}),(0,p.jsx)(Q.z,{className:"ml-auto",variant:"outline",size:"sm",onClick:u,disabled:s,children:"Create"})]})};var ak=e=>{let{collaboratorName:t,onConfirm:a,onCancel:s}=e,l=async()=>{S.ZP.capture(I.SL.COLLABORATION.REMOVE_DIALOG_CONFIRMED),await a()};return(0,p.jsx)(ew.Z,{title:"Remove collaborator",targetName:t,descriptionTemplate:"Are you sure you want to remove ".concat(t," from this project? They will no longer have access to this project."),onConfirm:l,onCancel:()=>{S.ZP.capture(I.SL.COLLABORATION.REMOVE_DIALOG_CANCELLED),s()}})},aC=a(76222);let a_=e=>{let{workspace:t}=e,a=(0,tO.Ll)(null==t?void 0:t.plan);if(!(0,aC.c)())return null;let s={title:"",message:"",showContactUs:!1};switch(a){case"enterprise":case"biz":return null;case"pro":s.title="Upgrade to Enterprise",s.message="For more than 20 collaborators",s.showContactUs=!0;break;default:s.title="Upgrade to Pro",s.message="Permission control & more"}return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(am.Separator,{}),(0,p.jsxs)("div",{className:"mt-1 flex w-full flex-row items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-col items-start justify-center",children:[(0,p.jsx)("p",{className:"text-sm font-medium",children:s.title}),(0,p.jsx)("p",{className:"text-xs text-muted-foreground",children:s.message})]}),s.showContactUs?(0,p.jsx)(Q.z,{asChild:!0,className:"font-medium",variant:"muted",size:"sm",children:(0,p.jsx)(tQ.default,{href:"https://enterpriseform.lovable.app/",target:"_blank",children:"Contact Us"})}):(0,p.jsx)(t9.Z,{plan:null==t?void 0:t.plan,size:"sm",variant:"muted",className:"font-medium",children:"Upgrade"})]})]})};var aS=a(43115),aT=a(21354);let aR=e=>{let{onDialogClose:t}=e,a=(0,f.usePathname)(),s=(0,eK.hO)(e=>e.projectWorkspace),l=(0,eK.hO)(e=>!0===e.permissions.read),{memberCount:r}=(0,aT.qI)({workspaceId:(null==s?void 0:s.id)||"",status:"active"});return s?(0,p.jsxs)("div",{className:"flex flex-wrap items-center gap-3 py-1 md:flex-nowrap",children:[(0,p.jsx)(aS.z,{workspace:s,className:"h-6 w-6"}),(0,p.jsx)("div",{className:"flex flex-shrink items-center gap-2 md:w-full",children:(0,p.jsx)("div",{className:"max-w-[200px] flex-shrink truncate text-sm font-medium",children:s.name})}),(0,p.jsx)("div",{className:"ml-auto flex items-center gap-1",children:l?(0,p.jsxs)(eE.h_,{children:[(0,p.jsx)(eE.$F,{asChild:!0,children:(0,p.jsxs)(Q.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",children:[1===r?"1 member":"".concat(r," members"),(0,p.jsx)(et.Z,{name:"keyboard_arrow_down",size:"small"})]})}),(0,p.jsx)(eE.AW,{align:"end",children:(0,p.jsx)(eE.Xi,{asChild:!0,children:(0,p.jsxs)(tQ.default,{href:"".concat(a,"?settings=people"),onClick:t,className:"hover:bg-accent",children:[(0,p.jsx)(et.Z,{name:"group",size:"small"}),"Manage Workspace Access"]})})})]}):(0,p.jsxs)(Q.z,{variant:"ghost",size:"sm",className:"text-sm font-medium",disabled:!0,children:["Workspace Access",(0,p.jsx)(et.Z,{name:"lock",size:"small",className:"ml-1"})]})})]}):null},aI=e=>{var t,a,s,l;let{disabled:r=!1}=e,n=(0,W.z)(ak),[i,o]=(0,g.useState)(!1),{authUser:c}=(0,b.Eu)(),d=(0,eK.hO)(e=>e.projectWorkspace),u=(0,Y.iZ)(e=>e.project),m=(0,$.c)(e=>e.collaborators),f=(0,$.c)(e=>e.hasFetchedCollaborators),{isProjectAdmin:v,isProjectOwner:j}=(0,w.t)(),y=!!j,k=(0,tO.XB)(null==d?void 0:d.plan),C=d&&(null==d?void 0:d.plan)=="free"||null==d,T={collaborator:void 0,currentUserId:null==c?void 0:c.uid,projectOwnerId:null!==(t=null==u?void 0:u.user_id)&&void 0!==t?t:"",isFreeWorkspace:!!C,isProjectAdmin:v},R=ag(T),D=(0,g.useMemo)(()=>({write:"Editor",admin:"Admin",owner:"Owner"}),[]),P=(0,g.useMemo)(()=>[{value:"admin",label:D.admin},{value:"write",label:D.write}],[D]),{inviteCollaborator:z,isInvitingCollaborator:A}=function(e){let{projectId:t}=e,a=(0,h.NL)(),{mutateAsync:s,isPending:l}=(0,x.D)({mutationFn:async e=>{let{email:a,inviteRole:s,projectOwnerId:l}=e;return(0,E.SJ)().post("/projects/".concat(t,"/collaborators"),{email:a,access_level:s})},onSuccess:(e,s)=>{let{projectOwnerId:l}=s,r=td.W.collaborators({projectId:t,projectOwnerId:l}).queryKey,n=a.getQueryData(r)||[];n.some(t=>t.id===e.id)||a.setQueryData(r,(0,td.b)({collaborators:[...n,e],projectOwnerId:l})),a.invalidateQueries({queryKey:_.iZ.collaborators(t)})},onError:e=>{(0,N.Eo)(e)}});return{inviteCollaborator:s,isInvitingCollaborator:l}}({projectId:null!==(a=null==u?void 0:u.id)&&void 0!==a?a:""}),{deleteCollaborator:O}=function(e){let{projectId:t}=e,a=(0,h.NL)(),{mutateAsync:s}=(0,x.D)({mutationFn:async e=>{let{collaboratorId:a}=e,s=(0,E.SJ)();await s.delete("/projects/".concat(t,"/collaborators/").concat(a))},onSuccess:(e,s)=>{let{projectOwnerId:l,collaboratorId:r}=s;X(t,r);let n=a.getQueryData(td.W.collaborators({projectId:t,projectOwnerId:l}).queryKey);n&&a.setQueryData(_.iZ.collaborators(t),n.filter(e=>e.id!==r))},onError:e=>{(0,N.Eo)(e)},onSettled:(e,a,s)=>{X(t,s.collaboratorId)}});return{deleteCollaborator:s}}({projectId:null!==(s=null==u?void 0:u.id)&&void 0!==s?s:""}),{updateCollaboratorRole:L}=function(e){let{projectId:t}=e,a=(0,h.NL)(),{mutateAsync:s}=(0,x.D)({mutationFn:async e=>{let{collaboratorId:a,role:s,projectOwnerId:l}=e,r=(0,E.SJ)();await r.put("/projects/".concat(t,"/collaborators/").concat(a),{access_level:s})},onMutate:async e=>{await a.cancelQueries({queryKey:td.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey});let s=a.getQueryData(td.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey);return a.setQueryData(td.W.collaborators({projectId:t,projectOwnerId:e.projectOwnerId}).queryKey,t=>{if(!t)return[];let a=t.map(t=>t.id===e.collaboratorId?{...t,access_level:e.role}:t);return(0,td.b)({collaborators:a,projectOwnerId:e.projectOwnerId})}),{previousCollaborators:s,projectOwnerId:e.projectOwnerId}},onError:(e,s,l)=>{(0,N.Eo)(e),(null==l?void 0:l.previousCollaborators)&&a.setQueryData(td.W.collaborators({projectId:t,projectOwnerId:l.projectOwnerId}).queryKey,l.previousCollaborators)},onSettled:(e,s,l)=>{X(t,l.collaboratorId),a.invalidateQueries({queryKey:td.W.collaborators({projectId:t,projectOwnerId:l.projectOwnerId}).queryKey})}});return{updateCollaboratorRole:s}}({projectId:null!==(l=null==u?void 0:u.id)&&void 0!==l?l:""}),Z=async e=>{let{emails:t,role:a}=e;if(!u)return{success:!1};let s=v&&!y?"write":a,l=0;for(let e of t)await z({email:e,inviteRole:s,projectOwnerId:u.user_id}),l++;return l>0&&S.ZP.capture(I.SL.COLLABORATION.COLLABORATOR_INVITED,{role:s,emailCount:l}),{success:l>0}},M=async(e,t)=>{(null==u?void 0:u.id)&&(null==u?void 0:u.user_id)&&(S.ZP.capture(I.SL.COLLABORATION.COLLABORATOR_ROLE_CHANGED),await L({collaboratorId:e,role:t,projectOwnerId:u.user_id}))},F=e=>{u&&(S.ZP.capture(I.SL.COLLABORATION.COLLABORATOR_REMOVE_INITIATED),n({childProps:{collaboratorName:e.display_name,onConfirm:async()=>{await O({collaboratorId:e.id,projectOwnerId:u.user_id}),n(!1)},onCancel:()=>n(!1)}}))},U="Collaborators will use credits from the project owner's workspace (".concat(null==d?void 0:d.name,")"),K=(0,p.jsxs)(p.Fragment,{children:["Collaborators will use credits from the project owner's workspace (",null==d?void 0:d.name,"). If you need more than 20 collaborators,"," ",(0,p.jsx)(tQ.default,{className:"underline",target:"_blank",href:"https://enterpriseform.lovable.app/",children:"contact us"}),"."]}),V=R.canInvite(),B=R.canManageMagicLink(),G=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,p.jsx)("p",{className:"text-lg font-medium",children:"Invite"}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:C?U:K})]}),V?(0,p.jsx)(au.s,{onInvite:e=>{let{emails:t,role:a}=e;return Z({emails:t,role:a})},isInviting:A,roleOptions:P,defaultRole:"write",canSelectRoles:!C,placeholder:"Invite by email"}):(0,p.jsxs)("div",{className:"flex w-full items-center gap-4",children:[(0,p.jsx)(e2.I,{disabled:!0,className:"h-8",placeholder:"Invite by email"}),(0,p.jsx)(Q.z,{variant:"secondary",disabled:!0,children:"Invite"})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-1",children:[k&&(0,p.jsx)(aR,{onDialogClose:()=>o(!1)}),f?m.map(e=>(0,p.jsx)(aw,{collaborator:e,onRoleChange:M,onRemove:F,permissionsContext:T},e.id)):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(aD,{}),(0,p.jsx)(aD,{})]})]}),(null==u?void 0:u.id)&&B&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(am.Separator,{}),(0,p.jsx)(aE,{projectId:u.id})]}),(0,p.jsx)(a_,{workspace:null!=d?d:void 0})]});return(0,p.jsxs)(eE.h_,{open:i,onOpenChange:e=>{e&&S.ZP.capture(I.SL.COLLABORATION.DROPDOWN_OPENED),o(e)},children:[(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(eE.$F,{asChild:!0,disabled:r,children:(0,p.jsxs)(Q.z,{variant:"secondary",size:"sm",className:(0,eu.cn)("relative flex h-[34px] w-[34px] shrink-0 rounded-full border bg-secondary p-0 shadow-none group-[.avatars]:border-background @2xl:w-auto @2xl:px-2.5 disabled:opacity-100 md:h-[30px] md:w-[30px] md:@2xl:w-auto"),children:[(0,p.jsx)(et.Z,{name:"add",size:"small",className:"flex @2xl:hidden"}),(0,p.jsx)("span",{className:"hidden @2xl:flex",children:"Invite"})]})})}),(0,p.jsx)(ed._v,{children:"Invite collaborators"})]}),(0,p.jsx)(eE.AW,{className:"z-[1001] flex w-full max-w-[325px] flex-col gap-4 border border-border p-4 shadow-md md:max-w-[400px]",collisionPadding:8,onCloseAutoFocus:e=>e.preventDefault(),children:G})]})},aD=()=>(0,p.jsx)("div",{className:"flex flex-col gap-2",children:(0,p.jsxs)("div",{className:"flex items-center gap-3.5",children:[(0,p.jsx)("div",{className:"h-6 w-6 shrink-0 rounded-full bg-muted"}),(0,p.jsx)("div",{className:"h-4 w-20 rounded-sm bg-muted"}),(0,p.jsx)("div",{className:"h-4 w-32 rounded-sm bg-muted"})]})}),aP=e=>e>new Date(Date.now()-3e5),az=e=>{var t,a,s;let{hasUnsavedChanges:l}=e,{userPresences:r}=function(e){let{store:t}=function(){let e=(0,g.useContext)(ac);if(!e)throw Error("usePresenceContext must be used within a PresenceProvider");return e}();return t(e)}(e=>e),n=(0,$.c)(e=>e.collaborators),{userData:i}=(0,Z.SE)(),{authUser:o}=(0,b.Eu)(),c=(0,y.Z)("md"),d=(0,g.useMemo)(()=>Object.values(r).filter(e=>e.lastSeen>new Date(Date.now()-864e5)).filter(e=>n.some(t=>t.id===e.id)).sort((e,t)=>e.lastSeen.getTime()-t.lastSeen.getTime()).slice(0,c?3:5),[r,c,n]),u=null!==(s=null!==(a=null==i?void 0:null===(t=i.attributes)||void 0===t?void 0:t.display_name)&&void 0!==a?a:null==o?void 0:o.email)&&void 0!==s?s:null==i?void 0:i.id;return(0,p.jsxs)(al,{children:[i&&(0,p.jsx)(tQ.default,{href:"/@".concat(i.id),target:"_blank",children:(0,p.jsx)(ar.Y,{user:i,isInteractive:!0,className:(0,eu.cn)("h-[34px] w-[34px] md:h-[26px] md:w-[26px]"),tooltipContent:(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsxs)("p",{className:"text-xs font-medium",children:[u," ",(0,p.jsx)("span",{className:"font-normal",children:"(You)"})]})})})},i.id),d.length>0&&(0,p.jsx)(p.Fragment,{children:d.map(e=>{var t;return(0,p.jsx)(tQ.default,{href:"/@".concat(e.username||e.id),target:"_blank",children:(0,p.jsx)(ar.Y,{user:{id:e.id,username:null!==(t=e.username)&&void 0!==t?t:e.email},className:(0,eu.cn)("h-[34px] w-[34px] md:h-[26px] md:w-[26px]"),photoURL:e.photoURL,isInteractive:!0,tooltipContent:(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("p",{className:"text-xs font-medium",children:e.displayName||e.email||e.username}),(0,p.jsx)("p",{className:"text-xs text-muted",children:aP(e.lastSeen)?"Now":(0,as.Q)(e.lastSeen,{addSuffix:!0})})]})})},e.id)})}),(0,p.jsx)(aI,{disabled:l})]})};var aA=a(95713),aO=a(94127),aL=a(86818);let aZ=e=>{let t=(0,B.D)(),[a,s]=(0,g.useState)(!1),{onClick:l,isPending:r}=(0,aL.hw)({projectId:t,errors:[{id:(0,O.Fd)(),type:aO.N.BUILD,error_message:"Production build error: ".concat(e||""),occurred_at:new Date().toISOString(),created_at:aA.EK.now()}]}),n=(0,A.bk)(e=>e.isSendChatMessageMutationPending);return{handleFix:(0,g.useCallback)(async()=>{if(!a)try{s(!0),await l(),v.Am.success("Fix attempt initiated successfully")}catch(e){console.error("Failed to initiate fix:",e),v.Am.error("Failed to initiate fix. Please try again.")}finally{s(!1)}},[l,a]),isFixing:r||n||a}},aM=e=>{let{open:t,onOpenChange:a,errorMessage:s,isBuildError:l=!1}=e,{handleFix:r,isFixing:n}=aZ(s||""),i=(0,g.useCallback)(async()=>{await r(),a(!1)},[r,a]);return(0,p.jsx)(ee.Vq,{open:t,onOpenChange:a,children:(0,p.jsxs)(ee.cZ,{className:"text-center",children:[(0,p.jsxs)(ee.fK,{className:"flex flex-col gap-2 space-y-0",children:[(0,p.jsx)(ee.$N,{className:"text-2xl",children:"Oops! \uD83D\uDE22"}),(0,p.jsx)("p",{className:"",children:l?"We couldn't publish your site due to build errors.":"Something went wrong and we couldn't publish your site."}),s&&(0,p.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,p.jsx)("p",{className:"",children:l?"The build failed with the following errors:":"The error message:"}),(0,p.jsx)("p",{className:"font-medium text-destructive-primary",children:s})]})]}),(0,p.jsxs)(ee.cN,{className:"",children:[(0,p.jsx)(Q.z,{variant:"outline",onClick:()=>a(!1),children:"Close"}),l&&(0,p.jsxs)(Q.z,{onClick:i,variant:"default",size:"default",disabled:n,className:"flex items-center gap-2",children:[(0,p.jsx)(et.Z,{name:"build",size:"small"}),n?"Fixing...":"Try to fix"]})]})]})})};function aF(e){let{projectUrl:t="",projectTitle:a="Embedded Project",projectId:s}=e,[l,r]=(0,g.useState)(t),[n,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{t&&(r(t),i(!0))},[t]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{children:"Embed Project"}),(0,p.jsx)(ee.Be,{children:"Copy and paste the HTML code below to embed your project iframe."})]}),(0,p.jsx)("div",{className:"space-y-4",children:n&&l&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)("div",{className:"space-y-2",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("pre",{className:"overflow-x-auto rounded-lg bg-muted p-4 text-sm",children:(0,p.jsx)("code",{children:'<iframe\n  style="width: 100%;"\n  height="569"\n  src="'.concat(l,'"\n  title="').concat(a,'"\n  frameBorder="0">\n</iframe>')})}),(0,p.jsx)(Q.z,{onClick:()=>{let e='<iframe\n  style="width: 100%;"\n  height="569"\n  src="'.concat(l,'"\n  title="').concat(a,'"\n  frameBorder="0">\n</iframe>');navigator.clipboard.writeText(e),c(!0),S.LJ.capture(I.SL.EMBED.CODE_COPIED,{projectId:s,embedType:"iframe"}),setTimeout(()=>{c(!1)},2e3)},size:"sm",className:"absolute right-2 top-2",variant:"outline",children:o?"Copied!":"Copy"})]})})})})]})}let aU=e=>{var t;let{project:a,variant:s="dropdown",onActionComplete:l}=e,{openSettings:r}=(0,eN.r)(),{hasUnsavedChanges:n}=(0,tu.v)(),i=(0,e6.UC)(e=>e.isVisualEditingActive),o=(0,eR.ty)(),c=(null==a?void 0:a.latest_commit_sha)===(null==a?void 0:null===(t=a.published_deployment)||void 0===t?void 0:t.commit_sha),d=!!(null==a?void 0:a.url),u=!d||n||i||!c,m=()=>{if(u)return;null==l||l();let e="dialog"===s?I.Md.OPEN_PUBLISH:I.Md.OPEN_TOP_MENU;S.ZP.capture(e,{hasProjectUrl:d,isLastEditPublished:c,hasUnsavedChanges:n,isVisualEditingActive:i,context:s}),r("page_speed")},h=d?c?n?"Update first to run analysis on latest version":i?"Exit visual editor first":null:"Publish latest version first to run analysis":"Publish first to run analysis";if(!o)return null;let x=(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(et.Z,{name:"trending_up"}),"Page Speed Analysis"]});return"dropdown"===s?(0,p.jsx)(Q.z,{variant:"ghost",size:"sm",onClick:m,disabled:u,title:h||void 0,className:"w-full justify-start",children:x}):(0,p.jsx)(Q.z,{variant:"outline",size:"sm",onClick:m,disabled:u,title:h||void 0,children:x})},aK=e=>{let{projectUrl:t,projectTitle:a,projectId:s}=e;return(0,p.jsx)(ee.cZ,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,p.jsx)(aF,{projectUrl:t,projectTitle:a,projectId:s})})},aV=e=>{let{open:t,onOpenChange:a,project:s}=e,[l,r]=(0,g.useState)(!1),n=(0,eR.ty)(),i=(0,eR.X4)(),o=(0,W.z)(aK),c=null==s?void 0:s.url,d=async()=>{if(!l&&c)try{await navigator.clipboard.writeText(c),r(!0),setTimeout(()=>r(!1),2e3)}catch(e){v.Am.error("Failed to copy link")}},u=e=>{if(!c)return;let t="Check out what I just built with Lovable!",a=encodeURIComponent(c),s=encodeURIComponent(t),l={twitter:"https://twitter.com/intent/tweet?text=".concat(s,"&url=").concat(a),linkedin:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(a),reddit:"https://reddit.com/submit?url=".concat(a,"&title=").concat(s),discord:"https://discord.com/channels/@me"};if("discord"===e){navigator.clipboard.writeText("".concat(t," ").concat(c)),v.Am.success("Copied to clipboard! Paste it in your Discord channel.");return}let r=l[e];r&&window.open(r,"_blank","noopener,noreferrer")};return(0,p.jsx)(ee.Vq,{open:t,onOpenChange:a,children:(0,p.jsxs)(ee.cZ,{className:"max-w-sm",children:[(0,p.jsx)(ee.fK,{children:(0,p.jsx)(ee.$N,{className:"sr-only",children:"Project Published Successfully"})}),(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsx)("div",{className:"flex justify-start",children:(0,p.jsx)(ea.xx,{className:"h-12"})}),(0,p.jsxs)("div",{className:"space-y-2",children:[(0,p.jsx)("h2",{className:"text-2xl font-medium",children:"You just shipped!"}),(0,p.jsx)("p",{className:"text-muted-foreground",children:"Let's share your work with the world"})]}),(0,p.jsx)("div",{className:"rounded-lg bg-muted px-3 py-1",children:(0,p.jsxs)("div",{className:"flex items-center gap-3",children:[(0,p.jsx)(et.Z,{name:"link",size:"small",className:"text-muted-foreground"}),(0,p.jsx)(e2.I,{value:c||"",readOnly:!0,className:"flex-1 border-none bg-transparent p-0 shadow-none focus-visible:ring-0",onFocus:e=>e.target.select()}),(0,p.jsx)(Q.z,{variant:"outline",size:"sm",onClick:d,children:l?"Copied!":"Copy Link"})]})}),(0,p.jsxs)("div",{className:"space-y-3",children:[(0,p.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Share with your loved ones:"}),(0,p.jsxs)("div",{className:"justify-left flex gap-4",children:[(0,p.jsx)("button",{onClick:()=>u("twitter"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on X (Twitter)",children:(0,p.jsx)(ea.xR.X,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("linkedin"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on LinkedIn",children:(0,p.jsx)(ea.xR.Linkedin,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("reddit"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on Reddit",children:(0,p.jsx)(ea.xR.Reddit,{className:"h-4 w-4"})}),(0,p.jsx)("button",{onClick:()=>u("discord"),className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Share on Discord",children:(0,p.jsx)(ea.xR.Discord,{className:"h-4 w-4"})}),i&&(0,p.jsx)("button",{onClick:()=>{var e,t,l;S.LJ.capture(I.SL.EMBED.SUCCESS_DIALOG_CLICKED,{projectId:null==s?void 0:s.id,source:"publish_success_dialog"}),o({childProps:{projectUrl:null!==(e=null==s?void 0:s.url)&&void 0!==e?e:void 0,projectTitle:null!==(t=null==s?void 0:s.name)&&void 0!==t?t:void 0,projectId:null!==(l=null==s?void 0:s.id)&&void 0!==l?l:void 0}}),a(!1)},className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted transition-colors hover:bg-muted/80",title:"Get Embed Code",children:(0,p.jsx)(et.Z,{name:"code",size:"small",className:"h-4 w-4"})})]})]}),n&&(0,p.jsx)("div",{className:"space-y-3 border-t pt-6",children:(0,p.jsx)(aU,{project:s,variant:"dialog",onActionComplete:()=>a(!1)})})]})]})})};var aW=a(76332);let aB=e=>{let{className:t,text:a="Free"}=e;return(0,p.jsxs)("span",{className:(0,eu.cn)("align-baseline text-xs opacity-70",t),children:["(",a,")"]})},aG=e=>{let{open:t,onOpenChange:a,onPublishAnyway:s,onReviewIssues:l,isReviewDisabled:r=!1,isReviewLoading:n=!1,reviewDisabledReason:i}=e;return(0,p.jsx)(ee.Vq,{open:t,onOpenChange:a,children:(0,p.jsxs)(ee.cZ,{children:[(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{children:"Security Issues Found"}),(0,p.jsx)(ee.Be,{children:"Critical vulnerabilities in Supabase integration detected. Review them now to not risk leaking sensitive data or your secret keys."})]}),(0,p.jsxs)(ee.cN,{children:[(0,p.jsx)(Q.z,{variant:"secondary",onClick:()=>{s(),a(!1)},children:"Publish anyway"}),(0,p.jsx)(aW.b,{showTooltip:!!i,tooltipContent:i,children:(0,p.jsxs)(Q.z,{variant:"affirmative",onClick:()=>{l(),a(!1)},disabled:r,loading:n,className:"flex items-center gap-1.5",children:["Review Security ",(0,p.jsx)(aB,{className:"text-sm"})]})})]})]})})};var aH=a(72163),aJ=a(22114);let aq=e=>{let{project:t}=e,{data:a,isLoading:s}=(0,aJ.W)({projectId:null==t?void 0:t.id});return(null==t?void 0:t.id)&&(s||(null==a?void 0:a.is_used))?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eE.VD,{}),(0,p.jsx)("div",{className:"pb-2",children:s?(0,p.jsxs)("div",{className:(0,eu.cn)("mx-0 flex h-10 items-center gap-2 rounded-lg bg-muted px-2 md:mx-2 md:h-8"),children:[(0,p.jsx)("div",{className:"flex w-4 items-center justify-center",children:(0,p.jsx)(eB.O,{className:"h-1.5 w-1.5 rounded-full"})}),(0,p.jsx)(eB.O,{className:"h-3 max-w-48 flex-grow"})]}):(0,p.jsxs)("div",{className:"flex min-h-7 items-center gap-2 px-4 py-2",children:[(0,p.jsx)(et.Z,{name:"smart_toy",size:"small",className:"text-green-600"}),(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[(0,p.jsx)("p",{className:"text-sm font-medium",children:"AI Gateway: Active"}),(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)("button",{type:"button",className:"inline-flex items-center justify-center rounded-sm p-0.5 text-muted-foreground hover:text-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",children:(0,p.jsx)(et.Z,{name:"help",size:"small"})})}),(0,p.jsx)(ed._v,{className:"max-w-xs",children:(0,p.jsx)("p",{children:"Lovable's AI Gateway provides secure API endpoints for your project to communicate with AI services. It handles authentication and rate limiting automatically."})})]})]}),(0,p.jsx)("div",{className:"ml-auto flex items-center",children:(0,p.jsx)("div",{className:"h-2 w-2 rounded-full bg-green-500"})})]})})]}):null};var aX=a(12759),a$=a(13063),aY=a(39592);let aQ=e=>{let{projectId:t,enabled:a}=e,{data:s,...l}=(0,tr.a)(aY.c.domains({projectId:null!=t?t:"",enabled:a&&!!t}));return{customDomains:s,...l}};var a0=a(88795),a1=a(12063);let a2=e=>{let{projectId:t}=e,a=(0,g.useMemo)(()=>(0,a1.HX)(),[]),{data:s,isLoading:l}=(0,tr.a)(td.W.analytics({projectId:t,timePeriod:a})),r=null==s?void 0:s.timeSeries.visitors.total,{openSettings:n}=(0,eN.r)(),i=1===r?"Visitor":"Visitors",o=void 0!==r?(0,a0.ZI)(r):"0";return(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsxs)("div",{className:"flex cursor-pointer items-center gap-1 transition-opacity duration-150 ease-in-out hover:opacity-75",onClick:()=>n("analytics"),children:[(0,p.jsx)(et.Z,{name:"bid_landscape",size:"small"}),l?(0,p.jsx)(eB.O,{className:"h-4 w-16"}):(0,p.jsxs)("p",{className:"text-sm",children:[(0,p.jsx)("span",{children:o})," ",(0,p.jsx)("span",{children:i})]})]})}),(0,p.jsx)(ed._v,{className:"max-w-[30ch]",children:"How many people visited your published project in the last 7 days."})]})},a5=e=>{let{project:t,onRenameClick:a}=e,{openSettings:s}=(0,eN.r)(),{customDomains:l}=aQ({projectId:null==t?void 0:t.id,enabled:!0});return(0,p.jsxs)("div",{className:"my-2 flex flex-col gap-0 pt-1",children:[(0,p.jsxs)("div",{className:"flex w-full items-center justify-between px-4",children:[(0,p.jsx)("p",{className:"text-sm font-medium",children:"Published site"}),(null==t?void 0:t.id)&&t.url&&(0,p.jsx)(a2,{projectId:t.id})]}),(null==t?void 0:t.url)?(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(Q.z,{asChild:!0,variant:"link",className:"mx-0 h-auto min-h-8 w-full text-wrap px-4 font-normal",children:(0,p.jsxs)("a",{href:null==t?void 0:t.url,target:"_blank",rel:"noreferrer",children:[(0,p.jsx)(et.Z,{name:"language",size:"small"}),(0,p.jsx)("span",{className:"min-w-0 truncate",children:(0,a$.P)(t.url)}),(0,p.jsx)(et.Z,{name:"arrow_outward",size:"small",className:"ml-auto text-muted-foreground"})]})})}),(0,p.jsx)(ed._v,{sideOffset:-4,children:(0,a$.P)(t.url)})]}):(0,p.jsxs)("div",{className:"flex h-auto min-h-8 items-center gap-2 px-4 py-2",children:[(0,p.jsx)(et.Z,{name:"language",size:"small"}),(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsxs)("p",{className:"truncate text-sm font-normal",children:[null==t?void 0:t.name,".lovable.app"]})}),(0,p.jsxs)(ed._v,{children:[null==t?void 0:t.name,".lovable.app"]})]}),a&&(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",onClick:a,className:"ml-auto h-6 w-6 opacity-70 hover:opacity-100",children:(0,p.jsx)(et.Z,{name:"edit",size:"small"})})]}),null==l?void 0:l.map((e,t)=>(0,p.jsx)("div",{className:"flex min-h-8 items-center px-4",children:(0,p.jsx)(aX.Z,{domain:e,showRemove:!1,showIcon:!0},t)},t)),(0,p.jsx)("div",{className:"flex items-center gap-2 px-4 py-0.5",children:(0,p.jsxs)(Q.z,{variant:"link",size:"sm",className:"pl-0 font-normal text-muted-foreground",onClick:()=>s("domains"),children:[(0,p.jsx)(et.Z,{name:"add",size:"small"}),"Custom domains"]})})]})},a4=e=>{var t,a;let{showUpdateSuccess:s,isUpToDate:l,project:r,wasInitiallyUnpublished:n,isPending:i}=e;return(s||l)&&(null==r?void 0:r.url)?n?"Published":"Updated":i?(null==r?void 0:null===(a=r.published_deployment)||void 0===a?void 0:a.commit_sha)?"Updating":"Publishing":(null==r?void 0:null===(t=r.published_deployment)||void 0===t?void 0:t.commit_sha)?"Update":"Publish"},a3=e=>{var t;let{project:a,publishMutation:s}=e,[l,r]=(0,g.useState)(!1),[n,i]=(0,g.useState)(null),o=!!((null==a?void 0:a.url)&&(null==a?void 0:null===(t=a.published_deployment)||void 0===t?void 0:t.commit_sha)===(null==a?void 0:a.latest_commit_sha));(0,g.useEffect)(()=>{a&&null===n&&i(!a.url)},[a]),(0,g.useEffect)(()=>{s.isSuccess&&(null==a?void 0:a.url)&&r(!0)},[s.isSuccess,null==a?void 0:a.url]),(0,g.useEffect)(()=>{!o&&l&&!s.isPending&&(r(!1),n&&i(!1))},[o,l,s.isPending,n]);let c=a4({showUpdateSuccess:l,isUpToDate:o,project:a,wasInitiallyUnpublished:n,isPending:s.isPending});return{showUpdateSuccess:l,wasInitiallyUnpublished:n,isUpToDate:o,buttonText:c}};var a6=a(6233);let a8=e=>{let{projectId:t,hasCriticalSecurityIssues:a,setShowPublishConfirmDialog:s,projectUrl:l}=e,[r,n]=(0,g.useState)(),[i,o]=(0,g.useState)(!1),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(!1),p=(0,x.D)({mutationFn:async()=>{let e=(0,E.SJ)(),a=await e.post("/projects/".concat(t,"/deployments"),{});try{await (0,a6.G)({projectId:t,deploymentId:a.deployment_id})}catch(e){R.logging.error("Error updating deployment ID: ".concat(e))}return{request:a,wasFirstTime:!l}},onSuccess:e=>{let{wasFirstTime:t}=e;t?m(!0):v.Am.success("Project updated!",{description:"Published project updated"})},onError:e=>{if(422===e.status){var t;n((null===(t=e.data)||void 0===t?void 0:t.detail)||null),o(!0)}else n(e.message||e.details||"Unidentified error. Please contact support if this issue persists."),o(!1);d(!0)}});return{errorMessage:r,isBuildError:i,failedDialogOpen:c,successDialogOpen:u,setFailedDialogOpen:d,setSuccessDialogOpen:m,handlePublish:async()=>{if(!t){R.logging.error("project id is missing, can't deploy");return}a?s(!0):p.mutate()},handlePublishAnyway:()=>{s(!1),p.mutate()},publishMutation:p}};var a9=a(45417),a7=a(57967);let se=e=>{let{projectId:t,projectName:a}=e,s=(0,eK.hO)(e=>e.projectWorkspace),l=(null==s?void 0:s.disable_named_previews)?(0,te.t)({projectId:t}):(0,te.t)({projectName:a}),r=(0,a$.P)(l).replace(/\/$/,"");return(0,p.jsxs)("div",{className:"flex flex-col gap-0 pb-0.5 pt-1",children:[(0,p.jsx)("div",{className:"flex w-full items-center justify-between px-4",children:(0,p.jsx)("p",{className:"text-sm font-medium",children:"Preview"})}),(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(Q.z,{asChild:!0,variant:"link",className:"mx-0 h-auto min-h-8 w-full text-wrap px-4 font-normal",children:(0,p.jsxs)("a",{href:l,target:"_blank",rel:"noreferrer",children:[(0,p.jsx)(et.Z,{name:"language",size:"small"}),(0,p.jsx)("span",{className:"truncate",children:r}),(0,p.jsx)(et.Z,{name:"arrow_outward",size:"small",className:"ml-auto text-muted-foreground"})]})})}),(0,p.jsx)(ed._v,{sideOffset:-4,children:r})]})]})};var st=a(83508);let sa=e=>{let{scanData:t,isUpdating:a=!1}=e,s=(0,st.eP)(t);return(0,p.jsx)("div",{className:"pb-1",children:(0,p.jsxs)("div",{className:"mx-0 flex h-6 items-center gap-2 px-2 text-xs text-muted-foreground md:mx-2 md:h-5",children:[(0,p.jsx)(et.Z,{name:"schedule",size:"small",className:"text-muted-foreground"}),(0,p.jsx)("div",{className:"flex flex-grow items-center justify-between",children:(0,p.jsxs)("span",{children:[(null==s?void 0:s.timestamp)?"Last scan: ".concat(s.timestamp.toDate().toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})):"No scan available",a&&(0,p.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1",children:[(0,p.jsx)(et.Z,{name:"refresh",size:"small",className:"animate-spin"}),"(updating)"]})]})})]})})};var ss=a(26052);let sl=e=>{let{count:t,label:a,variant:s="outline"}=e;return 0===t?null:(0,p.jsxs)(ss.C,{className:"h-5",variant:s,children:[t," ",a,t&&t>1?"s":""]})},sr=()=>{let e=(0,y.Z)("md"),{openSettings:t}=(0,eN.r)(),{securitySummary:a,scanData:s,isLoading:l,isUpdating:r,error:n}=(0,aH.y)(),{errorCount:i,warnCount:o,infoCount:c}=a;if(!(i>0||o>0||c>0)&&!l)return null;let d=i>0?{count:i,label:"Error",variant:"destructive"}:o>0?{count:o,label:"Warning",variant:"warning"}:c>0?{count:c,label:"Info",variant:"secondary"}:null;return n?(0,p.jsx)("div",{className:"pb-2",children:(0,p.jsxs)("div",{className:"mx-0 flex h-10 items-center gap-2 px-2 text-base transition-colors duration-100 ease-in-out md:mx-2 md:h-8 md:text-sm",children:[(0,p.jsx)(et.Z,{name:"warning",size:"small",className:"text-warning-primary"}),(0,p.jsx)("p",{className:"flex flex-grow items-center gap-2 text-base font-medium leading-none text-primary md:text-sm",children:"Security scan unavailable"})]})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eE.VD,{}),(0,p.jsx)("div",{className:"flex flex-col gap-0 pb-0.5 pt-1",children:(0,p.jsxs)("div",{onClick:()=>{t("security")},className:(0,eu.cn)("mx-0 flex h-10 cursor-pointer items-center gap-2 px-2 text-base transition-colors duration-100 ease-in-out md:mx-2 md:h-8 md:text-sm","rounded-lg hover:bg-muted-hover"),children:[(0,p.jsx)(et.Z,{name:"security",size:e?"default":"small",className:"text-muted-foreground"}),(0,p.jsx)("p",{className:"flex flex-grow items-center gap-2 text-base font-medium leading-none text-primary md:text-sm",children:"Security Scan"}),d&&(0,p.jsx)(sl,{count:d.count,label:d.label,variant:d.variant}),(0,p.jsx)(et.Z,{name:"arrow_outward",size:e?"default":"small",className:"text-muted-foreground"})]})}),(0,p.jsx)(sa,{scanData:s,isUpdating:r})]})},sn=e=>{let t,{errors:a,warnings:s,supabaseProjectId:l}=e,r=(0,y.Z)("md"),n=a>0,i=s>0,o=n||i;t=o?n?"".concat(a," Error").concat(a>1?"s":""):"".concat(s," Warning").concat(s>1?"s":""):"No issues detected";let c="https://supabase.com/dashboard/project/".concat(l,"/advisors/security").concat(!n&&i?"?preset=WARN&id=":"");return(0,p.jsxs)("a",{href:c,target:"_blank",rel:"noopener noreferrer","aria-label":"View security issues on Supabase",className:(0,eu.cn)("mx-0 flex h-10 items-center gap-2 rounded-lg px-0 text-base transition-colors duration-100 ease-in-out md:mx-2 md:h-8 md:px-2 md:text-sm",o&&"hover:bg-muted-hover"),children:[(0,p.jsx)(et.Z,{name:"security",size:r?"default":"small",className:"text-muted-foreground"}),(0,p.jsxs)("p",{className:(0,eu.cn)("flex flex-grow items-center gap-2 text-base font-normal leading-none text-primary md:text-sm"),children:["Supabase Security",(0,p.jsx)(ss.C,{className:"h-5",variant:n?"destructive":"warning",children:t})]}),o&&(0,p.jsx)(et.Z,{name:"arrow_outward",size:r?"default":"small",className:"text-muted-foreground"})]})},si=e=>{var t;let{isLoadingSecurityWarnings:a,securityWarnings:s,project:l}=e;return(null==l?void 0:null===(t=l.supabase_project_config)||void 0===t?void 0:t.supabase_project_id)?(0,p.jsx)("div",{className:"pb-2",children:a||!s?(0,p.jsxs)("div",{className:(0,eu.cn)("mx-0 flex h-10 items-center gap-2 px-0 md:mx-2 md:h-8 md:px-2"),children:[(0,p.jsx)("div",{className:"flex w-4 items-center justify-center",children:(0,p.jsx)(eB.O,{className:"h-1.5 w-1.5 rounded-full"})}),(0,p.jsx)(eB.O,{className:"h-3 max-w-48 flex-grow"})]}):(0,p.jsx)(sn,{errors:s.supabase.errors,warnings:s.supabase.warnings,supabaseProjectId:l.supabase_project_config.supabase_project_id})}):null},so=e=>{var t,a;let{disabled:s=!1}=e,[l,r]=(0,g.useState)(!1),[n,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(!1),d=(0,eR.wf)(),u=(0,eR.ZG)(),m=(0,Y.iZ)(e=>e.project),x=(0,h.NL)(),{securitySummary:f,triggerScan:v}=(0,aH.y)(),{securityWarnings:b,isLoadingWarnings:j,hasSecurityIssues:y,hasSupabaseErrors:w}=(0,a7.N)({projectId:null==m?void 0:m.id,supabaseProjectId:null==m?void 0:null===(t=m.supabase_project_config)||void 0===t?void 0:t.supabase_project_id,setShowPublishConfirmDialog:i,shouldFetchSecurityWarnings:!u&&l});(0,g.useEffect)(()=>{l&&u&&v()},[l,u,v]);let N=u?f.errorCount>0:w||!1,{handleSecurityReview:E,isSendingSecurityReview:k,isSecurityReviewDisabled:C,securityReviewDisabledReason:_}=(0,a9.C)({projectId:null==m?void 0:m.id,setIsOpen:r}),{errorMessage:S,isBuildError:T,failedDialogOpen:R,successDialogOpen:I,setFailedDialogOpen:D,setSuccessDialogOpen:P,handlePublish:z,handlePublishAnyway:A,publishMutation:O}=a8({projectId:null==m?void 0:m.id,hasCriticalSecurityIssues:N,setShowPublishConfirmDialog:i,projectUrl:(null==m?void 0:m.url)||void 0}),{showUpdateSuccess:L,isUpToDate:Z,buttonText:M}=a3({project:m,publishMutation:O}),F=!!(null==m?void 0:null===(a=m.supabase_project_config)||void 0===a?void 0:a.supabase_project_id);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(eE.h_,{onOpenChange:r,open:l,children:[(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(eE.$F,{asChild:!0,disabled:s,children:(0,p.jsxs)(Q.z,{id:"publish-menu",variant:"affirmative",size:"sm",className:"gap-1.5",onMouseEnter:()=>{(null==m?void 0:m.id)&&x.prefetchQuery(td.W.securityWarnings({projectId:m.id,enabled:!!m.id&&F}))},children:[(0,p.jsx)(et.Z,{name:"language",size:"small",className:"flex @2xl:hidden"}),(0,p.jsx)("span",{className:"hidden @2xl:flex",children:"Publish"})]})})}),(0,p.jsx)(ed._v,{children:"Publish your project"})]}),(0,p.jsxs)(eE.AW,{className:"z-[1001] min-w-[300px] max-w-[300px] border border-border bg-background p-0 md:max-w-[350px]",align:"end",collisionPadding:8,children:[(0,p.jsx)(t2,{title:(null==m?void 0:m.url)?"Update":"Publish",description:(null==m?void 0:m.url)?"":"Make your project live and track its performance."}),(0,p.jsx)(eE.VD,{}),(null==m?void 0:m.id)&&m.name&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(se,{projectId:m.id,projectName:m.name}),(0,p.jsx)(eE.VD,{})]}),(0,p.jsx)(a5,{project:m,onRenameClick:()=>c(!0)}),F&&y&&!u&&(0,p.jsx)(si,{isLoadingSecurityWarnings:j,securityWarnings:b,project:m}),u&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(sr,{})}),d&&(0,p.jsx)(aq,{project:m}),(0,p.jsx)(eE.VD,{}),(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 pb-2.5 pl-2.5 pr-4 pt-1.5",children:[(0,p.jsx)(t5,{href:"https://docs.lovable.dev/features/deploy"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[!N&&(0,p.jsx)(aW.b,{showTooltip:!!_,tooltipContent:_,children:(0,p.jsxs)(Q.z,{variant:"secondary",size:"sm",onClick:E,disabled:C,loading:k,className:"relative gap-1",children:["Review Security",(0,p.jsx)(aB,{})]})}),(0,p.jsx)(Q.z,{variant:L||Z?"affirmative":N?"secondary":"affirmative",size:"sm",onClick:z,disabled:j||Z,loading:O.isPending,className:(0,eu.cn)((L||Z)&&"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/80"),children:M}),N&&(0,p.jsx)(aW.b,{showTooltip:!!_,tooltipContent:_,children:(0,p.jsxs)(Q.z,{variant:"affirmative",size:"sm",onClick:E,disabled:C,loading:k,className:"relative gap-1",children:["Review Security",(0,p.jsx)(aB,{})]})})]})]})]})]}),(0,p.jsx)(aM,{open:R,onOpenChange:D,errorMessage:S,isBuildError:T}),(0,p.jsx)(aV,{open:I,onOpenChange:P,project:m}),(0,p.jsx)(aG,{open:n,onOpenChange:i,onPublishAnyway:A,onReviewIssues:E,isReviewDisabled:C,isReviewLoading:k,reviewDisabledReason:_}),m&&(0,p.jsx)(ey.i,{project:m,isOpen:o,onClose:()=>c(!1)})]})},sc=(0,g.memo)(function(){let e=(0,t7.G)(),t=(0,eK.hO)(e=>e.projectWorkspace),{hasUnsavedChanges:a}=(0,tu.v)(),s=null==t?void 0:t.disable_publish;return(0,p.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,p.jsx)(az,{hasUnsavedChanges:a}),e&&(0,p.jsx)(t8,{disabled:a}),e&&(0,p.jsx)(aa,{disabled:a}),(0,p.jsx)(t9.Z,{plan:null==t?void 0:t.plan,onClick:()=>{S.ZP.capture(I.VL.UPGRADE.BUTTON_CLICKED.NAV_BAR,{context:I.VL.UPGRADE.CONTEXT.BILLING})}}),(0,p.jsx)(so,{disabled:a||!!s})]})}),sd={Left:()=>(0,p.jsx)("div",{className:"flex items-center space-x-2",children:(0,p.jsx)(eB.O,{className:"h-6 w-20 md:h-7"})}),Center:()=>(0,p.jsx)("div",{className:"flex items-center justify-center space-x-2",children:(0,p.jsx)(eB.O,{className:"h-6 w-48 md:h-7"})}),Right:()=>(0,p.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,p.jsx)(eB.O,{className:"h-6 w-20 md:h-7"})})},su=(0,g.memo)(function(e){let{commitMessage:t}=e;return(0,p.jsxs)("div",{className:"flex h-full min-w-0 items-center gap-2",children:[(0,p.jsx)("span",{className:"text-sm text-muted-foreground",children:"Previewing"}),(0,p.jsx)("div",{className:"flex h-7 min-w-0 items-center rounded-full border border-input px-3 text-sm",children:(0,p.jsx)("p",{className:"min-w-0 max-w-[250px] truncate",children:t})})]})}),sm=()=>{let[e,t]=(0,g.useState)(!1),a=()=>t(!1),{openSettings:s}=(0,eN.r)();return{GithubRequiredDialog:()=>(0,p.jsx)(ee.Vq,{open:e,onOpenChange:t,children:(0,p.jsxs)(ee.cZ,{size:"sm",children:[(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{children:"GitHub Access Required"}),(0,p.jsx)(ee.Be,{children:"This action requires GitHub access. Please connect your GitHub account by clicking the button below."})]}),(0,p.jsxs)(ee.cN,{children:[(0,p.jsx)(ee.GG,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"secondary",children:"Cancel"})}),(0,p.jsxs)(Q.z,{variant:"default",onClick:()=>{a(),s("github")},children:[(0,p.jsx)(ea.xR.GitHub,{className:"h-4 w-4"}),"Connect GitHub"]})]})]})}),isOpen:e,open:()=>t(!0),close:a}},sp=e=>{let{activeEdit:t,project:a}=e,{open:s,GithubRequiredDialog:l}=sm();return(null==t?void 0:t.commit_sha)?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(Q.z,{variant:"secondary",size:"sm",className:"shadow-none",onClick:()=>{var e;let l=(0,ae._J)((null==a?void 0:a.github_repo_name)||"",t.commit_sha||"",null==a?void 0:null===(e=a.github_owner)||void 0===e?void 0:e.name);if(S.ZP.capture(I.SL.CONSOLE.GITHUB_LINK_CLICKED,{hasCustomGithubOwner:(0,ae.gU)(a),context:"nav_bar"}),!(0,ae.gU)(a)){s();return}l&&window.open(l,"_blank")},children:[(0,p.jsx)(ea.xR.GitHub,{className:"h-3.5 w-3.5"}),(0,p.jsx)("span",{className:"hidden sm:flex",children:"View on GitHub"})]}),(0,p.jsx)(l,{})]}):null},sh=e=>{let{projectId:t}=e,{exitView:a}=(0,eA.Z)(),s=(0,f.useRouter)();return(0,p.jsx)(Q.z,{size:"sm",variant:"secondary",type:"button",onClick:()=>{S.ZP.capture(I.SL.CONSOLE.EXITED_VIA_BUTTON,{context:"previewing_view"}),t&&s.replace("/projects/".concat(t)),a()},className:"shadow-none",children:"Exit"})};var sx=a(96659),sf=a(22136);let sg=(0,g.memo)(function(e){let{activeEdit:t}=e,{exitView:a}=(0,eA.Z)(),s=(0,sx.C)(),l=(0,A.bk)(e=>e.isSomeRevertMutationPending),{mutate:r,isPending:n}=(0,sf.I)({onSuccess:a}),{disabled:i,disabledTooltip:o}=(0,g.useMemo)(()=>t?l||s?{disabled:!0,disabledTooltip:(0,p.jsx)("p",{className:"max-w-sm",children:"Cannot revert while there is an active operation in progress (e.g. chat or revert). Please wait for the operation to complete."})}:{disabled:!1,disabledTooltip:void 0}:{disabled:!0,disabledTooltip:(0,p.jsx)("p",{className:"max-w-sm",children:"There is no selected edit to revert to."})},[t,l,s]);return(0,p.jsx)(aW.b,{showTooltip:i,tooltipContent:o,children:(0,p.jsx)(Q.z,{variant:"affirmative",className:"gap-1",size:"sm",loading:n,disabled:!t||l||s,type:"button",onClick:()=>{S.ZP.capture(I.SL.CONSOLE.RESTORE_VERSION_CLICKED,{context:"previewing_view"}),r({edit:t})},children:n?(0,p.jsx)("span",{children:"Restoring..."}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:"Restore"}),(0,p.jsx)("span",{className:"hidden sm:flex",children:"this version"})]})})})});sg.displayName="RestoreCommitButton";let sv=(0,g.memo)(function(e){let{activeEdit:t}=e;return(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(sh,{}),(0,p.jsx)(sg,{activeEdit:t})]})}),sb=(0,g.memo)(function(e){let{projectName:t,createdBy:a}=e;return(0,p.jsxs)("div",{className:"flex h-full items-center truncate",children:[(0,p.jsx)("p",{className:"font-medium",children:t}),"\xa0by\xa0",(0,p.jsx)(tQ.default,{href:"/@".concat(a),children:(0,p.jsx)("p",{className:"font-medium",children:a})})]})}),sj=(0,g.memo)(function(){let{setIsRemixDialogOpen:e}=(0,Y.d2)(),{canEdit:t}=(0,w.t)(),a=(0,Y.iZ)(e=>e.project),{isAuthenticated:s}=(0,b.Eu)(),l=(0,f.useRouter)(),r=!!(null==a?void 0:a.is_supabase_enabled)||!!(null==a?void 0:a.supabase_project_config),n=t||!r,i=(0,g.useCallback)(()=>{if(!s){l.push("/login?redirect=".concat(window.location.pathname));return}e(!0)},[s,l,e]);return(0,p.jsxs)(ed.u,{instant:!0,children:[(0,p.jsx)(ed.aJ,{className:"cursor-default",children:(0,p.jsxs)(Q.z,{className:"flex items-center gap-1",onClick:i,disabled:!n,size:"sm",children:[(0,p.jsx)(et.Z,{name:"shuffle",size:"small"}),"Remix"]})}),(0,p.jsx)(ed._v,{className:"max-w-xs",children:n?(0,p.jsx)("p",{children:"Remix this project"}):(0,p.jsx)("p",{children:"This project is connected to Supabase. To remix, you must be a collaborator or member of this workspace."})})]})}),sy=()=>{let{canEdit:e,isLoading:t}=(0,w.t)(),a=(0,Y.iZ)(e=>e.project),{isAuthenticated:s}=(0,b.Eu)(),l=(0,z.aK)(e=>e.edits),r=(0,en.VJ)(e=>e.activeEditId),n=r?l[r]:null,i=(0,$.c)(e=>e.hasFetchedCollaborators),{activeView:o}=(0,eA.Z)();return(0,g.useMemo)(()=>a?t||s&&!i?{center:(0,p.jsx)(sd.Center,{}),right:(0,p.jsx)(sd.Right,{}),left:(0,p.jsx)(sd.Left,{})}:n&&"snapshot"===o?{center:(0,p.jsx)(su,{commitMessage:n.commit_message}),right:(0,p.jsx)(sv,{activeEdit:n}),left:(0,p.jsx)(sp,{activeEdit:n,project:a})}:e?{center:(0,p.jsx)(tB,{}),right:(0,p.jsx)(sc,{}),left:(0,p.jsx)(tH,{})}:{center:(0,p.jsx)(sb,{projectName:a.name,createdBy:a.created_by}),right:(0,p.jsx)(sj,{}),left:null}:{center:null,right:null,left:null},[a,t,s,i,n,o,e])},sw=(0,g.memo)(e=>{let{isSidebarOpen:t,toggleSidebar:a,openSidebar:s,hideButtons:l}=e,[r,n]=(0,ec.QJ)(e$.I8),{left:i,center:o,right:c}=sy(),d=(0,eJ.SE)(e=>e.panelSizes)[0],u=(0,y.Z)("md");return(0,p.jsxs)("nav",{className:(0,eu.cn)("relative hidden min-h-12 w-full shrink-0 flex-col items-center gap-2 px-4 py-2 md:flex md:h-12 md:flex-row md:gap-0 md:py-0"),children:[(0,p.jsx)(eX,{className:"flex w-full shrink-0 items-center",children:(0,p.jsxs)("div",{className:"relative flex w-full flex-shrink-0 items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex-basis-0 flex-grow-1 flex flex-shrink-0 items-center gap-2",style:{width:u||0===d?"auto":"".concat(d||eq.DEFAULT_SIDEBAR_SIZE,"%")},children:[(0,p.jsx)(eH,{}),!l&&(0,p.jsxs)("div",{className:"flex flex-row-reverse gap-2 sm:ml-auto sm:mr-4 md:flex-row",children:[(0,p.jsx)(ep,{openSidebar:s}),(0,p.jsx)(eY,{isSidebarOpen:t,toggleSidebar:a})]})]}),(0,p.jsxs)("div",{className:"relative flex flex-shrink flex-grow items-center justify-between gap-1 overflow-x-auto pl-2 @container md:ml-1 md:gap-2.5 md:pl-0",children:[(0,p.jsx)("div",{className:"hidden w-full md:flex",children:i}),t&&(0,p.jsx)("div",{className:"hidden md:flex",children:o}),(0,p.jsx)("div",{className:"ml-auto flex w-full justify-end md:ml-0",children:c})]})]})}),(0,p.jsxs)("div",{className:"flex min-h-8 w-full justify-between gap-2 md:hidden",children:[(0,p.jsx)("div",{className:"flex min-w-0 flex-1 items-center",children:o}),(0,p.jsx)("div",{className:"flex items-center",children:i})]}),!t&&(0,p.jsx)("div",{className:"absolute left-1/2 top-1/2 hidden -translate-x-1/2 -translate-y-1/2 md:flex",children:o})]})});sw.displayName="EditorNav";var sN=()=>{let e=(0,Y.iZ)(e=>e.project),t=(0,A.bk)(e=>e.isSendChatMessageMutationPending),a=null==e?void 0:e.available_project_migrations;return(0,g.useMemo)(()=>null!=a&&!!a.length&&a.length>0&&!t,[a,t])},sE=a(26696),sk=a(10178);let sC=()=>{let e=(0,Y.iZ)(e=>e.project),t=(0,B.D)(),a=(0,A.bk)(e=>e.isSendChatMessageMutationPending),s=(0,A.pY)(),l=null==e?void 0:e.available_project_migrations,[r,n]=(0,g.useState)(!(null==l?void 0:l.length));(0,g.useEffect)(()=>{(null==l?void 0:l.length)||n(!1),(null==l?void 0:l.length)&&!a&&n(!0)},[null==l?void 0:l.length,a]);let{mutateAsync:i,isPending:o}=(0,sk.mo)({projectId:t,onSuccess:async()=>{v.Am.success("Project Updated")},onSubmit:()=>{}}),c=async()=>{try{var a;await i({body:{id:(0,O.Fd)(),message:"Please update the project template to the latest Lovable version to enable new features.",mode:sE.S.INSTANT,contains_error:!1,project_migration_ids:null==e?void 0:null===(a=e.available_project_migrations)||void 0===a?void 0:a.map(e=>e.id)},projectId:t})}catch(e){R.logging.error(e),v.Am.error("Error",{description:"There was an error sending the project update request."})}};return e&&r?(0,p.jsxs)(ee.cZ,{children:[(0,p.jsx)(ee.fK,{children:(0,p.jsx)(ee.$N,{className:"text-xl font-medium",children:"Project out of date"})}),(0,p.jsxs)(ee.Be,{className:"max-h-[80vh] overflow-y-auto scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]",children:[l&&(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsx)("h3",{className:"text-lg font-medium",children:"Available Updates"}),(0,p.jsx)("ul",{className:"space-y-3",children:l.map((e,t)=>(0,p.jsxs)("li",{className:"border-l-2 border-primary/20 pl-4",children:[(0,p.jsx)("h4",{className:"font-medium",children:e.name}),(0,p.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:e.description})]},t))})]}),(0,p.jsx)("p",{className:"mt-4 text-sm first-of-type:mt-0",children:"The AI assistant will guide you through the necessary steps to complete the migration."})]}),(0,p.jsxs)(ee.cN,{children:[(0,p.jsx)(ee.GG,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"outline",children:"Close"})}),(0,p.jsx)(Q.z,{disabled:s,loading:o,onClick:c,children:"Update Project"})]})]}):null};var s_=a(9408),sS=a(56286);let sT=e=>{let{className:t,...a}=e;return(0,p.jsx)(sS.eh,{className:(0,eu.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a})},sR=sS.s_,sI=e=>{let{tooltip:t,className:a,...s}=e,[l,r]=(0,g.useState)(!1),[n,i]=(0,g.useState)(!1),[o,c]=(0,g.useState)(0),[d,u]=(0,g.useState)(0);return(0,g.useEffect)(()=>{var e;let t;let a=(e=e=>{c(e.clientY)},function(){for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];clearTimeout(t),t=setTimeout(()=>e.apply(this,s),100)});return window.addEventListener("mousemove",a),()=>{window.removeEventListener("mousemove",a)}},[]),(0,p.jsx)(sS.OT,{className:(0,eu.cn)("relative -mr-px mb-[20px] mt-[12px] flex w-[2px] cursor-col-resize items-center justify-center rounded-full transition-colors duration-300 ease-in-out after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 hover:bg-accent-primary focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",a,l?"bg-accent-primary":""),onDragging:e=>{r(e)},...s,children:t&&(0,p.jsxs)(ed.u,{disableHoverableContent:!0,open:!l&&n,onOpenChange:e=>{i(e),e&&u(o)},children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)("div",{className:"absolute -left-[2px] -right-[2px] bottom-0 top-0 z-[12000]"})}),(0,p.jsx)(ed._v,{side:"right",align:"start",alignOffset:d>0?d-68:0,children:t})]})})};function sD(){let e=(0,ez.f6)(e=>e.activeMode);return(0,g.useCallback)(t=>{let a=(0,ez.XE)(e);document.querySelectorAll("iframe#".concat(a)).forEach(e=>{e.contentWindow&&e.contentWindow.postMessage(t,"*")})},[e])}(s=c||(c={})).ELEMENT_CLICKED="ELEMENT_CLICKED",s.TOGGLE_SELECTOR="TOGGLE_SELECTOR",s.UPDATE_SELECTED_ELEMENTS="UPDATE_SELECTED_ELEMENTS",s.SELECTOR_STATE_RESPONSE="SELECTOR_STATE_RESPONSE",s.TOGGLE_PICK_AND_EDIT_REQUESTED="TOGGLE_PICK_AND_EDIT_REQUESTED",s.REQUEST_PICKER_STATE="REQUEST_PICKER_STATE",s.SELECTOR_SCRIPT_LOADED="SELECTOR_SCRIPT_LOADED",s.GET_SELECTOR_STATE="GET_SELECTOR_STATE",s.REQUEST_SELECTED_ELEMENTS="REQUEST_SELECTED_ELEMENTS",s.SET_ELEMENT_CONTENT="SET_ELEMENT_CONTENT",s.SET_ELEMENT_ATTRS="SET_ELEMENT_ATTRS",s.SET_STYLESHEET="SET_STYLESHEET",s.EDIT_TEXT_REQUESTED="EDIT_TEXT_REQUESTED",s.ELEMENT_DOUBLE_CLICKED="ELEMENT_DOUBLE_CLICKED",s.ELEMENT_TEXT_UPDATED="ELEMENT_TEXT_UPDATED",s.COMPONENT_TREE="COMPONENT_TREE",s.REQUEST_COMPONENT_TREE="REQUEST_COMPONENT_TREE",s.HOVER_ELEMENT_REQUESTED="HOVER_ELEMENT_REQUESTED",s.UNHOVER_ELEMENT_REQUESTED="UNHOVER_ELEMENT_REQUESTED",s.KEYBIND="KEYBIND",s.DUPLICATE_ELEMENT_REQUESTED="DUPLICATE_ELEMENT_REQUESTED",s.GET_PARENT_ELEMENT="GET_PARENT_ELEMENT",s.PARENT_ELEMENT="PARENT_ELEMENT",s.SCROLL_HAPPENED="SCROLL_HAPPENED";var sP=a(56792),sz=a(48393),sA=a(23519);let sO=()=>{let{ast:e}=(0,tu.v)(),t=(0,to.A7)(e=>e.addPendingChange);return(0,g.useCallback)((a,s)=>{var l,r;let n=e.find(e=>e.filePath===a.filePath);if(!n){R.logging.error("Node not found",{element:a}),v.Am.error("Node not found",{description:"Node not found"});return}let i=!1;if((0,sA.default)(n.ast,{JSXElement(e){var t;(null===(t=e.node.loc)||void 0===t?void 0:t.start.line)===a.lineNumber&&(s(e.node,e),i=!0,e.stop())}}),!i)return;let o=(l=n.ast,r={sourceMaps:!0,sourceFileName:n.filePath},(0,sz.default)(l,r,void 0).code);t({path:n.filePath,content:o})},[t,e,v.Am])};var sL=a(33474);(l=d||(d={})).TEXT_CHANGE="TEXT_CHANGE",l.IMAGE_CHANGE="IMAGE_CHANGE",l.REMOVE_NODE="REMOVE_NODE",l.CLASS_NAME_UPDATE="CLASS_NAME_UPDATE",l.CLASS_NAME_SET="CLASS_NAME_SET",l.DUPLICATE_NODE="DUPLICATE_NODE";let sZ=e=>{let{visibleMode:t}=e,a=(0,ez.XE)(t);return document.querySelector("iframe#".concat(a))},sM=e=>{let{elementBounds:t,iframe:a,elementSpacing:s,elementHeight:l}=e,r=t.y+t.height+s;if(r+l+16<=a.offsetHeight)return r;let n=t.y-l-s;return n>=16?n:t.y+8},sF=e=>{let{elementBounds:t,iframe:a,elementWidth:s}=e,l=t.x+t.width/2-s/2;return l+s>a.offsetWidth-16?a.offsetWidth-s-16:l<16?16:l},sU=e=>{let{iframeRect:t,x:a,y:s}=e;return{x:t.x+a,y:t.y+s}},sK=e=>{let{elementBounds:t,visibleMode:a,showVisualEditsPanel:s}=e,l=sZ({visibleMode:a});if(!l)return;let r=l.getBoundingClientRect(),n=sM({elementBounds:t,iframe:l,elementHeight:40,elementSpacing:8});s(sU({iframeRect:r,x:sF({elementBounds:t,iframe:l,elementWidth:400}),y:n}))},sV={current:!1},sW=e=>{let{isLocked:t,elementType:a,payload:s,ast:l}=e;return!t&&"button"!==a&&(0,sP.H2)({...s,content:null},l)},sB=e=>{let{payload:t,sendIframeMessage:a}=e;a({type:c.EDIT_TEXT_REQUESTED,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col}}})};function sG(){let{isLocked:e}=(0,sL.i)(),{ast:t,setHistory:a}=(0,tu.v)(),s=(0,e6.UC)(e=>e.isPickAndEditActive),{setIsPickAndEditActive:l,showFloatingInput:r,showVisualEditsPanel:n}=(0,e6.S9)(),{store:i}=(0,ez.My)(),o=(0,e6.UC)(e=>e.selectedElements),{setSelectedElements:u,setCustomPromptValue:m,closeVisualEditsPanel:p}=(0,e6.S9)(),h=sD(),x=(0,g.useCallback)(e=>{let{isPickAndEditActive:t,selectedElements:a}=e;h({type:c.TOGGLE_SELECTOR,payload:{isActive:t}}),h({type:c.UPDATE_SELECTED_ELEMENTS,payload:a})},[h]),f=(0,g.useCallback)(()=>{x({isPickAndEditActive:s,selectedElements:o})},[s,o,x]),b=(0,g.useCallback)(()=>{l(!0),x({isPickAndEditActive:!0,selectedElements:o})},[l,x,o]),j=(0,g.useCallback)(()=>{l(!1),x({isPickAndEditActive:!1,selectedElements:o})},[l,x,o]),y=(0,g.useCallback)(()=>{s?j():b()},[s,b,j]),w=sO();(0,g.useEffect)(()=>{h({type:c.TOGGLE_SELECTOR,payload:{isActive:s}})},[h,s]);let N=(0,g.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,a=e.data.lineNumber,s=e.data.col;t&&a&&s&&h({type:c.HOVER_ELEMENT_REQUESTED,payload:{id:{filePath:t,lineNumber:a,col:s}}})},[h]),E=(0,g.useCallback)(e=>{if(!e.data)return;let t=e.data.filePath,a=e.data.lineNumber,s=e.data.col;t&&a&&s&&h({type:c.UNHOVER_ELEMENT_REQUESTED,payload:{id:{filePath:t,lineNumber:a,col:s}}})},[h]),{setActiveEditContent:k}=(0,e6.S9)(),C=(0,g.useCallback)(e=>{if(!e){v.Am.error("Failed to select element");return}S.ZP.capture("visual_edits:element_selected",{type:e.elementType});try{var t;let a=e=>e?JSON.parse(decodeURIComponent(e.toString())):null,s={...e,content:a(e.content),children:null===(t=e.children)||void 0===t?void 0:t.map(e=>({...e,content:a(e.content)}))};k(null),u([s]),h({type:c.UPDATE_SELECTED_ELEMENTS,payload:[s]})}catch(t){v.Am.error("Error processing element data",{description:t instanceof Error?t.message:"Unknown error"}),R.logging.error("Error in handleElementClick",{error:t,elementData:e})}},[u,h]),_=(0,g.useRef)();return(0,g.useEffect)(()=>{_.current=r=>{switch(r.data.type){case"ELEMENT_CLICKED":{let a=r.data.payload,s=r.data.rect,l=i.getState().visibleMode;s&&(m(""),sK({elementBounds:s,visibleMode:l,showVisualEditsPanel:n})),sW({isLocked:e,elementType:a.elementType,payload:a,ast:t})&&sB({payload:a,sendIframeMessage:h}),C(r.data.payload)}break;case"TOGGLE_PICK_AND_EDIT_REQUESTED":case"ELEMENT_DOUBLE_CLICKED":break;case"REQUEST_PICKER_STATE":case"REQUEST_SELECTED_ELEMENTS":h({type:c.UPDATE_SELECTED_ELEMENTS,payload:o});break;case"SELECTOR_SCRIPT_LOADED":f();break;case"GET_SELECTOR_STATE":h({type:c.SELECTOR_STATE_RESPONSE,payload:{isActive:s}});break;case"ELEMENT_TEXT_UPDATED":{S.ZP.capture("visual_edits:element_text_updated");let e=r.data.payload,t=o.find(t=>t.filePath===e.id.filePath&&t.lineNumber===e.id.lineNumber);if(!t)return;let s={...t,textContent:e.content};u([s,...o.filter(e=>e.filePath!==t.filePath||e.lineNumber!==t.lineNumber)]),w(s,t=>(0,sP.Rw)(t,e.content)),a(a=>[...a,{type:d.TEXT_CHANGE,element:s,oldText:t.textContent||"",newText:e.content}]);break}case"SELECTOR_SCRIPT_LOADED":h({type:c.TOGGLE_SELECTOR,payload:{isActive:!0}}),l(!0);break;case"PARENT_ELEMENT":{S.ZP.capture("visual_edits:get_parent_element");let e=r.data.payload;e&&C(e);break}case c.SCROLL_HAPPENED:p()}}},[t,b,j,C,f,e,s,w,o,h,a,l,u,r,i,m,n,p]),(0,g.useEffect)(()=>{if(!sV.current){let e=e=>{var t;null===(t=_.current)||void 0===t||t.call(_,e)};return window.addEventListener("message",e),sV.current=!0,()=>{window.removeEventListener("message",e),sV.current=!1}}},[]),(0,eo.y1)("esc",e=>{e.preventDefault(),e.stopPropagation()},{enableOnFormTags:!0},[]),(0,g.useEffect)(()=>{h({type:c.UPDATE_SELECTED_ELEMENTS,payload:o}),f()},[f,o,h,x]),{isPickAndEditActive:s,togglePickAndEdit:y,handleDeactivatePickAndEdit:j,selectedElements:o,hoverElement:N,unhoverElement:E,canEdit:!e}}let sH=()=>{let{activeView:e}=(0,eA.Z)(),t=(0,g.useRef)(e),a=(0,e6.UC)(e=>e.isVisualEditingActive),s=(0,e6.UC)(e=>e.selectedElements),l=(0,e6.UC)(e=>e.visualEditsPanelState),r=(0,e6.UC)(e=>e.lastPanelPosition),{showVisualEditsPanel:n}=(0,e6.S9)(),i=sD();(0,g.useEffect)(()=>{"codeEditor"===t.current&&("preview"===e||"snapshot"===e)&&(i({type:c.UPDATE_SELECTED_ELEMENTS,payload:s}),a&&s.length>0&&!l.isOpen&&r&&n(r)),t.current=e},[e,a,s,l.isOpen,r,i,n])};var sJ=a(62196),sq=a(31194),sX=a(98808),s$=a.n(sX),sY=a(4490),sQ=a.n(sY),s0=a(57307),s1=a(43769),s2=a.n(s1);class s5 extends Error{constructor(e){super("Unable to identify the plugin based on ".concat(e,". This could be due to a misspelling, an invalid plugin, or the plugin is not yet included in the supported plugins list.")),this.name="PluginNotFoundException"}}let s4=new Map([["w",[{scaleKey:"width",ns:"width",class:["width"],type:"length"}]],["min-w",[{scaleKey:"minWidth",ns:"minWidth",class:["min-width"],type:"length"}]],["max-w",[{scaleKey:"maxWidth",ns:"maxWidth",class:["max-width"],type:"length"}]],["h",[{scaleKey:"height",ns:"height",class:["height"],type:"length"}]],["min-h",[{scaleKey:"minHeight",ns:"minHeight",class:["min-height"],type:"length"}]],["max-h",[{scaleKey:"maxHeight",ns:"maxHeight",class:["max-height"],type:"length"}]],["size",[{scaleKey:"size",ns:"size",class:["width","height"],type:"length"}]],["m",[{scaleKey:"margin",ns:"margin",class:["margin"],type:"length",supportNegative:!0}]],["mx",[{scaleKey:"margin",ns:"marginX",class:["margin-left","margin-right"],type:"length",supportNegative:!0}]],["my",[{scaleKey:"margin",ns:"marginY",class:["margin-top","margin-bottom"],type:"length",supportNegative:!0}]],["mt",[{scaleKey:"margin",ns:"marginTop",class:["margin-top"],type:"length",supportNegative:!0}]],["mr",[{scaleKey:"margin",ns:"marginRight",class:["margin-right"],type:"length",supportNegative:!0}]],["mb",[{scaleKey:"margin",ns:"marginBottom",class:["margin-bottom"],type:"length",supportNegative:!0}]],["ml",[{scaleKey:"margin",ns:"marginLeft",class:["margin-left"],type:"length",supportNegative:!0}]],["p",[{scaleKey:"padding",ns:"padding",class:["padding"],type:"length"}]],["px",[{scaleKey:"padding",ns:"paddingX",class:["padding-left","padding-right"],type:"length"}]],["py",[{scaleKey:"padding",ns:"paddingY",class:["padding-top","padding-bottom"],type:"length"}]],["pt",[{scaleKey:"padding",ns:"paddingTop",class:["padding-top"],type:"length"}]],["pr",[{scaleKey:"padding",ns:"paddingRight",class:["padding-right"],type:"length"}]],["pb",[{scaleKey:"padding",ns:"paddingBottom",class:["padding-bottom"],type:"length"}]],["pl",[{scaleKey:"padding",ns:"paddingLeft",class:["padding-left"],type:"length"}]],["text",[{scaleKey:"fontSize",ns:"fontSize",class:["font-size"],type:"length"},{scaleKey:"textColor",ns:"textColor",class:["color"],type:"color"}]],["indent",[{scaleKey:"textIndent",ns:"textIndent",class:["text-indent"],type:"length",supportNegative:!0}]],["underline-offset",[{scaleKey:"textUnderlineOffset",ns:"textUnderlineOffset",class:["text-underline-offset"],type:"number"}]],["decoration",[{scaleKey:"textDecorationThickness",ns:"textDecorationThickness",class:["text-decoration-thickness"],type:"number"},{scaleKey:"textDecorationColor",ns:"textDecorationColor",class:["text-decoration-color"],type:"color"}]],["font",[{scaleKey:"fontWeight",ns:"fontWeight",class:["font-weight"],type:"number"},{scaleKey:"fontFamily",ns:"fontFamily",class:["font-family"],type:"family-name"}]],["leading",[{scaleKey:"lineHeight",ns:"lineHeight",class:["line-height"],type:"number"}]],["tracking",[{scaleKey:"letterSpacing",ns:"letterSpacing",class:["letter-spacing"],type:"length",supportNegative:!0}]],["bg",[{scaleKey:"backgroundImage",ns:"backgroundImage",class:["background-image"],type:"image"},{scaleKey:"backgroundPosition",ns:"backgroundPosition",class:["background-position"],type:"position"},{scaleKey:"backgroundSize",ns:"backgroundSize",class:["background-size"],type:"bg-size"},{scaleKey:"backgroundColor",ns:"backgroundColor",class:["background-color"],type:"color"}]],["from",[{scaleKey:"gradientColorStops",ns:"gradientStopsFrom",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsFromPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["to",[{scaleKey:"gradientColorStops",ns:"gradientStopsTo",class:["--tw-gradient-to","--tw-gradient-to-position"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsToPosition",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["via",[{scaleKey:"gradientColorStops",ns:"gradientStopsVia",class:["--tw-gradient-from"],type:"color"},{scaleKey:"gradientColorStopPositions",ns:"gradientStopsViaPositions",class:["--tw-gradient-from","--tw-gradient-from-position"],type:"percentage"}]],["fill",[{scaleKey:"fill",ns:"fillColor",class:["fill"],type:"color"}]],["stroke",[{scaleKey:"strokeWidth",ns:"strokeWidth",class:["stroke-width"],type:"line-width"},{scaleKey:"stroke",ns:"strokeColor",class:["border-color"],type:"color"}]],["border",[{scaleKey:"borderWidth",ns:"borderWidth",class:["border-width"],type:"line-width"},{scaleKey:"borderColor",ns:"borderColor",class:["border-color"],type:"color"}]],["ring",[{scaleKey:"ringWidth",ns:"ringWidth",class:["box-shadow"],type:"line-width"},{scaleKey:"ringColor",ns:"ringColor",class:["--tw-ring-color"],type:"color"}]],["ring-offset",[{scaleKey:"ringOffsetWidth",ns:"ringOffsetWidth",class:["--tw-ring-offset-width"],type:"line-width"},{scaleKey:"ringOffsetColor",ns:"ringOffsetColor",class:["--tw-ring-offset-color"],type:"color"}]],["rounded",[{scaleKey:"borderRadius",ns:"borderRadius",class:["border-radius"],type:"length"}]],["rounded-tl",[{scaleKey:"borderRadius",ns:"borderTopLeftRadius",class:["border-top-left-radius"],type:"length"}]],["rounded-tr",[{scaleKey:"borderRadius",ns:"borderTopRightRadius",class:["border-top-right-radius"],type:"length"}]],["rounded-br",[{scaleKey:"borderRadius",ns:"borderBottomRightRadius",class:["border-bottom-right-radius"],type:"length"}]],["rounded-bl",[{scaleKey:"borderRadius",ns:"borderBottomLeftRadius",class:["border-bottom-left-radius"],type:"length"}]],["flex",[{scaleKey:"flex",ns:"flex",class:["flex"],type:"number"}]],["basis",[{scaleKey:"flexBasis",ns:"flexBasis",class:["flex-basis"],type:"length"}]],["grid-cols",[{scaleKey:"gridTemplateColumns",ns:"gridTemplateColumns",class:["grid-template-columns"],type:"number"}]],["grid-rows",[{scaleKey:"gridTemplateRows",ns:"gridTemplateRows",class:["grid-template-rows"],type:"number"}]],["gap",[{scaleKey:"gap",ns:"gap",class:["gap"],type:"length"}]],["gap-x",[{scaleKey:"gap",ns:"gapX",class:["gap"],type:"length"}]],["gap-y",[{scaleKey:"gap",ns:"gapY",class:["gap"],type:"length"}]],["divide-x",[{scaleKey:"divideWidth",ns:"divideX",class:["border-left-width","border-right-width"],type:"length"}]],["divide-y",[{scaleKey:"divideWidth",ns:"divideY",class:["border-top-width","border-bottom-width"],type:"length"}]],["divide",[{scaleKey:"divideColor",ns:"divideColor",class:["--tw-divide-color"],type:"color"}]],["divide-opacity",[{scaleKey:"divideOpacity",ns:"divideOpacity",class:["--tw-divide-opacity"],type:"number"}]],["col",[{scaleKey:"gridColumn",ns:"gridColumn",class:["grid-column"],type:"number"}]],["row",[{scaleKey:"gridRow",ns:"gridRow",class:["grid-row"],type:"number"}]],["space-x",[{scaleKey:"spacing",ns:"spaceX",class:["margin-left"],type:"number",supportNegative:!0}]],["space-y",[{scaleKey:"spacing",ns:"spaceY",class:["margin-top"],type:"number",supportNegative:!0}]],["opacity",[{scaleKey:"opacity",ns:"opacity",class:["opacity"],type:"number"}]],["shadow",[{scaleKey:"boxShadow",ns:"boxShadow",class:["box-shadow"],type:"length"},{scaleKey:"boxShadowColor",ns:"boxShadowColor",class:["box-shadow"],type:"color"}]],["transition",[{scaleKey:"transitionProperty",ns:"transitionProperty",class:["transition-property"],type:"named"}]],["duration",[{scaleKey:"transitionDuration",ns:"transitionDuration",class:["transition-duration"],type:"number"}]],["delay",[{scaleKey:"transitionDelay",ns:"transitionDelay",class:["transition-delay"],type:"number"}]],["scale",[{scaleKey:"scale",ns:"scale",class:["scale"],type:"number",supportNegative:!0}]],["rotate",[{scaleKey:"rotate",ns:"rotate",class:["rotate"],type:"angle",supportNegative:!0}]],["translate",[{scaleKey:"translate",ns:"translate",class:["transform"],type:"length",supportNegative:!0}]],["translate-y",[{scaleKey:"translate",ns:"translateY",class:["transform"],type:"length",supportNegative:!0}]],["translate-x",[{scaleKey:"translate",ns:"translateX",class:["transform"],type:"length",supportNegative:!0}]],["skew",[{scaleKey:"skew",ns:"skew",class:["skew"],type:"angle",supportNegative:!0}]],["z",[{scaleKey:"zIndex",ns:"zIndex",class:["z-index"],type:"number",supportNegative:!0}]],["inset",[{scaleKey:"inset",ns:"inset",class:["inset"],type:"length",supportNegative:!0}]],["inset-x",[{scaleKey:"inset",ns:"insetX",class:["left","right"],type:"length",supportNegative:!0}]],["inset-y",[{scaleKey:"inset",ns:"insetY",class:["top","bottom"],type:"length",supportNegative:!0}]],["top",[{scaleKey:"inset",ns:"positionTop",class:["top"],type:"length",supportNegative:!0}]],["right",[{scaleKey:"inset",ns:"positionRight",class:["right"],type:"length",supportNegative:!0}]],["bottom",[{scaleKey:"inset",ns:"positionBottom",class:["bottom"],type:"length",supportNegative:!0}]],["left",[{scaleKey:"inset",ns:"positionLeft",class:["left"],type:"length",supportNegative:!0}]],["start",[{scaleKey:"inset",ns:"insetInlineStart",class:["inset-inline-start"],type:"length",supportNegative:!0}]],["end",[{scaleKey:"inset",ns:"insetInlineEnd",class:["inset-inline-end"],type:"length",supportNegative:!0}]],["order",[{scaleKey:"order",ns:"order",class:["order"],type:"length",supportNegative:!0}]],["blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["brightness",[{scaleKey:"brightness",ns:"brightness",class:["filter"],type:"number"}]],["contrast",[{scaleKey:"contrast",ns:"contrast",class:["filter"],type:"number"}]],["drop-shadow",[{scaleKey:"dropShadow",ns:"dropShadow",class:["filter"],type:"number"}]],["hue-rotate",[{scaleKey:"hueRotate",ns:"hueRotate",class:["filter"],type:"number"}]],["saturate",[{scaleKey:"saturate",ns:"saturate",class:["filter"],type:"number"}]],["backdrop-blur",[{scaleKey:"blur",ns:"blur",class:["filter"],type:"number"}]],["backdrop-brightness",[{scaleKey:"backdropBrightness",ns:"backdropBrightness",class:["backdrop-filter"],type:"number"}]],["backdrop-contrast",[{scaleKey:"backdropContrast",ns:"backdropContrast",class:["backdrop-filter"],type:"number"}]],["backdrop-drop-shadow",[{scaleKey:"backdropDropShadow",ns:"backdropDropShadow",class:["backdrop-filter"],type:"number"}]],["backdrop-hue-rotate",[{scaleKey:"backdropHueRotate",ns:"backdropHueRotate",class:["backdrop-filter"],type:"number"}]],["backdrop-saturate",[{scaleKey:"backdropSaturate",ns:"backdropSaturate",class:["backdrop-filter"],type:"number"}]]]),s3=new Map([["border-solid",{class:["border-style"],value:"solid",ns:"borderStyle"}],["border-dashed",{class:["border-style"],value:"dashed",ns:"borderStyle"}],["border-dotted",{class:["border-style"],value:"dotted",ns:"borderStyle"}],["border-double",{class:["border-style"],value:"double",ns:"borderStyle"}],["border-none",{class:["border-style"],value:"none",ns:"borderStyle"}],["ring-inset",{class:["--tw-ring-inset"],value:"inset",ns:"ring"}],["divide-solid",{class:["divide-style"],value:"solid",ns:"divideStyle"}],["divide-dashed",{class:["divide-style"],value:"dashed",ns:"divideStyle"}],["divide-dotted",{class:["divide-style"],value:"dotted",ns:"divideStyle"}],["divide-double",{class:["divide-style"],value:"double",ns:"divideStyle"}],["divide-none",{class:["divide-style"],value:"none",ns:"divideStyle"}],["block",{class:["display"],value:"block",ns:"display"}],["inline-block",{class:["display"],value:"inline-block",ns:"display"}],["inline",{class:["display"],value:"inline",ns:"display"}],["flex",{class:["display"],value:"flex",ns:"display"}],["grid",{class:["display"],value:"grid",ns:"display"}],["hidden",{class:["display"],value:"none",ns:"display"}],["table",{class:["display"],value:"table",ns:"display"}],["table-row",{class:["display"],value:"table-row",ns:"display"}],["table-cell",{class:["display"],value:"table-cell",ns:"display"}],["contents",{class:["display"],value:"contents",ns:"display"}],["list-item",{class:["display"],value:"list-item",ns:"display"}],["flow-root",{class:["display"],value:"flow-root",ns:"display"}],["visible",{class:["visibility"],value:"visible",ns:"visibility"}],["invisible",{class:["visibility"],value:"hidden",ns:"visibility"}],["hyphens-none",{class:["hyphens"],value:"none",ns:"hyphens"}],["hyphens-manual",{class:["hyphens"],value:"manual",ns:"hyphens"}],["hyphens-auto",{class:["hyphens"],value:"auto",ns:"hyphens"}],["break-normal",{class:["word-break","overflow-wrap"],value:"normal",ns:"wordBreak"}],["break-words",{class:["overflow-wrap"],value:"break-word",ns:"wordBreak"}],["break-all",{class:["word-break"],value:"break-all",ns:"wordBreak"}],["break-keep",{class:["word-break"],value:"keep-all",ns:"wordBreak"}],["whitespace-normal",{class:["white-space"],value:"normal",ns:"whitespace"}],["whitespace-nowrap",{class:["white-space"],value:"nowrap",ns:"whitespace"}],["whitespace-pre",{class:["white-space"],value:"pre",ns:"whitespace"}],["whitespace-pre-line",{class:["white-space"],value:"pre-line",ns:"whitespace"}],["whitespace-pre-wrap",{class:["white-space"],value:"pre-wrap",ns:"whitespace"}],["whitespace-break-spaces",{class:["white-space"],value:"break-spaces",ns:"whitespace"}],["static",{class:["position"],value:"static",ns:"position"}],["fixed",{class:["position"],value:"fixed",ns:"position"}],["absolute",{class:["position"],value:"absolute",ns:"position"}],["relative",{class:["position"],value:"relative",ns:"position"}],["sticky",{class:["position"],value:"sticky",ns:"position"}],["overflow-auto",{class:["overflow"],value:"auto",ns:"overflow"}],["overflow-hidden",{class:["overflow"],value:"hidden",ns:"overflow"}],["overflow-visible",{class:["overflow"],value:"visible",ns:"overflow"}],["overflow-scroll",{class:["overflow"],value:"scroll",ns:"overflow"}],["overflow-x-auto",{class:["overflow-x"],value:"auto",ns:"overflowX"}],["overflow-x-hidden",{class:["overflow-x"],value:"hidden",ns:"overflowX"}],["overflow-x-visible",{class:["overflow-x"],value:"visible",ns:"overflowX"}],["overflow-x-scroll",{class:["overflow-x"],value:"scroll",ns:"overflowX"}],["overflow-y-auto",{class:["overflow-y"],value:"auto",ns:"overflowY"}],["overflow-y-hidden",{class:["overflow-y"],value:"hidden",ns:"overflowY"}],["overflow-y-visible",{class:["overflow-y"],value:"visible",ns:"overflowY"}],["overflow-y-scroll",{class:["overflow-y"],value:"scroll",ns:"overflowY"}],["text-left",{class:["text-align"],value:"left",ns:"textAlign"}],["text-center",{class:["text-align"],value:"center",ns:"textAlign"}],["text-right",{class:["text-align"],value:"right",ns:"textAlign"}],["text-justify",{class:["text-align"],value:"justify",ns:"textAlign"}],["text-start",{class:["text-align"],value:"start",ns:"textAlign"}],["text-end",{class:["text-align"],value:"end",ns:"textAlign"}],["underline",{class:["text-decoration-line"],value:"underline",ns:"textDecoration"}],["line-through",{class:["text-decoration-line"],value:"line-through",ns:"textDecoration"}],["overline",{class:["text-decoration-line"],value:"overline",ns:"textDecoration"}],["no-underline",{class:["text-decoration-line"],value:"none",ns:"textDecoration"}],["text-wrap",{class:["text-wrap"],value:"wrap",ns:"textWrap"}],["text-nowrap",{class:["text-wrap"],value:"nowrap",ns:"textWrap"}],["text-balance",{class:["text-wrap"],value:"balance",ns:"textWrap"}],["text-pretty",{class:["text-wrap"],value:"pretty",ns:"textWrap"}],["truncate",{class:["overflow","text-overflow","white-space"],value:"",ns:"TextOverflow"}],["text-ellipsis",{class:["text-overflow"],value:"ellipsis",ns:"textWrap"}],["text-clip",{class:["text-overflow"],value:"clip",ns:"textWrap"}],["uppercase",{class:["text-transform"],value:"uppercase",ns:"textTransform"}],["lowercase",{class:["text-transform"],value:"lowercase",ns:"textTransform"}],["capitalize",{class:["text-transform"],value:"capitalize",ns:"textTransform"}],["normal-case",{class:["text-transform"],value:"none",ns:"textTransform"}],["italic",{class:["font-style"],value:"italic",ns:"fontStyle"}],["not-italic",{class:["font-style"],value:"normal",ns:"fontStyle"}],["bg-fixed",{class:["background-attachment"],value:"fixed",ns:"backgroundAttachment"}],["bg-local",{class:["background-attachment"],value:"local",ns:"backgroundAttachment"}],["bg-scroll",{class:["background-attachment"],value:"scroll",ns:"backgroundAttachment"}],["bg-repeat",{class:["background-repeat"],value:"repeat",ns:"backgroundRepeat"}],["bg-no-repeat",{class:["background-repeat"],value:"no-repeat",ns:"backgroundRepeat"}],["bg-repeat-x",{class:["background-repeat"],value:"repeat-x",ns:"backgroundRepeat"}],["bg-repeat-y",{class:["background-repeat"],value:"repeat-y",ns:"backgroundRepeat"}],["bg-repeat-round",{class:["background-repeat"],value:"round",ns:"backgroundRepeat"}],["bg-repeat-space",{class:["background-repeat"],value:"space",ns:"backgroundRepeat"}],["bg-origin-border",{class:["background-origin"],value:"border",ns:"backgroundOrigin"}],["bg-origin-padding",{class:["background-origin"],value:"padding",ns:"backgroundOrigin"}],["bg-origin-content",{class:["background-origin"],value:"content",ns:"backgroundOrigin"}],["flex-row",{class:["flex-direction"],value:"row",ns:"flexDirection"}],["flex-row-reverse",{class:["flex-direction"],value:"row-reverse",ns:"flexDirection"}],["flex-col",{class:["flex-direction"],value:"column",ns:"flexDirection"}],["flex-col-reverse",{class:["flex-direction"],value:"column-reverse",ns:"flexDirection"}],["flex-wrap",{class:["flex-wrap"],value:"wrap",ns:"flexWrap"}],["flex-wrap-reverse",{class:["flex-wrap"],value:"wrap-reverse",ns:"flexWrap"}],["flex-nowrap",{class:["flex-wrap"],value:"nowrap",ns:"flexWrap"}],["items-start",{class:["align-items"],value:"flex-start",ns:"alignItems"}],["items-end",{class:["align-items"],value:"flex-end",ns:"alignItems"}],["items-center",{class:["align-items"],value:"center",ns:"alignItems"}],["items-baseline",{class:["align-items"],value:"baseline",ns:"alignItems"}],["items-stretch",{class:["align-items"],value:"stretch",ns:"alignItems"}],["justify-start",{class:["justify-content"],value:"flex-start",ns:"justifyContent"}],["justify-end",{class:["justify-content"],value:"flex-end",ns:"justifyContent"}],["justify-center",{class:["justify-content"],value:"center",ns:"justifyContent"}],["justify-between",{class:["justify-content"],value:"space-between",ns:"justifyContent"}],["justify-around",{class:["justify-content"],value:"space-around",ns:"justifyContent"}],["justify-evenly",{class:["justify-content"],value:"space-evenly",ns:"justifyContent"}],["grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["flex-grow",{class:["flex-grow"],value:"1",ns:"flexGrow"}],["flex-grow-0",{class:["flex-grow"],value:"0",ns:"flexGrow"}],["shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["flex-shrink",{class:["flex-shrink"],value:"1",ns:"flexShrink"}],["flex-shrink-0",{class:["flex-shrink"],value:"0",ns:"flexShrink"}],["basis-auto",{class:["flex-basis"],value:"auto",ns:"flexBasis"}],["basis-full",{class:["flex-basis"],value:"100%",ns:"flexBasis"}],["grayscale",{class:["filter"],value:"grayscale(100%)",ns:"grayScale"}],["grayscale-0",{class:["filter"],value:"grayscale(0)",ns:"grayScale"}],["invert",{class:["filter"],value:"invert(100%)",ns:"invert"}],["invert-0",{class:["filter"],value:"invert(0)",ns:"invert"}],["sepia",{class:["filter"],value:"sepia(100%)",ns:"sepia"}],["sepia-0",{class:["filter"],value:"sepia(0)",ns:"sepia"}],["backdrop-grayscale",{class:["backdrop-filter"],value:"backdrop-grayscale(100%)",ns:"backdropGrayScale"}],["backdrop-grayscale-0",{class:["backdrop-filter"],value:"backdrop-grayscale(0)",ns:"backdropGrayScale"}],["backdrop-invert",{class:["backdrop-filter"],value:"backdrop-invert(100%)",ns:"backdrop-invert"}],["backdrop-invert-0",{class:["backdrop-filter"],value:"backdrop-invert(0)",ns:"backdrop-invert"}],["backdrop-sepia",{class:["backdrop-filter"],value:"backdrop-sepia(100%)",ns:"backdrop-sepia"}],["backdrop-sepia-0",{class:["backdrop-filter"],value:"backdrop-sepia(0)",ns:"backdrop-sepia"}],["ease-linear",{class:["transition-timing-function"],value:"linear",ns:"transitionTiming"}],["ease-in",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 1, 1)",ns:"transitionTiming"}],["ease-out",{class:["transition-timing-function"],value:"cubic-bezier(0, 0, 0.2, 1)",ns:"transitionTiming"}],["ease-in-out",{class:["transition-timing-function"],value:"cubic-bezier(0.4, 0, 0.2, 1)",ns:"transitionTiming"}],["object-contain",{class:["object"],value:"contain",ns:"objectFit"}],["object-cover",{class:["object"],value:"cover",ns:"objectFit"}],["object-fill",{class:["object"],value:"fill",ns:"objectFit"}],["object-none",{class:["object"],value:"none",ns:"objectFit"}],["object-scale-down",{class:["object"],value:"scale-down",ns:"objectFit"}]]),s6=new Map([["first","pseudo"],["last","pseudo"],["only","pseudo"],["odd","pseudo"],["even","pseudo"],["first-of-type","pseudo"],["last-of-type","pseudo"],["only-of-type","pseudo"],["visited","state"],["target","state"],["open","state"],["default","form"],["checked","form"],["indeterminate","form"],["placeholder-shown","form"],["autofill","form"],["optional","form"],["required","form"],["valid","form"],["invalid","form"],["in-range","form"],["out-of-range","form"],["read-only","form"],["empty","content"],["focus-within","interaction"],["hover","interaction"],["group-hover","interaction"],["focus","interaction"],["focus-visible","interaction"],["active","interaction"],["enabled","interaction"],["disabled","interaction"],["dark","system"]]);var s8=a(10297);let s9=a.n(s8)()(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return sQ()(e||{}).theme});class s7{addRoot(e){return this._classRoot=e,this}addValue(e){return this._classValue=e,this}appendModifier(e){return e&&(this._modifier="/"+e),this}appendVariants(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];for(let e of t)this._variants.push(e);return this}makeImportant(){return this.important=!0,this}makeNegative(){return this.negative=!0,this}toString(){let e=["media","system","interaction","pseudo","content","form","state","misc"],t=this._variants.sort((t,a)=>e.indexOf(t.type)-e.indexOf(a.type));return(t.length>0?t.map(e=>e.value).join(":")+":":"")+(this.important?"!":"")+(this.negative?"-":"")+this._classRoot+(this._classValue?"-"+this._classValue:"")+this._modifier}static makeInputArbitraryFormat(e){return e.replace(/\s/g,"_")}static makeArbitrary(e){return"["+s7.makeInputArbitraryFormat(e)+"]"}constructor(){this._classRoot="",this._classValue="",this._modifier="",this._variants=[],this.important=!1,this.negative=!1}}let le=(e,t)=>{if(!e)return"";if("["===e[0]&&"]"===e[e.length-1]&&(e=e.slice(1,-1)),"%"===e[e.length-1])return s7.makeArbitrary(e);for(let[a,s]of Object.entries(t))if(a==e||s==e)return a;return(0===Number(e)||Number(e)>=1)&&100>=Number(e)?s7.makeArbitrary(e+"%"):Number(e)>=0&&1>=Number(e)?s7.makeArbitrary(e):""};var lt=a(37779);let la=e=>{let t=(0,lt.Vi)(e),a=t.alpha();if(t.isValid())return{hex:t.alpha(1).toHex(),alpha:1!==a?a.toString():void 0}},ls=(e,t)=>{if(!e)return!1;for(let[a,s]of Object.entries(t)){if(("#fff"===s||"#000"===s)&&(0,lt.Vi)(e).isEqual(s))return a;for(let[t,l]of Object.entries(s))if(l===e)return"".concat(a,"-").concat(t)}return!1},ll=new Uint8Array(256);function lr(e,t){let a=0,s=[],l=0,r=e.length,n=t.charCodeAt(0);for(let t=0;t<r;t++){let i=e.charCodeAt(t);if(0===a&&i===n){s.push(e.slice(l,t)),l=t+1;continue}switch(i){case 92:t+=1;break;case 39:case 34:for(;++t<r;){let a=e.charCodeAt(t);if(92===a){t+=1;continue}if(a===i)break}break;case 40:ll[a]=41,a++;break;case 91:ll[a]=93,a++;break;case 123:ll[a]=125,a++;break;case 93:case 125:case 41:a>0&&i===ll[a-1]&&a--}}return s.push(e.slice(l)),s}let ln=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent","currentcolor","canvas","canvastext","linktext","visitedtext","activetext","buttonface","buttontext","buttonborder","field","fieldtext","highlight","highlighttext","selecteditem","selecteditemtext","mark","marktext","graytext","accentcolor","accentcolortext"]),li=/^(rgba?|hsla?|hwb|color|(ok)?(lab|lch)|light-dark|color-mix)\(/i;function lo(e,t){if(!e)return!1;let a=!1;if(t){let[s]=lr(e,"/");a=!!s2()(t.colors,s.split("-").join("."))}return 35===e.charCodeAt(0)||li.test(e)||ln.has(e.toLowerCase())||a}let lc=(e,t)=>{let a=s9(t),s=new s7,l=e.negative||!1;s.appendVariants(...e.variants||[]),e.important&&s.makeImportant(),"-"===e.value[0]&&(e.value=e.value.slice(1),l=!0);let[r]=Array.from(s3.entries()).filter(t=>{let[,a]=t;return a.ns===e.property}).find(t=>{let[,a]=t;return a.value===e.value})||[];if(r)return s.addRoot(r).toString();let[n,i=[]]=Array.from(s4.entries()).find(t=>{let[,a]=t;return a.some(t=>t.ns===e.property)})||[];if(!n)throw new s5(e.property);if(s.addRoot(n),lo(e.value,a)){let t=i.find(e=>"color"===e.type);if(!t)throw new s5(e.property);let l=s2()(a[t.scaleKey||"colors"],e.value.split("-").join("."));if(l&&"object"!=typeof l)return s.appendModifier(le(e.modifier,a.opacity)).addValue(e.value).toString();let r=la(e.value);return r?s.appendModifier(le(r.alpha||e.modifier,a.opacity)).addValue(ls(r.hex,a[t.scaleKey||"colors"])||s7.makeArbitrary(r.hex)).toString():""}let o=i.find(t=>t.ns===e.property);if(!o)throw new s5(e.property);let c=ld(e.value,a[o.scaleKey]);return c&&(s.addValue(c),o.supportNegative&&l&&s.makeNegative()),s.toString()},ld=(e,t)=>{if(e){for(let[a,s]of Object.entries(t))if(Array.isArray(s)&&(a===e||s.includes(e))||a===e||s===e)return"DEFAULT"!==a?a:void 0;return s7.makeArbitrary(e)}},lu=["calc","min","max","clamp","mod","rem","sin","cos","tan","asin","acos","atan","atan2","pow","sqrt","hypot","log","exp","round"];function lm(e){return -1!==e.indexOf("(")&&lu.some(t=>e.includes("".concat(t,"(")))}function lp(e){return e.startsWith("url(")?e:e=function(e){if(-1===e.indexOf("(")||!lu.some(t=>e.includes(t)))return e;let t="",a=[];for(let s=0;s<e.length;s++){let l=e[s];if("("===l){t+=l;let r=s;for(let t=s-1;t>=0;t--){let a=e.charCodeAt(t);if(a>=48&&a<=57)r=t;else if(a>=97&&a<=122)r=t;else break}let n=e.slice(r,s);if(lu.includes(n)||a[0]&&""===n){a.unshift(!0);continue}a.unshift(!1);continue}if(")"===l)t+=l,a.shift();else if(","===l&&a[0]){t+=", ";continue}else if(" "===l&&a[0]&&" "===t[t.length-1])continue;else if(("+"===l||"*"===l||"/"===l||"-"===l)&&a[0]){let a=t.trimEnd(),r=a[a.length-1];if("+"===r||"*"===r||"/"===r||"-"===r||"("===r||","===r){t+=l;continue}" "===e[s-1]?t+="".concat(l," "):t+=" ".concat(l," ")}else if(a[0]&&e.startsWith("to-zero",s)){let a=s;s+=7,t+=e.slice(a,s+1)}else t+=l}return t}(e=function(e){let t="";for(let a=0;a<e.length;a++){let s=e[a];"\\"===s&&"_"===e[a+1]?(t+="_",a+=1):"_"===s?t+=" ":t+=s}return t}(e))}let lh={color:lo,length:lE,percentage:lw,number:function(e){return lj.test(e)||lm(e)},url:lf,position:function(e){let t=0;for(let a of lr(e," ")){if("center"===a||"top"===a||"right"===a||"bottom"===a||"left"===a){t+=1;continue}if(!a.startsWith("var(")){if(lE(a)||lw(a)){t+=1;continue}return!1}}return t>0},"bg-size":function(e){let t=0;for(let a of lr(e,",")){if("cover"===a||"contain"===a){t+=1;continue}let e=lr(a," ");if(1!==e.length&&2!==e.length)return!1;e.every(e=>"auto"===e||lE(e)||lw(e))&&(t+=1)}return t>0},"line-width":function(e){return"thin"===e||"medium"===e||"thick"===e},image:function(e){let t=0;for(let a of lr(e,","))if(!a.startsWith("var(")){if(lf(a)||lv.test(a)||lg.test(a)){t+=1;continue}return!1}return t>0},"family-name":function(e){let t=0;for(let a of lr(e,",")){let e=a.charCodeAt(0);if(e>=48&&e<=57)return!1;a.startsWith("var(")||(t+=1)}return t>0},"generic-name":function(e){return"serif"===e||"sans-serif"===e||"monospace"===e||"cursive"===e||"fantasy"===e||"system-ui"===e||"ui-serif"===e||"ui-sans-serif"===e||"ui-monospace"===e||"ui-rounded"===e||"math"===e||"emoji"===e||"fangsong"===e},"absolute-size":function(e){return"xx-small"===e||"x-small"===e||"small"===e||"medium"===e||"large"===e||"x-large"===e||"xx-large"===e||"xxx-large"===e},"relative-size":function(e){return"larger"===e||"smaller"===e},angle:function(e){return lk.test(e)},vector:function(e){return lC.test(e)},named:()=>!0},lx=/^url\(.*\)$/;function lf(e){return lx.test(e)}let lg=/^(?:element|image|cross-fade|image-set)\(/,lv=/^(repeating-)?(conic|linear|radial)-gradient\(/,lb=/[+-]?\d*\.?\d+(?:[eE][+-]?\d+)?/,lj=new RegExp("^".concat(lb.source,"$")),ly=new RegExp("^".concat(lb.source,"%$"));function lw(e){return ly.test(e)||lm(e)}let lN=new RegExp("^".concat(lb.source,"(").concat("cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cqw|cqh|cqi|cqb|cqmin|cqmax",")$"));function lE(e){return lN.test(e)||lm(e)}let lk=new RegExp("^".concat(lb.source,"(").concat("deg|rad|grad|turn",")$")),lC=new RegExp("^".concat(lb.source," +").concat(lb.source," +").concat(lb.source,"$"));class l_ extends Error{constructor(e,t){super("Found a matched plugin `".concat(e,"`, but the value `").concat(t,"` could not matched. This could be due to a misspelling or the given value is not covered by tailwind.config file.")),this.name="PluginNotFoundException"}}let lS=(e,t,a)=>{if("color"===t.type){let s=s2()(a,e.split("-").join("."));if(!s)throw new l_(t.ns,e);return"object"==typeof s&&s.DEFAULT&&(s=s.DEFAULT),{value:s,kind:t.type,class:t.class,raw:e}}let s=a[e];if(!s)throw new l_(t.ns,e);return{value:s,class:t.class,raw:e,kind:t.type}},lT=(e,t)=>{if(!e)return{root:"",kind:"error",message:"Empty input"};let a=s9(t),s={important:!1,negative:!1},l=lr(e,":"),r=l.pop(),n=[];for(let e=l.length-1;e>=0;--e){let t=function(e,t){if("["===e[0]&&"]"===e[e.length-1]){let t=e.slice(1,-1);return{kind:"arbitrary",type:"misc",value:t="-"===t[0]&&"-"===t[1]?"var(".concat(t,")"):lp(t)}}return Object.keys(t).includes(e)?{kind:"named",type:"media",value:e}:{kind:"named",type:s6.get(e)||"misc",value:e}}(l[e],a.screens);null!==t&&n.push(t)}"!"===r[0]&&(s.important=!0,r=r.slice(1)),"-"===r[0]&&(s.negative=!0,r=r.slice(1));let i=s3.get(r);if(i)return{root:r,kind:"named",property:i.ns,value:i.value,valueDef:{class:i.class,raw:r,kind:"named",value:i.value},variants:n,modifier:null,important:s.important,negative:s.negative,arbitrary:!1};let[o,c]=function(e,t){if(t.has(e))return[e,null];let a=e.lastIndexOf("-");if(-1===a)return"@"===e[0]&&t.has("@")?["@",e.slice(1)]:[null,null];do{let s=e.slice(0,a);if(t.has(s))return[s,e.slice(a+1)];a=e.lastIndexOf("-",a-1)}while(a>0);return[null,null]}(r,s4);if(!o)return{root:r,kind:"error",message:"Tailwindcss core plugin not found"};let d=s4.get(o),u=null,[m,p=null]=lr(c||"","/");if(p&&lo(m.replace(/[\[\]]/g,""),a)&&(u=le(p,a.opacity)),m&&"["===m[0]&&"]"===m[m.length-1]){let e=m.slice(1,-1),t=function(e,t){if(e.startsWith("var("))return null;for(let s of t){var a;if(null===(a=lh[s])||void 0===a?void 0:a.call(lh,e))return s}return null}(e,Array.from(d.values()).map(e=>{let{type:t}=e;return t})),l=d.find(e=>e.type===t);if("color"===t){let t=la(e);if(!t)return{root:r,kind:"error",message:"Color is not correct"};m=ls(t.hex,a[(null==l?void 0:l.scaleKey)||"colors"])||t.hex}else d.length>0&&(l=d.find(e=>e.type===t)||d.find(e=>"color"!==e.type));return e=lp(e),{root:o,kind:"functional",property:l.ns,value:e,valueDef:{value:e,class:l.class,raw:m,kind:t||"named"},variants:n,modifier:u,arbitrary:!0,important:s.important,negative:s.negative}}c||(c="DEFAULT");let h=d.find(e=>{let{scaleKey:t}=e;return c.split("-")[0]in a[t]||m in a[t]});if(!h)return{root:r,kind:"error",message:'found "'.concat(d.map(e=>e.ns).join(", "),'" plugins but unable to determine which one is matched to given value "').concat(c,'".')};let x=lS("color"===h.type?m:c,h,a[h.scaleKey]);return{root:o,kind:"functional",property:h.ns,value:x.value,valueDef:x,variants:n,modifier:u,important:s.important,negative:s.negative,arbitrary:!1}},lR=e=>{var t;return Object.entries((null==e?void 0:null===(t=e.theme)||void 0===t?void 0:t.screens)||{}).sort((e,t)=>parseInt(t[1])-parseInt(e[1])).concat([["default","0px"]])},lI=(e,t)=>e.findIndex(e=>{let[a]=e;return a===t}),lD=(e,t)=>e>=t,lP=(e,t,a,s)=>{var l,r;let n=Array.isArray(t)?t:[t],i=lR(a),o=n.map(e=>lT(e,a));if(o.some(e=>"error"===e.kind))return e;let c=e.split(/\s+/).filter(Boolean),d=c.filter(e=>{try{var t,l;let r=lT(e.trim(),a);if("error"===r.kind)return!0;return o.some(e=>"error"!==e.kind&&e.property===r.property)&&lD(lI(i,(null===(l=r.variants)||void 0===l?void 0:null===(t=l.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default"),lI(i,s||"default"))}catch(e){return!1}}),u=d.reduce((e,t)=>{var s,l,r,n;let o=lT(t.trim(),a),c=lT(e.trim(),a);return"error"===o.kind||"error"===c.kind?e:lI(i,(null===(l=o.variants)||void 0===l?void 0:null===(s=l.find(e=>"media"===e.type))||void 0===s?void 0:s.value)||"default")<lI(i,(null===(n=c.variants)||void 0===n?void 0:null===(r=n.find(e=>"media"===e.type))||void 0===r?void 0:r.value)||"default")?t:e},d[0])||"default",m=lT(u.trim(),a),p="error"!==m.kind&&(null===(r=m.variants)||void 0===r?void 0:null===(l=r.find(e=>"media"===e.type))||void 0===l?void 0:l.value)||"default";return[...c.filter(e=>{try{var t,s;let l=lT(e.trim(),a);if("error"===l.kind||!o.some(e=>"error"!==e.kind&&e.property===l.property))return!0;return((null===(s=l.variants)||void 0===s?void 0:null===(t=s.find(e=>"media"===e.type))||void 0===t?void 0:t.value)||"default")!==(p||"default")}catch(e){return!0}}),p&&"default"!==p?n.map(e=>"".concat(p,":").concat(e)).join(" "):n.join(" ")].join(" ")},lz=e=>{let{className:t,property:a,config:s,currentBreakpoint:l}=e,r=lR(s),n=t.split(/\s+/g).map(e=>{try{var t;let n=lT(e.trim(),s);if("error"===n.kind||n.property!==a)return null;let i=null===(t=n.variants)||void 0===t?void 0:t.find(e=>"media"===e.type);if(i&&l){let e=lI(r,i.value),t=lI(r,l);if(-1===t&&(t=r.length),e<t)return null}return{parsed:n,breakpoint:(null==i?void 0:i.value)||"default"}}catch(e){return null}}).filter(e=>null!==e);if(0===n.length)return null;if(!l)return n.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:lI(r,t.breakpoint)<lI(r,e.breakpoint)?t:e,n[0]).parsed;let i=lI(r,l),o=n.filter(e=>"default"===e.breakpoint||lD(lI(r,e.breakpoint),i));return 0===o.length?null:o.reduce((e,t)=>"default"===t.breakpoint?e:"default"===e.breakpoint?t:lI(r,t.breakpoint)<lI(r,e.breakpoint)?t:e,o[0]).parsed},lA=(e,t)=>{let a=lR(e);if(!a)return"default";let s=t.getBoundingClientRect().width;for(let[e,t]of a){let a="string"==typeof t?parseInt(t):"number"==typeof t?t:null;if(null!==a&&s>=a)return e}return"default"},lO=e=>{if(void 0!==e)try{return JSON.parse(e)}catch(e){return}},lL=()=>{let{code:e}=(0,tu.v)(),t=(0,g.useMemo)(()=>{var t;return null===(t=e.find(e=>{let[t,a]=e;return(null==t?void 0:t.split("/").pop())==="tailwind.config.lov.json"}))||void 0===t?void 0:t[1]},[e]);return(0,g.useMemo)(()=>lO(t)||sQ()({content:[]}),[t])},lZ=e=>{let t=new Set,a=e.theme||{};for(let[e]of s3)t.add(e);for(let[e,s]of s4)for(let l of s){let s=a[l.scaleKey];if(s){for(let a of Object.keys(s))if("DEFAULT"===a)t.add(e);else{let s="".concat(e,"-").concat(a);t.add(s),l.supportNegative&&t.add("-".concat(s))}if("color"===l.type&&s){for(let[a,l]of Object.entries(s))if("object"==typeof l&&null!==l)for(let s of Object.keys(l))"DEFAULT"===s?t.add("".concat(e,"-").concat(a)):t.add("".concat(e,"-").concat(a,"-").concat(s))}}}return Array.from(t).sort()},lM=()=>{let e=lL(),t=(0,ez.f6)(e=>e.visibleMode),{twi:a}=(0,s0.XM)({config:e,options:{merge:!0}}),s=(0,g.useCallback)((a,s)=>{let l=sZ({visibleMode:t});if(!l)return a;let r=lA(e,l);return lP(a,s,e,r)},[e,t]),l=(0,g.useCallback)(a=>{let{className:s,property:l}=a;if(!s)return null;let r=(0,ez.XE)(t),n=document.querySelector("iframe#".concat(r));if(!n)return null;let i=lA(e,n);return lz({className:s,property:l,config:e,currentBreakpoint:i})},[e,t]);return{theme:null==e?void 0:e.theme,parse:t=>lT(t,e),classname:t=>lc(t,e),updateTwClassname:s,classNameToStyle:a,getRelevantTwClass:l}},lF=()=>{let e=lL(),t=(0,g.useMemo)(()=>lZ(e),[e]);return{getAutocomplete:(0,g.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;if(!e.trim())return[];let s=e.toLowerCase();return t.sort((e,t)=>s$()(t,s)-s$()(e,s)).slice(0,a)},[t]),classNames:t}};var lU=a(36839),lK=a(77929),lV=a(54816),lW=a(37355);let lB=e=>{let{disabled:t,onImagesUploaded:a,onUrlSubmitted:s,maxSize:l=20971520,className:r}=e,{upload:n,download:i}=(0,lW.F)(),{authUser:o}=(0,b.Eu)(),c=(0,g.useCallback)(async e=>{let t=e.map(e=>({file:e,url:URL.createObjectURL(e),id:(0,lV.Z)(),type:e.type}));return(await Promise.all(t.map(async e=>{try{await n({fileName:e.id,file:e.file,continueOnError:!1});let{url:t}=await i({dir_name:o.uid,file_name:e.id});return{downloadUrl:t,name:"".concat(e.id,".").concat({"image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","image/webp":"webp"}[e.type]||"png"),type:e.type,id:e.id}}catch(t){return console.error("Failed to upload image ".concat(e.id,":"),t),null}}))).filter(e=>null!==e)},[n,i,o]),{getInputProps:d,open:u,getRootProps:m,isDragActive:h}=(0,lK.uI)({onDrop:async e=>{a(await c(e))},noClick:!0,noKeyboard:!0,maxSize:l,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]}});(0,g.useEffect)(()=>{let e=async e=>{var t;let s=Array.from((null===(t=e.clipboardData)||void 0===t?void 0:t.items)||[]).filter(e=>e.type.startsWith("image/")).map(e=>e.getAsFile()).filter(e=>null!==e);s.length&&a(await c(s))};return window.addEventListener("paste",e),()=>window.removeEventListener("paste",e)},[a,c,o]);let[x,f]=(0,g.useState)("");return(0,p.jsxs)("div",{className:(0,eu.cn)("group relative rounded-lg bg-input [&:has(:focus)]:border-accent",{"pointer-events-none":t},r),children:[h&&(0,p.jsx)("div",{className:"absolute inset-0 z-30 flex items-center justify-center rounded-lg bg-background/80",children:(0,p.jsxs)("div",{className:"rounded-lg bg-muted p-4 text-center",children:[(0,p.jsx)("p",{children:"Drop images here"}),(0,p.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Accepts PNG, JPG files up to ",l/1048576,"MB"]})]})}),(0,p.jsxs)("div",{...m(),children:[(0,p.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 border-none py-8 pt-10 text-sm disabled:cursor-not-allowed disabled:opacity-50",onClick:u,disabled:t,children:[(0,p.jsx)(et.Z,{name:"add_photo_alternate"}),"Attach image"]}),(0,p.jsx)("input",{...d()})]}),(0,p.jsx)("form",{className:"flex gap-1 p-2",onSubmit:e=>{e.preventDefault(),s(e.target.elements.namedItem("image-url").value)},children:(0,p.jsxs)("div",{className:"relative w-full",children:[(0,p.jsx)(e2.I,{name:"image-url",placeholder:"Image URL",className:"w-full bg-muted pr-16",disabled:t,onChange:e=>{f(e.target.value)},value:x}),(0,p.jsx)("div",{className:"absolute right-0 top-0 flex h-full items-center justify-center pr-1",children:(0,p.jsx)(Q.z,{variant:"muted",type:"submit",size:"sm",className:(0,eu.cn)("opacity-0 transition-opacity",x?"opacity-100":"opacity-0"),disabled:t,children:"Add"})})]})})]})};var lG=a(52465);let lH=e=>{let{title:t,children:a,disabled:s,childrenWrapperClassName:l}=e;return(0,p.jsxs)("div",{className:(0,eu.cn)("grid grid-cols-[100px_1fr]",{hidden:s}),children:[(0,p.jsx)("p",{className:"my-auto text-sm font-medium text-muted-foreground",children:t}),(0,p.jsx)("div",{className:l,children:a})]})},lJ=e=>{let{children:t,isDisabled:a}=e;return(0,p.jsx)("div",{className:(0,eu.cn)("border-px flex flex-col gap-1.5",{hidden:a}),children:t})},lq={content:"Content",margin:"Margin",background:"Background",borderRadius:"Border radius",image:"Image",resize:"Resize",fontSize:"Font size",textAlign:"Text align",padding:"Padding",fontWeight:"Font weight",color:"Color"},lX={spacing:[{key:"margin",title:lq.margin},{key:"padding",title:lq.padding}],typography:[{key:"fontSize",title:lq.fontSize},{key:"fontWeight",title:lq.fontWeight}]},l$=()=>{let e=sD(),{selectedElements:t}=sG(),{history:a,setHistory:s,currentClassName:l,setCurrentClassName:r}=(0,tu.v)(),{setSelectedElements:n}=(0,e6.S9)(),i=sO(),{updateTwClassname:o,classNameToStyle:u,classname:m}=lM(),p=(0,g.useCallback)(e=>{s(t=>[...t,e].slice(-100))},[s]),h=(0,g.useCallback)(e=>{switch(e.type){case d.TEXT_CHANGE:i(e.element,t=>(0,sP.Rw)(t,e.newText));break;case d.IMAGE_CHANGE:i(e.element,t=>(0,sP.R5)(t,{src:e.newUrl}));break;case d.REMOVE_NODE:i(e.element,(e,t)=>{t.remove()});break;case d.CLASS_NAME_UPDATE:case d.CLASS_NAME_SET:i(e.element,t=>(0,sP.R5)(t,{className:e.newClassName}));break;case d.DUPLICATE_NODE:i(e.element,(e,t)=>{t.insertAfter(e)})}p(e)},[i,p]),x=(0,g.useCallback)(a=>{switch(a.type){case d.TEXT_CHANGE:i(a.element,e=>(0,sP.Rw)(e,a.oldText)),e({type:c.SET_ELEMENT_CONTENT,payload:{id:{filePath:a.element.filePath,lineNumber:a.element.lineNumber,col:a.element.col},content:a.oldText}}),n(t.map(e=>e.filePath===a.element.filePath&&e.lineNumber===a.element.lineNumber?{...e,textContent:a.oldText}:e));break;case d.IMAGE_CHANGE:i(a.element,e=>(0,sP.R5)(e,{src:a.oldUrl})),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.element.filePath,lineNumber:a.element.lineNumber,col:a.element.col},attrs:{src:a.oldUrl}}});break;case d.REMOVE_NODE:i(a.element,(e,t)=>{try{let e=JSON.parse(a.node);t.insertBefore(e)}catch(e){console.error("Failed to parse node",{item:a},e)}}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.element.filePath,lineNumber:a.element.lineNumber,col:a.element.col},attrs:{style:""}}});break;case d.CLASS_NAME_UPDATE:case d.CLASS_NAME_SET:i(a.element,e=>(0,sP.R5)(e,{className:a.oldClassName})),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.element.filePath,lineNumber:a.element.lineNumber,col:a.element.col},attrs:{style:u(a.oldClassName)}}}),t.some(e=>e.filePath===a.element.filePath&&e.lineNumber===a.element.lineNumber)&&r(a.oldClassName);break;case d.DUPLICATE_NODE:i(a.element,(e,t)=>{let a=t.getNextSibling();a&&a.remove()})}},[i,e,n,t,u,r]),f=(0,g.useCallback)(()=>{let e=a[a.length-1];e&&(x(e),s(e=>e.slice(0,-1)))},[a,s,x]),v=(0,g.useCallback)((a,s)=>{let l=String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),r="";i(a,e=>{var t;r=(null===(t=e.children[0])||void 0===t?void 0:t.value)||""}),r!==l&&(h({type:d.TEXT_CHANGE,element:a,oldText:r,newText:l}),e({type:c.SET_ELEMENT_CONTENT,payload:{id:{filePath:a.filePath,lineNumber:a.lineNumber,col:a.col},content:l}}),n(t.map(e=>e.filePath===a.filePath&&e.lineNumber===a.lineNumber?{...e,textContent:l}:e)))},[h,e,t,n,i]),b=(0,g.useCallback)(function(t,a){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,l="";i(t,e=>{var t,a;l=(null===(a=e.openingElement.attributes.find(e=>"JSXAttribute"===e.type&&"src"===e.name.name))||void 0===a?void 0:null===(t=a.value)||void 0===t?void 0:t.value)||""}),h({type:d.IMAGE_CHANGE,element:t,oldUrl:l,newUrl:a}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col},attrs:{src:s}}})},[h,i,e]),j=(0,g.useCallback)(t=>{S.ZP.capture("visual_edits:element_deleted"),e({type:c.GET_PARENT_ELEMENT,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col}}});let a="";i(t,e=>{a=(0,sz.default)(e).code}),h({type:d.REMOVE_NODE,element:t,node:a}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:t.filePath,lineNumber:t.lineNumber,col:t.col},attrs:{style:"display: none;"}}})},[i,h,e]),y=(0,g.useCallback)(t=>{let{element:a,className:s,reset:l=!1}=t,r=null;i(a,e=>{r=(0,sP.Xu)(e)}),h({type:d.CLASS_NAME_SET,element:a,oldClassName:r||"",newClassName:s}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.filePath,lineNumber:a.lineNumber,col:a.col},attrs:{style:u(s),...l?{class:s}:{}}}})},[u,h,i,e]),w=(0,g.useCallback)(t=>{let{element:a,newClassNames:s,preview:r=!1}=t,n=null,m=null;return(i(a,e=>{null!==(n=(0,sP.Xu)(e))&&(m=o(n,s))}),null===n||null===m)?l:(r||h({type:d.CLASS_NAME_UPDATE,element:a,oldClassName:n,newClassName:m}),e({type:c.SET_ELEMENT_ATTRS,payload:{id:{filePath:a.filePath,lineNumber:a.lineNumber,col:a.col},attrs:{"data-lov-dirty":"true",style:u(m)+";"+u(s)}}}),m)},[u,l,h,i,e,o]),N=(0,g.useCallback)(e=>{h({type:d.DUPLICATE_NODE,element:e})},[h]),E=(0,g.useCallback)((e,t)=>{r((0,sP.EE)(e,t))},[r]),k=(0,g.useCallback)(e=>{let{element:t,classObj:a,preview:s=!1}=e;try{let e=Array.isArray(a)?a.map(e=>m(e)):[m(a)],l=w({element:t,newClassNames:e,preview:s});return s||r(l),l}catch(e){return l}},[m,w,r,l]),C=(0,g.useCallback)(e=>{let{element:t,className:a,reset:s=!1}=e;y({element:t,className:a,reset:s}),r(a)},[y,r]);return{handleTextChange:v,handleImageChange:b,handleRemoveNode:j,updateElementClassName:w,setElementClassName:y,handleDuplicateNode:N,undoLastOperation:f,initializeClassName:E,handleUpdateClassName:k,handleUpdateClassNameAdvanced:C}};function lY(e){let{disabled:t,canEditText:a,element:s,onTextChange:l,imageUploadSection:r}=e,n=(0,lU.B)(s);return"img"===n?r:a?(0,p.jsx)(lH,{title:lq.content,disabled:!("text"===n||"button"===n||"link"===n),children:(0,p.jsx)(lG.g,{value:String(s.textContent||"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"'),disabled:!a||t,className:(0,eu.cn)("resize-none text-sm leading-snug placeholder-shown:text-ellipsis placeholder-shown:whitespace-nowrap","focus-visible:ring-0 focus-visible:ring-offset-0","max-h-[200px] scrollbar-thin scrollbar-track-transparent scrollbar-thumb-[#636575]","h-auto border bg-input focus:bg-input",!a&&"hidden"),placeholder:"Enter text here",onChange:e=>l(s,e.target.value)})}):(0,p.jsx)(lH,{title:lq.content,children:(0,p.jsx)("div",{className:"my-auto flex items-center justify-between",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Content linked to backend or code. Ask AI to edit."})})})}var lQ=a(85980),l0=a(69237),l1=a(84994),l2=a(22056),l5=a(88199);let l4=e=>{let{element:t,disabled:a}=e,{currentClassName:s,ast:l}=(0,tu.v)(),r=(0,lU.B)(t),{initializeClassName:n,handleUpdateClassName:i}=l$();(0,g.useEffect)(()=>{n(t,l)},[t,l,n]);let{getRelevantTwClass:o,parse:c,classname:d}=lM(),u=(0,g.useMemo)(()=>{var e,t,a,l,r,n,i,c,d,u,m,p;if(!s)return;let h=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},x=o({className:s,property:"padding"}),f=o({className:s,property:"paddingY"}),g=o({className:s,property:"paddingX"});return{paddingTop:null!==(n=null!==(r=h(null===(e=o({className:s,property:"paddingTop"}))||void 0===e?void 0:e.value))&&void 0!==r?r:h(null==f?void 0:f.value))&&void 0!==n?n:h(null==x?void 0:x.value),paddingBottom:null!==(c=null!==(i=h(null===(t=o({className:s,property:"paddingBottom"}))||void 0===t?void 0:t.value))&&void 0!==i?i:h(null==f?void 0:f.value))&&void 0!==c?c:h(null==x?void 0:x.value),paddingLeft:null!==(u=null!==(d=h(null===(a=o({className:s,property:"paddingLeft"}))||void 0===a?void 0:a.value))&&void 0!==d?d:h(null==g?void 0:g.value))&&void 0!==u?u:h(null==x?void 0:x.value),paddingRight:null!==(p=null!==(m=h(null===(l=o({className:s,property:"paddingRight"}))||void 0===l?void 0:l.value))&&void 0!==m?m:h(null==g?void 0:g.value))&&void 0!==p?p:h(null==x?void 0:x.value)}},[o,s]),m=(0,g.useMemo)(()=>{var e,t,a,l,r,n,i,c,d,u,m,p;if(!s)return;let h=e=>{if(e){if(e.endsWith("px"))return parseFloat(e.replace("px",""));if(e.endsWith("rem"))return 16*parseFloat(e.replace("rem",""))}},x=o({className:s,property:"margin"}),f=o({className:s,property:"marginY"}),g=o({className:s,property:"marginX"});return{marginTop:null!==(n=null!==(r=h(null===(e=o({className:s,property:"marginTop"}))||void 0===e?void 0:e.value))&&void 0!==r?r:h(null==f?void 0:f.value))&&void 0!==n?n:h(null==x?void 0:x.value),marginBottom:null!==(c=null!==(i=h(null===(t=o({className:s,property:"marginBottom"}))||void 0===t?void 0:t.value))&&void 0!==i?i:h(null==f?void 0:f.value))&&void 0!==c?c:h(null==x?void 0:x.value),marginLeft:null!==(u=null!==(d=h(null===(a=o({className:s,property:"marginLeft"}))||void 0===a?void 0:a.value))&&void 0!==d?d:h(null==g?void 0:g.value))&&void 0!==u?u:h(null==x?void 0:x.value),marginRight:null!==(p=null!==(m=h(null===(l=o({className:s,property:"marginRight"}))||void 0===l?void 0:l.value))&&void 0!==m?m:h(null==g?void 0:g.value))&&void 0!==p?p:h(null==x?void 0:x.value)}},[o,s]),h={margin:{horizontal:{property:"marginX",icon:l0.Z,placeholder:"X margin",value:null==m?void 0:m.marginLeft},vertical:{property:"marginY",icon:lQ.Z,placeholder:"Y margin",value:null==m?void 0:m.marginTop}},padding:{horizontal:{property:"paddingX",icon:l1.Z,placeholder:"X padding",value:null==u?void 0:u.paddingLeft},vertical:{property:"paddingY",icon:l2.Z,placeholder:"Y padding",value:null==u?void 0:u.paddingTop}}},x=(0,g.useRef)({}),f=(0,g.useCallback)(e=>{var a;let s=e.property,l=Date.now();x.current[s]&&cancelAnimationFrame(x.current[s].rafId);let n=()=>{let e=x.current[s];if(e){let a=c(d(e.immediateValue));if("error"===a.kind)return;let n=a.valueDef.raw,o=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===r&&n.split("-").length>1){let[e,t]=n.split("-"),a=parseInt(t)-100;if((a=100*Math.floor(a/100))>0){let t="".concat(e,"-").concat(a);o.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}i({element:t,classObj:o}),x.current[s].lastUpdateTime=l,delete x.current[s]}};x.current[s]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(a=x.current[s])||void 0===a?void 0:a.lastUpdateTime)||0},x.current[s].rafId=requestAnimationFrame(()=>{n()})},[d,t,r,i,c]),v=null!==s;return(0,p.jsx)(p.Fragment,{children:v?(0,p.jsx)(lJ,{isDisabled:"img"===r,children:lX.spacing.map(e=>{var t,s;let l=h[e.key];return(0,p.jsxs)(lH,{title:e.title,childrenWrapperClassName:"flex gap-1",children:[(0,p.jsx)(l5.R,{max:240,className:"h-7 flex-grow rounded-md bg-input",inputClassName:"h-7 pl-7",value:null!==(t=l.horizontal.value)&&void 0!==t?t:0,placeholder:l.horizontal.placeholder,name:l.horizontal.property,disabled:a,"aria-label":"".concat(e.title," horizontal scrubber"),onChange:e=>l.horizontal.value!==e&&f({property:l.horizontal.property,value:"".concat(e,"px")}),leftIconClassName:"pl-1.5",leftIcon:(0,p.jsx)(l.horizontal.icon,{className:"size-4 fill-muted-foreground"})}),(0,p.jsx)(l5.R,{max:240,value:null!==(s=l.vertical.value)&&void 0!==s?s:0,className:"h-7 flex-grow rounded-md bg-input",inputClassName:"h-7 pl-7",placeholder:l.vertical.placeholder,name:l.vertical.property,disabled:a,"aria-label":"".concat(e.title," vertical scrubber"),onChange:e=>l.vertical.value!==e&&f({property:l.vertical.property,value:"".concat(e,"px")}),leftIconClassName:"pl-1.5",leftIcon:(0,p.jsx)(l.vertical.icon,{className:"size-4 fill-muted-foreground"})})]},e.key)})}):(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Change the spacing by prompting in the chat box."})})};var l3=a(82959),l6=a(56596),l8=a(99345),l9=a(76255),l7=a(86736);let re=e=>{let{size:t=.666,lightColor:a="#fff",darkColor:s="#ddd",...l}=e,r=t/2,n=(0,g.useId)();return(0,p.jsxs)("svg",{width:"100%",height:"100%",...l,children:[(0,p.jsx)("defs",{children:(0,p.jsxs)("pattern",{id:"".concat(n,"-transparent-pattern"),width:"".concat(t,"rem"),height:"".concat(t,"rem"),patternUnits:"userSpaceOnUse",children:[(0,p.jsx)("rect",{width:"".concat(t,"rem"),height:"".concat(t,"rem"),fill:a}),(0,p.jsx)("rect",{x:"0",width:"".concat(r,"rem"),height:"".concat(r,"rem"),y:"0",fill:s}),(0,p.jsx)("rect",{x:"".concat(r,"rem"),width:"".concat(r,"rem"),height:"".concat(r,"rem"),y:"".concat(r,"rem"),fill:s})]})}),(0,p.jsx)("rect",{width:"100%",height:"100%",fill:"url(#".concat(n,"-transparent-pattern)")})]})};var rt=a(30335);function ra(e){if(!e)return null;try{e=e.replace("#",""),(3===e.length||4===e.length)&&(e=e.split("").map(e=>e+e).join(""));let t=8===e.length,a=parseInt(e.slice(0,2),16),s=parseInt(e.slice(2,4),16),l=parseInt(e.slice(4,6),16),r=t?parseInt(e.slice(6,8),16)/255:1;return{r:isNaN(a)?0:a,g:isNaN(s)?0:s,b:isNaN(l)?0:l,a:isNaN(r)?1:r}}catch(e){return null}}function rs(e,t,a,s){let l=e=>Math.round(e).toString(16).padStart(2,"0"),r=Math.round(255*s);return"#".concat(l(e)).concat(l(t)).concat(l(a)).concat(r<255?l(r):"")}function rl(e,t,a,s){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=Math.max(e/=255,t/=255,a/=255),n=Math.min(e,t,a),i=r-n,o=0,c=0===r?0:i/r;if(r===n)return{h:l,s:100*c,v:100*r,a:s};switch(r){case e:o=(t-a)/i+(t<a?6:0);break;case t:o=(a-e)/i+2;break;case a:o=(e-t)/i+4}return{h:360*(o/=6),s:100*c,v:100*r,a:s}}function rr(e,t,a,s){let l=0,r=0,n=0,i=Math.floor(6*(e/=360)),o=6*e-i,c=(a/=100)*(1-(t/=100)),d=a*(1-o*t),u=a*(1-(1-o)*t);switch(i%6){case 0:l=a,r=u,n=c;break;case 1:l=d,r=a,n=c;break;case 2:l=c,r=a,n=u;break;case 3:l=c,r=d,n=a;break;case 4:l=u,r=c,n=a;break;case 5:l=a,r=c,n=d}return{r:Math.round(255*l),g:Math.round(255*r),b:Math.round(255*n),a:s}}let rn=e=>{if(!e)return{singles:[],groups:[]};let t=[],a=[];for(let[s,l]of Object.entries(e))if("string"!=typeof l){let e=[];for(let[t,a]of Object.entries(l))"string"!=typeof a||a.includes("--")||e.push(["".concat(s,"-").concat(t),a]);e.length>0&&a.push([s,e])}else{if(l.includes("--"))continue;t.push([s,l])}return{singles:t.filter(e=>{let[t]=e;return["black","white"].includes(t)}),groups:a}},ri=g.createContext(null);function ro(e){let{children:t}=e,[a,s]=g.useState(null),l=g.useRef(null),r=g.useCallback(e=>{s(e),l.current=e},[]),n=g.useRef(null),i=g.useCallback(()=>{s(null)},[]);return(0,p.jsxs)(ri.Provider,{value:{showTooltip:r,hideTooltip:i},children:[t,(0,p.jsx)("div",{ref:n,className:(0,eu.cn)("pointer-events-none fixed h-fit w-fit rounded-md border bg-muted px-2 py-1 text-sm text-foreground shadow-sm transition-opacity duration-100 ease-out","bottom-4 right-4 whitespace-nowrap capitalize",a?"opacity-100":"opacity-0"),children:l.current})]})}let rc=e=>{let{color:t,onClick:a,name:s}=e,l=g.useContext(ri),r="transparent"===t?(0,p.jsx)(re,{size:.666,lightColor:"#fff",darkColor:"#ddd"}):(0,p.jsx)("div",{className:"h-full w-full rounded-sm",style:{backgroundColor:t,boxShadow:"0px 0px 0px 1px hsl(0deg 0% 98% / 10%) inset"}});return(0,p.jsx)(Q.z,{className:"h-8 w-8 overflow-hidden rounded-sm border-none bg-transparent p-0 ring-white hover:ring-1",onClick:a,onMouseOver:e=>{e.currentTarget.getBoundingClientRect(),null==l||l.showTooltip(s)},onMouseLeave:()=>null==l?void 0:l.hideTooltip(),children:r})},rd=e=>{let{colors:t,onChange:a}=e,s=g.useMemo(()=>rn(t),[t]);return(0,p.jsx)(ro,{children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[s.groups.map(e=>{let[t,s]=e;return(0,p.jsxs)("div",{children:[(0,p.jsx)(rt.Label,{className:"block pb-2 text-sm capitalize",children:t}),(0,p.jsx)("div",{className:"flex flex-row flex-wrap gap-1.5",children:s.map(e=>{let[t,s]=e;return(0,p.jsx)(rc,{color:s,onClick:()=>a(t),name:t},t)})})]},t)}),(0,p.jsxs)("div",{children:[(0,p.jsx)(rt.Label,{className:"block pb-4 text-sm capitalize",children:"Other Colors"}),(0,p.jsxs)("div",{className:"flex flex-row flex-wrap gap-1.5",children:[s.singles.map(e=>{let[t,s]=e;return(0,p.jsx)(rc,{color:s,onClick:()=>a(t),name:t},t)}),(0,p.jsx)(rc,{color:"transparent",onClick:()=>a("transparent"),name:"transparent"}),(0,p.jsx)(rc,{color:"black",onClick:()=>a("inherit"),name:"inherit"})]})]})]})})};function ru(e){let{color:t,onChange:a,presetColors:s,children:l,disabled:r=!1}=e,[n,i]=g.useState(()=>ra(t)||{r:0,g:0,b:0,a:1}),[o,c]=g.useState(()=>rl(n.r,n.g,n.b,n.a,0)),[d,u]=g.useState(t),[m,h]=g.useState(!1);g.useEffect(()=>{if(t===d)return;let e=ra(t)||{r:0,g:0,b:0,a:1},a=rl(e.r,e.g,e.b,e.a,o.h);i(e),c(a),u(t)},[t,d,o.h]);let x=g.useRef(null),[f,v]=g.useState(!1),b=g.useCallback(e=>{var t;let s=null===(t=x.current)||void 0===t?void 0:t.getBoundingClientRect();if(!s)return;let l=Math.min(Math.max(0,e.clientX-s.left),s.width),r=Math.min(Math.max(0,e.clientY-s.top),s.height),n=l/s.width*100,d=100-r/s.height*100,u=rr(o.h,n,d,o.a);i(u),c({...o,s:n,v:d,a:o.a}),a(rs(u.r,u.g,u.b,u.a))},[o,a]);g.useEffect(()=>{let e=e=>{f&&b(e)},t=()=>{v(!1),document.body.classList.remove("select-none")};return f&&(document.body.classList.add("select-none"),window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{document.body.classList.remove("select-none"),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[f,b]);let j=g.useCallback(e=>{let[t]=e;c({...o,h:t});let s=rr(t,o.s,o.v,o.a);i(s),a(rs(s.r,s.g,s.b,s.a))},[o,a]),y=g.useCallback(e=>{let[t]=e;c({...o,a:t});let s=rr(o.h,o.s,o.v,t);i(s),a(rs(s.r,s.g,s.b,s.a))},[o,a]);return(0,p.jsxs)(e5.J2,{open:m,onOpenChange:r?void 0:h,children:[(0,p.jsx)(e5.xo,{disabled:r,asChild:!0,children:l}),(0,p.jsx)(e5.yk,{className:"mb-0 flex w-[285px] flex-col overflow-y-hidden rounded-lg border border-muted-border bg-popover px-0 pb-0 pt-0 shadow-lg",style:{maxHeight:"var(--radix-popover-content-available-height)"},collisionPadding:5,onKeyDown:e=>{"Escape"===e.key&&(h(!1),e.preventDefault(),e.stopPropagation())},children:(0,p.jsxs)(tc.mQ,{defaultValue:"styles",className:"flex min-h-0 flex-1 flex-col",children:[(0,p.jsxs)(tc.dr,{className:"my-1 w-full px-4",children:[(0,p.jsx)(tc.SP,{disabled:r,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"styles",children:"Styles"}),(0,p.jsx)(tc.SP,{disabled:r,className:"flex-1 data-[state=active]:bg-muted-active data-[disabled]:opacity-50",value:"custom",children:"Custom"})]}),(0,p.jsx)(tc.nU,{value:"styles",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,p.jsx)(ro,{children:!!s&&(0,p.jsx)(rd,{colors:s,onChange:a})})}),(0,p.jsx)(tc.nU,{value:"custom",className:"mt-0 max-h-[400px] min-h-0 flex-1 overflow-y-auto border-t border-muted-border px-4 pb-4 pt-4",children:(0,p.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{ref:x,className:"relative h-56 w-full rounded-md ".concat(r?"cursor-not-allowed opacity-50":"cursor-default"),style:{backgroundColor:"hsl(".concat(o.h,", 100%, 50%)"),backgroundImage:"linear-gradient(to top, #000, transparent), linear-gradient(to right, #fff, transparent)"},onMouseDown:e=>{r||(v(!0),b(e))},children:(0,p.jsx)("div",{className:"absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border-2 border-white shadow-md shadow-muted/50",style:{left:"".concat(o.s,"%"),top:"".concat(100-o.v,"%"),backgroundColor:"rgb(".concat(n.r,", ").concat(n.g,", ").concat(n.b)}})}),(0,p.jsxs)(l7.fC,{disabled:r,min:0,max:360,step:1,value:[o.h],onValueChange:j,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",children:[(0,p.jsx)(l7.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full bg-primary/20",style:{background:"linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%)"},children:(0,p.jsx)(l7.e6,{className:"absolute h-full bg-primary opacity-0"})}),(0,p.jsx)(l7.bU,{className:"block h-4 w-4 rounded-full border-2 border-primary bg-background shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",style:{backgroundColor:"hsl(".concat(o.h,", 100%, 50%)")}})]}),(0,p.jsxs)(l7.fC,{disabled:r,min:0,max:1,step:.01,value:[o.a],onValueChange:y,className:"relative mt-2 flex h-4 w-full touch-none select-none items-center data-[disabled]:opacity-50",style:{"--value":rs(n.r,n.g,n.b,1)},children:[(0,p.jsxs)(l7.fQ,{className:"relative h-4 w-full grow overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(re,{size:.666,lightColor:"#fff",darkColor:"#ddd"})}),(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)("div",{className:"h-full w-full",style:{background:"linear-gradient(to right, transparent 0%, ".concat(rs(n.r,n.g,n.b,1)," 100%)")}})})]}),(0,p.jsx)(l7.bU,{className:"relative block h-4 w-4 rounded-full border-2 border-primary bg-white shadow-md shadow-muted transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",children:(0,p.jsx)("span",{className:"absolute inset-0 rounded-full",style:{backgroundColor:rs(n.r,n.g,n.b,o.a)}})})]})]}),(0,p.jsx)("div",{className:"grid gap-2",children:(0,p.jsx)("div",{className:"grid grid-cols-2 gap-2",children:(0,p.jsxs)("div",{children:[(0,p.jsx)(rt.Label,{className:"text-xs",htmlFor:"hex",children:"Hex"}),(0,p.jsx)(e2.I,{id:"hex",disabled:r,value:d,onChange:e=>{if(r)return;let t=e.target.value;u(t);let s=ra(t);s&&(i(s),c(rl(s.r,s.g,s.b,s.a,0)),a(t))},className:"h-8 bg-input"})]})})})]})})]})})]})}var rm=a(65744);let rp=e=>{var t;let{inputValue:a,cursorPosition:s}=e;if(!a.trim()||null===s)return null;let l=a.substring(0,s),r=a.substring(s),n=l.split(/\s+/),i=(n[n.length-1]||"")+((null===(t=r.match(/^[^\s]*/))||void 0===t?void 0:t[0])||"");if(0===i.length)return null;let o=i.lastIndexOf(":");if(-1!==o){let e=i.substring(0,o+1),t=i.substring(o+1),a=t.length>0;return{completeWord:i,hasModifier:!0,modifier:e,classAfterColon:t,hasClassAfterColon:a}}return{completeWord:i,hasModifier:!1,modifier:"",classAfterColon:"",hasClassAfterColon:!1}},rh=e=>{let{wordInfo:t,getAutocomplete:a,limit:s}=e;if(!t)return{suggestions:[],shouldShow:!1};let{hasModifier:l,modifier:r,classAfterColon:n,hasClassAfterColon:i,completeWord:o}=t;if(l){if(i){let e=a(n,s).map(e=>r+e);return{suggestions:e,shouldShow:e.length>0}}return{suggestions:[],shouldShow:!1}}{let e=a(o,s);return{suggestions:e,shouldShow:e.length>0}}},rx=e=>{var t;let{element:a,currentClassName:s,disabled:l,isOpen:r,onUpdateClassName:n}=e,{getAutocomplete:i}=lF(),o=(0,g.useRef)(null),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(""),[h,x]=(0,g.useState)(null),[f,v]=(0,g.useState)(""),b=(0,g.useRef)(null),j=(0,g.useRef)([]),y=(0,g.useCallback)(e=>{v(e)},[]),w=(0,g.useCallback)(()=>{let e=o.current;e&&x(e.selectionStart||0)},[]);(0,g.useEffect)(()=>{let e=e=>{let t=e.target,a=b.current;!a||a.contains(t)||t instanceof Element&&(t.closest('[role="dialog"]')||t.closest("[cmdk-root]")||t.closest("[data-radix-popper-content-wrapper]"))||d(!1)};if(c)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[c]);let N=(0,g.useMemo)(()=>rh({wordInfo:rp({inputValue:u,cursorPosition:h}),getAutocomplete:i,limit:10}).suggestions,[u,h,i]),E=(0,g.useCallback)(e=>{let t=o.current;if(!t||null===h)return;let s=u.substring(0,h),l=u.substring(h),r=s.split(/\s+/),i=r[r.length-1]||"",c=l.match(/^[^\s]*/),p=(null==c?void 0:c[0])||"",f=l.substring(p.length),g=s.substring(0,s.length-i.length),v=(g+e+" "+f).replace(/\s+/g," ");m(v),n({element:a,className:v}),d(!1),setTimeout(()=>{t.focus();let a=g.length+e.length+1;t.setSelectionRange(a,a),x(a)},0)},[u,h,a,n]),k=(0,g.useCallback)(()=>{d(rh({wordInfo:rp({inputValue:u,cursorPosition:h}),getAutocomplete:i,limit:10}).shouldShow)},[u,h,i]);(0,g.useEffect)(()=>{m(s||"")},[s]),(0,g.useEffect)(()=>{k()},[k]),(0,g.useEffect)(()=>{c&&N.length>0?v(N[0]):v("")},[c,N]);let C=(0,g.useMemo)(()=>N.indexOf(f),[N,f]);return(0,g.useEffect)(()=>{if(C>=0&&j.current[C]){var e;null===(e=j.current[C])||void 0===e||e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[C]),(0,p.jsx)(eW.E.div,{initial:{opacity:0,height:0},animate:{opacity:r?1:0,height:r?"auto":0},transition:{duration:.15,bounce:0},className:"mb-3 flex flex-row gap-2",children:(0,p.jsx)("div",{ref:b,className:"relative w-full pt-2",children:(0,p.jsxs)(e5.J2,{open:!0,children:[(0,p.jsx)(e5.xo,{asChild:!0,children:(0,p.jsx)(lG.g,{ref:o,disabled:l,value:u,className:"w-full !resize-none bg-input outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-1 focus-visible:ring-offset-0",placeholder:"Enter Tailwind classes...",onChange:e=>{let t=e.target.value;m(t),n({element:a,className:t}),x(e.target.selectionStart||0)},onKeyUp:w,onClick:w,onSelect:w,onKeyDown:e=>{if("Escape"===e.key)d(!1);else if("Enter"===e.key)f&&N.includes(f)&&(e.preventDefault(),E(f));else if("ArrowDown"===e.key||"ArrowUp"===e.key){e.preventDefault();let t=(N.indexOf(f)+("ArrowDown"===e.key?1:-1)+N.length)%N.length;y(N[t]||"")}setTimeout(w,0)},onFocus:e=>{x(e.currentTarget.selectionStart||0)}})}),(0,p.jsx)(e5.yk,{className:(0,eu.cn)("max-h-40 w-full overflow-y-auto p-0",{hidden:!c}),side:"bottom",align:"start",style:{width:null===(t=o.current)||void 0===t?void 0:t.offsetWidth},children:(0,p.jsx)(e1.mY,{autoFocus:!1,value:f,onValueChange:y,children:(0,p.jsx)(e1.e8,{children:(0,p.jsx)(e1.fu,{children:N.map((e,t)=>(0,p.jsx)("div",{ref:e=>{j.current[t]=e},children:(0,p.jsx)(e1.di,{value:e,onSelect:()=>E(e),children:(0,p.jsx)("span",{className:"text-xs",children:e})})},e))})})})})]})})})},rf=(e,t,a)=>{let{openFileAtLine:s,openFileAtLineRange:l}=(0,tT.r)(),{hideVisualEditsPanel:r}=(0,e6.S9)(),{switchToView:n}=(0,eA.Z)();return(0,g.useCallback)(()=>{if(!e.filePath)return;n("codeEditor");let i=(0,sP.xA)(e,t);i?l(e.filePath,i.startLine,i.endLine):s(e.filePath,e.lineNumber),(null==a?void 0:a.hidePanel)&&r()},[e,n,t,null==a?void 0:a.hidePanel,l,s,r])},rg=e=>{let t,a;if(!e)return;let s=1;if(e.modifier){var l,r;s=(null===(l=e.modifier)||void 0===l?void 0:l.startsWith("["))&&(null===(r=e.modifier)||void 0===r?void 0:r.endsWith("]"))?parseFloat(e.modifier.replace(/[\[\]]/g,"")):parseInt(e.modifier)/100}if("inherit"===e.valueDef.raw)return;"transparent"===e.valueDef.raw&&(s=0),e.valueDef.raw.startsWith("#")?a=e.valueDef.raw:(t=e.valueDef.raw,a=e.value);let n=ra(a);if(!n)return{name:t,hex:void 0};let i=rs(n.r,n.g,n.b,s);return{name:t||i,hex:i,hexWithoutAlpha:rs(n.r,n.g,n.b,1)}},rv={fontSize:{xs:"XS",base:"Body",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL","4xl":"4XL","5xl":"5XL","6xl":"6XL","7xl":"7XL","8xl":"8XL","9xl":"9XL"},borderRadius:{none:"None",DEFAULT:"Default",sm:"Small",md:"Medium",lg:"Large",xl:"XL","2xl":"2XL","3xl":"3XL",full:"Full"}},rb=e=>{var t,a;let{element:s,isDisabled:l,immediateValues:r,debouncedOnClassNameUpdate:n,onSelectParent:i}=e,{currentClassName:o,ast:c}=(0,tu.v)(),d=(0,lU.B)(s),{handleUpdateClassName:u,handleUpdateClassNameAdvanced:m}=l$(),{theme:h,getRelevantTwClass:x}=lM(),f=rf(s,c,{hidePanel:!0}),v={fontSize:{property:"fontSize",placeholder:"Select font size",getValue:(e,t)=>{var a;return(null===(a=t({className:e,property:"fontSize"}))||void 0===a?void 0:a.valueDef.raw)||"base"},options:e=>Object.entries((null==e?void 0:e.fontSize)||{}),nameMap:rv.fontSize},fontWeight:{property:"fontWeight",placeholder:"Select weight",getValue:(e,t)=>{var a;return null===(a=t({className:e,property:"fontWeight"}))||void 0===a?void 0:a.valueDef.raw},options:e=>Object.entries((null==e?void 0:e.fontWeight)||{}).filter(e=>{let[t]=e;return"black"!==t}),nameMap:null}},b=rg(x({className:o,property:"textColor"})),j=rg(x({className:o,property:"backgroundColor"})),[y,w]=(0,g.useState)(!1),N=(0,g.useCallback)((e,t)=>{var a;return null!==(a=r[e])&&void 0!==a?a:t},[r]),E=null===(t=x({className:o,property:"textAlign"}))||void 0===t?void 0:t.value,k=null!==o,C="text"!==d&&"button"!==d,_="div"!==d&&"button"!==d,T=C&&_;return(0,p.jsx)(p.Fragment,{children:k?(0,p.jsxs)(p.Fragment,{children:[T?null:(0,p.jsxs)("div",{className:"flex flex-grow flex-col gap-2",children:[(0,p.jsxs)(lJ,{isDisabled:C,children:[lX.typography.map(e=>{let t=v[e.key];return(0,p.jsx)(lH,{title:e.title,children:(0,p.jsxs)(sq.Ph,{name:t.property,disabled:l,onValueChange:e=>{e&&(S.ZP.capture("visual_edits:".concat(t.property,"_changed")),n({property:t.property,value:e}))},onOpenChange:e=>{e||u({element:s,classObj:[{property:t.property,value:t.getValue(o,x)}]})},value:t.getValue(o,x),children:[(0,p.jsx)(sq.i4,{className:"h-7 bg-input",name:t.property,"aria-label":"".concat(e.title," selector"),children:(0,p.jsx)(sq.ki,{placeholder:t.placeholder})}),(0,p.jsx)(sq.Bw,{children:t.options(h).map(e=>{var a;let[l,r]=e;return(0,p.jsx)(sq.Ql,{"data-value":l,value:l,onFocus:e=>{let a=e.target.getAttribute("data-value");a&&requestAnimationFrame(()=>{u({element:s,classObj:[{property:t.property,value:a}],preview:!0})})},children:t.nameMap?null!==(a=t.nameMap[l])&&void 0!==a?a:l:(0,p.jsx)("span",{className:"capitalize",children:l})},l)})})]})},e.key)}),(0,p.jsx)(lH,{title:lq.color,children:(0,p.jsx)(ru,{disabled:l,presetColors:null==h?void 0:h.colors,color:N("textColor",null==b?void 0:b.hex)||"transparent",onChange:e=>{e&&(S.ZP.capture("visual_edits:text_color_changed"),n({property:"textColor",value:e||"inherit"}))},children:(0,p.jsxs)(Q.z,{variant:"outline",disabled:l,className:"flex h-7 w-full justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,p.jsxs)("div",{className:"relative mr-1 h-4 w-4 shrink-0 overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(re,{})}),(0,p.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==b?void 0:b.hexWithoutAlpha}}),(0,p.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==b?void 0:b.hex}})]}),(0,p.jsx)("span",{className:"truncate",children:(null==b?void 0:b.name)||"Inherit"})]})},"".concat(s.filePath,":").concat(s.lineNumber))}),(0,p.jsx)(lH,{title:lq.textAlign,children:(0,p.jsxs)(rm.E,{className:"flex flex-row justify-end gap-1",value:E,onValueChange:e=>n({property:"textAlign",value:e}),children:[(0,p.jsxs)(rt.Label,{title:"Left",children:[(0,p.jsx)(rm.m,{value:"left",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(Q.z,{variant:"outline",className:(0,eu.cn)("bg-input p-2",{"bg-accent":"left"===E}),onClick:()=>n({property:"textAlign",value:"left"}),children:(0,p.jsx)(l8.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(rt.Label,{title:"Center",children:[(0,p.jsx)(rm.m,{value:"center",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(Q.z,{variant:"outline",className:(0,eu.cn)("bg-input p-1.5",{"bg-accent":"center"===E}),onClick:()=>n({property:"textAlign",value:"center"}),children:(0,p.jsx)(l3.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(rt.Label,{title:"Right",children:[(0,p.jsx)(rm.m,{value:"right",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(Q.z,{variant:"outline",className:(0,eu.cn)("bg-input p-2",{"bg-accent":"right"===E}),onClick:()=>n({property:"textAlign",value:"right"}),children:(0,p.jsx)(l9.Z,{className:"size-4 fill-muted-foreground"})})]}),(0,p.jsxs)(rt.Label,{title:"Justify",children:[(0,p.jsx)(rm.m,{value:"justify",className:"peer rounded-full p-2",hidden:!0}),(0,p.jsx)(Q.z,{variant:"outline",className:(0,eu.cn)("bg-input p-2",{"bg-accent":"justify"===E}),onClick:()=>n({property:"textAlign",value:"justify"}),children:(0,p.jsx)(l6.Z,{className:"size-4 fill-muted-foreground"})})]})]})})]}),(0,p.jsxs)(lJ,{isDisabled:_,children:[(0,p.jsx)(lH,{title:lq.background,children:(0,p.jsx)(ru,{disabled:l,color:N("backgroundColor",null==j?void 0:j.hex)||"transparent",onChange:e=>{e&&(S.ZP.capture("visual_edits:background_color_changed"),n({property:"backgroundColor",value:e||"inherit"}))},presetColors:null==h?void 0:h.colors,children:(0,p.jsxs)(Q.z,{variant:"outline",disabled:l,className:"flex h-7 w-full items-center justify-start rounded-md border border-input bg-input px-3 py-1 text-left font-normal shadow-sm transition-colors hover:bg-input",children:[(0,p.jsxs)("div",{className:"relative mr-2 size-3.5 overflow-hidden rounded-full",children:[(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)(re,{})}),(0,p.jsx)("div",{className:"absolute inset-y-0 left-0 w-2",style:{backgroundColor:null==j?void 0:j.hexWithoutAlpha}}),(0,p.jsx)("div",{className:"absolute inset-y-0 right-0 w-2",style:{backgroundColor:null==j?void 0:j.hex}})]}),(0,p.jsx)("span",{className:"truncate",children:(null==j?void 0:j.name)||"Inherit"})]})},"".concat(s.filePath,":").concat(s.lineNumber))}),(0,p.jsx)(lH,{title:lq.borderRadius,children:(0,p.jsxs)(sq.Ph,{disabled:l,onValueChange:e=>e&&n({property:"borderRadius",value:e}),value:(null===(a=x({className:o,property:"borderRadius"}))||void 0===a?void 0:a.valueDef.raw)||"none",children:[(0,p.jsx)(sq.i4,{className:"h-7 bg-input hover:bg-input",children:(0,p.jsx)(sq.ki,{placeholder:"Select border radius"})}),(0,p.jsx)(sq.Bw,{children:Object.entries((null==h?void 0:h.borderRadius)||{}).map(e=>{var t;let[a,s]=e;return(0,p.jsx)(sq.Ql,{value:a,children:null!==(t=rv.borderRadius[a])&&void 0!==t?t:"Default"},a)})})]})})]})]}),(0,p.jsxs)(e5.J2,{open:y,onOpenChange:w,children:[(0,p.jsx)(e5.xo,{asChild:!0,children:(0,p.jsxs)(Q.z,{variant:"ghost",className:"w-full justify-between gap-1",children:["Advanced",(0,p.jsx)(et.Z,{name:"chevron_right",size:"small"})]})}),(0,p.jsx)(e5.yk,{side:"right",align:"start",children:(0,p.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,p.jsxs)(Q.z,{onClick:i,variant:"ghost",className:"justify-start pl-2",children:[(0,p.jsx)(et.Z,{name:"ink_selection",size:"small"}),"Select parent"]}),s.filePath&&(0,p.jsxs)(Q.z,{onClick:f,variant:"ghost",className:"justify-start pl-2",children:[(0,p.jsx)(et.Z,{name:"code",size:"small"}),"Go to code"]}),(0,p.jsx)(rx,{element:s,currentClassName:o,disabled:l,isOpen:y,onUpdateClassName:m})]})})]})]}):(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"Change the styles by prompting in the chat box."})})};function rj(e){let{element:t,canEdit:a,isSaving:s,handleRemoveNode:l,isDisabled:r}=e;return(0,p.jsxs)(ee.Vq,{children:[(0,p.jsx)(ee.hg,{children:(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(Q.z,{disabled:!a||s||r,variant:"ghost",size:"icon-sm","aria-label":"quick actions",className:"hover:bg-destructive",children:(0,p.jsx)(et.Z,{name:"delete",size:"small",className:"size-6 text-destructive-foreground"})})}),(0,p.jsx)(ed._v,{children:(0,p.jsx)("p",{children:"Delete element"})})]})}),(0,p.jsx)(ee.cZ,{className:"p-4",size:"sm",children:(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{children:"Delete Element"}),(0,p.jsx)(ee.Be,{children:"Are you sure you want to delete this element?"}),(0,p.jsxs)(ee.cN,{className:"flex gap-2 pt-4",children:[(0,p.jsx)(ee.GG,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"outline",children:"Cancel"})}),(0,p.jsx)(ee.GG,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"destructive",onClick:()=>l(t),children:"Delete"})})]})]})})]})}function ry(e){var t;let{element:a,canEdit:s,isSaving:l}=e,r=sD(),[n,i]=(0,g.useState)({}),{authUser:o}=(0,b.Eu)(),d=(0,e6.UC)(e=>e.activeEditContent),{setActiveEditContent:u}=(0,e6.S9)(),{ast:m,currentClassName:h}=(0,tu.v)(),{handleRemoveNode:x,handleDuplicateNode:f,undoLastOperation:v,initializeClassName:j,handleTextChange:y,handleImageChange:w,handleUpdateClassName:N}=l$(),{getRelevantTwClass:E,parse:k,classname:C}=lM(),_=(0,g.useRef)({});(0,g.useEffect)(()=>{j(a,m)},[a,m,j]),(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[a,f,x,v]);let T=(0,to.A7)(e=>e.addUpload),R=(0,lU.B)(a),I=l||!s||null===h,D=(0,g.useCallback)(e=>{var t;let s=e.property,l=Date.now();i(t=>({...t,[s]:e.value})),_.current[s]&&cancelAnimationFrame(_.current[s].rafId);let r=()=>{let e=_.current[s];if(e){let t=k(C(e.immediateValue));if("error"===t.kind)return;let r=t.valueDef.raw,n=[e.immediateValue];if("backgroundColor"===e.immediateValue.property&&"button"===R&&r.split("-").length>1){let[e,t]=r.split("-"),a=parseInt(t)-100;if((a=100*Math.floor(a/100))>0){let t="".concat(e,"-").concat(a);n.push({property:"backgroundColor",value:t,variants:[{kind:"named",type:"interaction",value:"hover"}]})}}N({element:a,classObj:n}),_.current[s].lastUpdateTime=l,delete _.current[s]}};_.current[s]={rafId:0,lastValue:e,immediateValue:e,lastUpdateTime:(null===(t=_.current[s])||void 0===t?void 0:t.lastUpdateTime)||0},_.current[s].rafId=requestAnimationFrame(()=>{r()})},[C,a,R,N,k]),P=(0,ez.f6)(e=>"live"!==e.visibleMode&&"live"===e.targetMode),{hasInitialCode:z}=(0,tu.v)(),A=P||!z,O=(0,p.jsxs)(lJ,{isDisabled:"img"!==R,children:[(0,p.jsx)(lH,{title:lq.image,children:(0,sP.cB)(a,m,"src")?(0,p.jsx)(lB,{disabled:I||!(0,sP.cB)(a,m,"src"),onUrlSubmitted:e=>w(a,e),onImagesUploaded:e=>{e.length>0&&(S.ZP.capture("visual_edits:image_uploaded"),T({dir_name:o.uid,file_name:e[0].name,type:e[0].type,id:e[0].id}),w(a,"/lovable-uploads/".concat(e[0].name),e[0].downloadUrl))}}):(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"This element contains dynamic elements and its image cannot be manually edited. Please use the chat to change the image."})}),(0,p.jsx)(lH,{title:lq.resize,children:(0,p.jsxs)(sq.Ph,{disabled:I,onValueChange:e=>e&&D({property:"objectFit",value:e}),value:((null===(t=E({className:h,property:"objectFit"}))||void 0===t?void 0:t.valueDef.raw)||"object-none").replace("object-",""),children:[(0,p.jsx)(sq.i4,{className:"bg-input",children:(0,p.jsx)(sq.ki,{placeholder:"Select border radius"})}),(0,p.jsxs)(sq.Bw,{className:"bg-popover",children:[(0,p.jsx)(sq.Ql,{value:"contain",children:"Contain"}),(0,p.jsx)(sq.Ql,{value:"cover",children:"Cover"}),(0,p.jsx)(sq.Ql,{value:"fill",children:"Fill"}),(0,p.jsx)(sq.Ql,{value:"none",children:"None"}),(0,p.jsx)(sq.Ql,{value:"scale-down",children:"Scale down"})]})]})})]}),L=(0,sP.H2)(a,m),Z="text"===R||"button"===R||"link"===R,M=!L&&!Z;return(0,p.jsx)("div",{className:"flex shrink-0 items-center gap-1.5",children:A?(0,p.jsxs)("div",{className:"flex shrink-0 items-center gap-2",children:[(0,p.jsx)("p",{className:"text-sm",children:"Starting live preview..."}),(0,p.jsx)(sJ.$,{variant:"ring",size:"default"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(e5.J2,{open:"quickActions"===d,onOpenChange:e=>u(e?"quickActions":null),children:[(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(e5.xo,{asChild:!0,children:M?null:(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit quick actions",disabled:A,className:(0,eu.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"quickActions"===d}),children:(0,p.jsx)(et.Z,{name:"img"===R?"image":"text_fields",size:"small"})})})}),(0,p.jsx)(ed._v,{children:(0,p.jsx)("p",{children:"img"===R?"Edit image":"Edit content"})})]}),(0,p.jsx)(e5.yk,{side:"bottom",align:"center",className:"p-2",children:(0,p.jsx)(lY,{element:a,disabled:!s,canEditText:L,onTextChange:y,imageUploadSection:O})})]}),(0,p.jsxs)(e5.J2,{open:"spacing"===d,onOpenChange:e=>u(e?"spacing":null),children:[(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(e5.xo,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit spacing",disabled:A,className:(0,eu.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"spacing"===d}),children:(0,p.jsx)(et.Z,{name:"zoom_out_map",size:"small"})})})}),(0,p.jsx)(ed._v,{children:(0,p.jsx)("p",{children:"Edit spacing"})})]}),(0,p.jsx)(e5.yk,{side:"bottom",align:"center",className:"p-2",children:(0,p.jsx)(l4,{element:a,disabled:I})})]}),(0,p.jsxs)(e5.J2,{open:"style"===d,onOpenChange:e=>u(e?"style":null),children:[(0,p.jsxs)(ed.u,{children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)(e5.xo,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm","aria-label":"visual edit style",disabled:A,className:(0,eu.cn)({"bg-affirmative-primary text-white hover:bg-affirmative-primary":"style"===d}),children:(0,p.jsx)(et.Z,{name:"brush",size:"small"})})})}),(0,p.jsx)(ed._v,{children:(0,p.jsx)("p",{children:"Edit styles"})})]}),(0,p.jsx)(e5.yk,{side:"bottom",align:"center",className:"flex flex-col gap-2 p-2",children:(0,p.jsx)(rb,{element:a,isDisabled:I,immediateValues:n,debouncedOnClassNameUpdate:D,onSelectParent:()=>{r({type:c.GET_PARENT_ELEMENT,payload:{id:{filePath:a.filePath,lineNumber:a.lineNumber,col:a.col}}})}})})]}),(0,p.jsx)(rj,{element:a,canEdit:s,isSaving:l,handleRemoveNode:x,isDisabled:A})]})})}function rw(e){let{selectedElement:t,prevSelectedElementRef:a,selectedElements:s}=e,l=(0,Y.iZ)(e=>e.projectId),{turnOffVisualEditing:r}=(0,e6.S9)(),n=(0,g.useRef)(null),i=(0,e6.UC)(e=>e.customPromptValue),{setCustomPromptValue:o}=(0,e6.S9)(),{hasUnsavedChanges:c}=(0,tu.v)(),d=(0,e6.UC)(e=>e.isVisualEditingActive)&&c;(0,g.useEffect)(()=>{var e,s;t.id!==(null===(e=a.current)||void 0===e?void 0:e.id)&&void 0!==t.id&&(null===(s=n.current)||void 0===s||s.focus())},[t,a]);let u=(0,sk.mo)({projectId:l}),m=async e=>{if(e.preventDefault(),i.trim()&&!u.isPending){if(d){v.Am.error("Save the manual edits first.",{duration:6e3});return}await u.mutateAsync({body:{id:(0,O.Fd)(),message:i.trim(),images:[],selected_elements:s,chat_only:!1,agent_mode:void 0},clear:()=>{o(""),r()}})}};return(0,p.jsxs)("form",{className:"flex h-full w-full items-center gap-1.5",onSubmit:m,children:[(0,p.jsx)(e2.I,{placeholder:"Ask for quick changes...",value:i,disabled:d,onChange:e=>o(e.target.value),className:(0,eu.cn)("h-8 min-w-0 grow border-none p-0 shadow-none focus-visible:ring-0 focus-visible:ring-offset-0",{"opacity-40":d}),ref:n}),(0,p.jsx)("button",{type:"submit",disabled:d,className:(0,eu.cn)("flex h-5 w-6 items-center justify-center rounded-full bg-muted-foreground text-popover",{"bg-affirmative-primary text-white":!!i}),children:(0,p.jsx)(et.Z,{name:"arrow_upward_alt_600",size:"small"})})]})}let rN=e=>{let{position:t}=e,{selectedElements:a,canEdit:s}=sG(),{turnOffVisualEditing:l,closeVisualEditsPanel:r}=(0,e6.S9)(),n=a[0],{syncCode:i,generateAst:o,hasUnsavedChanges:d,refreshPreview:u}=(0,tu.v)(),{undoLastOperation:m}=l$();(0,to.A7)(e=>e.clearPendingChanges),(0,to.A7)(e=>e.clearUploads);let{snapshot:h}=(0,to.ag)(),x=(0,g.useRef)(null),f=(0,e6.UC)(e=>e.isSaving),{setIsSaving:v}=(0,e6.S9)(),b=(0,g.useCallback)(async()=>(S.ZP.capture("visual_edits:save_clicked"),v(!0),i(h.getPendingChanges()).then(()=>{v(!1),l()})),[v,h,i,l]);(0,eo.y1)("meta+z",e=>{e.preventDefault(),s&&m()}),(0,eo.y1)("meta+enter",e=>{e.preventDefault(),s&&b().finally(()=>{l()})}),(0,eo.y1)("esc",e=>{e.preventDefault(),r()},{enableOnFormTags:!0});let j=sD();(0,g.useEffect)(()=>()=>{j({type:c.TOGGLE_SELECTOR,payload:{isActive:!1}}),j({type:c.UPDATE_SELECTED_ELEMENTS,payload:[]})},[j]);let y=(0,g.useRef)(null);return(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload;switch(t){case"Meta+z":s&&m();break;case"Meta+Enter":s&&b()}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,b,d,l,m]),(0,p.jsxs)(eW.E.div,{className:"fixed z-[9999] flex items-center gap-3 rounded-2xl bg-popover px-3",style:{width:400,left:t.x,top:t.y,boxShadow:"0px 0px 10px 0px rgba(0, 0, 0, 0.1)"},initial:!1,animate:{height:40},transition:{duration:0},ref:x,children:[(0,p.jsx)("div",{className:"relative h-full w-full",children:(0,p.jsx)(rw,{selectedElement:n,prevSelectedElementRef:y,selectedElements:a,onSave:b})}),(0,p.jsx)("div",{className:"w-[3px] bg-muted-hover",style:{height:24}}),(0,p.jsx)(ry,{element:n,canEdit:s,isSaving:f})]})},rE=()=>{let{handleDeactivatePickAndEdit:e}=sG(),{enableServer:t}=(0,tu.v)(),{setIsPickAndEditActive:a}=(0,e6.S9)();return(0,g.useEffect)(()=>(t(),a(!0),()=>{e()}),[t,e,a]),null},rk=()=>{let e=(0,e6.UC)(e=>e.isVisualEditingActive),t=(0,e6.UC)(e=>e.visualEditsPanelState),{turnOffVisualEditing:a}=(0,e6.S9)();return sH(),(0,g.useEffect)(()=>{let e=e=>{if(e.data.type===c.KEYBIND){let{compositeKey:t}=e.data.payload;switch(t){case"Alt+S":case"Alt+\xdf":a()}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[a]),(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(rE,{}),e&&t.isOpen&&(0,p.jsx)(rN,{position:t.position})]})},rC=e=>{let{children:t,className:a}=e,s=(0,ez.f6)(e=>e.device),l=(0,g.useMemo)(()=>{switch(s){case"mobile":return{width:"375px",height:"100%"};case"tablet":return{width:"768px",height:"100%"};default:return{width:"100%",height:"100%"}}},[s]);return(0,p.jsx)("div",{className:(0,eu.cn)("flex flex-col justify-center transition-all ease-in-out",a),style:{width:l.width,height:l.height},children:t})};var r_=a(49790);let rS=e=>{let{hotkey:t,className:a}=e;return(0,p.jsx)("kbd",{className:(0,eu.cn)("border-current/30 ml-1 flex h-4 items-center rounded-sm border px-1 text-[9px] font-medium text-inherit transition-colors group-hover:border-foreground",a),children:t.toUpperCase()})},rT=g.forwardRef((e,t)=>{let{hidden:a=!1,disabled:s=!1,hotkey:l,showHotkey:r=!1,onClick:n,hotkeyOptions:i,className:o,...c}=e;return((0,eo.y1)(l||"",e=>{e.preventDefault(),n&&n(e)},{enabled:!s,...i},[n]),a)?null:(0,p.jsxs)(Q.z,{ref:t,disabled:s,onClick:n,...c,className:(0,eu.cn)("group",o),children:[c.children,r&&l&&(0,p.jsx)(rS,{hotkey:l})]})});rT.displayName="HotkeyButton";var rR=a(5620);let rI=e=>{let{projectId:t,errors:a,allErrors:s,clearErrors:l,canAIFix:r}=e,{onClick:n,isPending:i}=(0,aL.hw)({projectId:t,errors:s}),{switchToView:o,activeView:c}=(0,eA.Z)(),[d,u]=(0,g.useState)(!1),[m,h]=(0,g.useState)(!1),x=(0,A.bk)(e=>e.isSendChatMessageMutationPending);return(0,g.useEffect)(()=>{a&&0!==a.length?u(!0):u(!1)},[a]),(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 overflow-hidden",style:{height:"100%"},children:(0,p.jsx)("div",{className:(0,eu.cn)("pointer-events-auto absolute bottom-0 left-1/2 mb-36 w-5/6 max-w-[440px] -translate-x-1/2 transform rounded-lg shadow-lg transition-all duration-500 ease-in-out md:mb-4 ".concat(d?"translate-y-0 opacity-100":"translate-y-full opacity-0")),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:(0,p.jsxs)(rR.Zb,{className:"overflow-hidden p-1",children:[(0,p.jsx)(rR.aY,{className:"p-4",children:(0,p.jsx)("div",{className:"flex w-full flex-col items-start justify-start",children:(0,p.jsxs)("div",{className:"flex w-full items-end justify-between gap-6",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsxs)("div",{className:"mb-1 flex items-center",children:[(0,p.jsx)(et.Z,{name:"warning",size:"default",className:"mr-2"}),(0,p.jsx)("p",{className:"text-base font-medium",children:"Error"})]}),(0,p.jsx)("div",{className:"flex flex-col",children:(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:aL.v7[a[0].type]})})]}),(0,p.jsxs)("div",{className:"flex flex-col items-end justify-end gap-2",children:[(0,p.jsx)(rT,{variant:"outline",onClick:()=>{o("error",{errors:s,code:void 0,messageId:void 0,editId:void 0,hasDiffs:!1})},hotkey:"L",showHotkey:!0,children:"Show logs"}),r&&(0,p.jsx)(rT,{variant:"default",className:"w-full",onClick:()=>{l(),n()},disabled:i||x||"error"===c,hotkey:"F",showHotkey:!0,children:"Try to fix"})]})]})})}),m&&(0,p.jsx)("div",{className:"absolute right-0 top-0",children:(0,p.jsx)(Q.z,{variant:"ghost",size:"icon",onClick:()=>{l()},className:"h-6 w-6",children:(0,p.jsx)(et.Z,{name:"close",size:"default"})})})]})})})},rD=e=>{let{projectId:t}=e,{store:a,clearBlankScreenErrors:s}=(0,C.D)(),l=a(e=>e.runtimeErrors),r=null==l?void 0:l.filter(e=>e.has_blank_screen);if(!r||0===r.length)return null;let n=r.map(e=>{let{message:t,...a}=e;return{id:(0,r_.Xm)("error").toString(),created_at:aA.EK.fromDate(new Date),type:aO.N.RUNTIME,occurred_at:new Date().toISOString(),error_message:t,meta_data:{...a}}});return(0,p.jsx)(rI,{projectId:t,allErrors:n,errors:n,clearErrors:s,canAIFix:!0})},rP=()=>{let e=(0,B.v)();return e?(0,p.jsx)(rD,{projectId:e}):(R.logging.error("projectId is not defined, this should not happen"),null)},rz=e=>{let{children:t}=e;return(0,p.jsxs)(p.Fragment,{children:[t,(0,p.jsx)(rP,{})]})};var rA=a(28287),rO=a(24431);let rL=(0,rO.default)(()=>a.e(9289).then(a.bind(a,9289)).then(e=>e.AnnotationView),{loadableGenerated:{webpack:()=>[9289]},loading:()=>(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:"Loading annotation view..."})});var rZ=a(3989);let rM=e=>{var t,a,s;let{errors:l,allErrors:r}=e,n=l.find(e=>{var t;return null===(t=e.meta_data)||void 0===t?void 0:t.url}),i=null==n?void 0:null===(t=n.meta_data)||void 0===t?void 0:t.url,o=null==n?void 0:null===(a=n.meta_data)||void 0===a?void 0:a.method,c=null==n?void 0:null===(s=n.meta_data)||void 0===s?void 0:s.origin,d=l.length===r.length?"This":"At least one of these";return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-sm",children:[d," is a Cross-Origin Resource Sharing (CORS) error. It means that the HTTP call you made is not allowed by the server. This could be because the server is not configured to accept requests from the client URL. Unfortuantely this is not something that the AI can fix for you since we don't control the server you're trying to communicate with."]}),(0,p.jsx)("p",{className:"text-sm",children:"If you are in control of the server, please configure the server to accept requests from the client URL. If you are not in control of the server, please contact the server administrator to configure the server to accept requests from the client URL. If it's not possible to change the CORS configuration, explore other API services that do allow requests directly from the browser."}),(0,p.jsx)("table",{className:"text-sm",children:(0,p.jsxs)("tbody",{children:[i&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"URL"}),(0,p.jsx)("td",{children:i})]}),o&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"Method"}),(0,p.jsx)("td",{children:o})]}),c&&(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{className:"font-medium",children:"Origin"}),(0,p.jsx)("td",{children:c})]})]})})]})};var rF=a(91935),rU=a(9),rK=a(28069);let rV=e=>"string"==typeof e?e:(0,rF.l)((0,rU.K)(e.seconds),new Date),rW=e=>{switch(e){case aO.N.CORS_ERROR:return"CORS error";case aO.N.HTTP_SERVER_ERROR:return"HTTP server error";case aO.N.HTTP_CLIENT_ERROR:return"HTTP client error";case aO.N.SUPABASE_EDGE_FUNCTION_ERROR:return"Supabase edge function error";case aO.N.BUILD:return"Build error";case aO.N.RUNTIME:case aO.N.IMMEDIATE_RUNTIME:return"Runtime error";default:return"Error"}};function rB(e){let{hideFn:t}=e,{clearBlankScreenErrors:a}=(0,C.D)();return(0,p.jsx)(Q.z,{variant:"secondary",size:"sm",onClick:()=>{a(),t()},children:"Dismiss"})}function rG(e){let{error:t,hideFn:a}=e,s=(0,B.D)(),{onClick:l,isPending:r}=(0,aL.hw)({projectId:s,errors:[t]}),n=(0,A.bk)(e=>e.isSendChatMessageMutationPending),{exitView:i}=(0,eA.Z)(),{setView:o}=(0,rK.zp)(),c=(0,y.Z)("md");return(0,p.jsxs)(Q.z,{variant:"secondary",size:"sm",disabled:r||n,onClick:()=>{i(),c&&o(rK.$.CHAT),a(),l()},children:[(0,p.jsx)(et.Z,{name:"bolt",size:"small"}),"Try to fix"]})}let rH=e=>{let{error:t}=e,[a,s]=(0,g.useState)(!1),{exitView:l}=(0,eA.Z)();return a?null:(0,p.jsxs)("div",{className:"rounded-xl bg-warning",children:[(0,p.jsxs)("div",{className:"flex flex-row items-center justify-between pb-1 pl-3 pr-1.5 pt-1.5",children:[(0,p.jsxs)("div",{className:"flex flex-row items-center text-sm text-warning-foreground",children:[(0,p.jsx)(et.Z,{name:"warning",size:"small",className:"mr-2"}),(0,p.jsx)("p",{className:"mr-2 font-medium",children:rW(t.type)}),(0,p.jsx)("p",{className:"leading-none",children:rV(t.created_at)})]}),(0,p.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,p.jsx)(rB,{hideFn:()=>{s(!0),l()}}),(0,p.jsx)(rG,{error:t,hideFn:()=>{s(!0)}})]})]}),(0,p.jsx)(aL.UL,{errors:[t],roundedTop:!1})]})},rJ=e=>{var t,a,s;let{errors:l,allErrors:r}=e;return l.length!==r.length?(0,p.jsx)("p",{className:"text-sm",children:"At least one of these HTTP calls failed which means that the server or API you're trying to communicate with is not working properly. Unfortunately this is not something that the AI can fix for you since we don't control the server that you're trying to communicate with."}):(0,p.jsxs)("p",{className:"text-sm",children:["This is an HTTP server error which means that the server or API you're trying to communicate with is not working properly.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),"Unfortunately this is not something that the AI can fix for you since we don't control the server that you're trying to communicate with.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),(null===(t=l[0].meta_data)||void 0===t?void 0:t.url)&&!(null===(a=l[0].meta_data)||void 0===a?void 0:a.status)&&(0,p.jsxs)(p.Fragment,{children:["Please validate that the url"," ",(0,p.jsx)("pre",{className:"inline-block rounded bg-secondary p-1",children:null===(s=l[0].meta_data)||void 0===s?void 0:s.url})," ","is correct."]})]})},rq=e=>{let{errors:t}=e;if(!aL.t6[t[0].type])return null;let a=[...t].sort((e,t)=>t.created_at.seconds-e.created_at.seconds),s=a.filter(e=>e.type===aO.N.CORS_ERROR),l=a.filter(e=>e.type===aO.N.HTTP_SERVER_ERROR);return(0,p.jsxs)(p.Fragment,{children:[s.length>0&&(0,p.jsx)(rM,{errors:s,allErrors:t}),l.length>0&&(0,p.jsx)(rJ,{errors:l,allErrors:t}),t.map(e=>(0,p.jsx)(rH,{error:e},e.id))]})},rX=()=>{let e=(0,en.VJ)(e=>e.errorContent),t=(0,B.v)();if(!t)throw Error("Project ID is required and should always be set here");return e&&0!==e.length?(0,p.jsx)(rq,{errors:e,projectId:t}):null},r$=(e,t)=>{let a="".concat(t,"-");switch(e.type){case"text":let s=e.content.trim().substring(0,20)||"empty-text";a+="text-".concat(s);break;case"writing_file":a+="file-".concat(e.file_path);break;case"edit":a+="edit-".concat(e.file_path);break;case"delete":a+="delete-".concat(e.file_path);break;case"rename":a+="rename-".concat(e.original_file_path,"-").concat(e.new_file_path);break;case"add_dependency":a+="add-dep-".concat(e.dependency);break;case"remove_dependency":a+="remove-dep-".concat(e.removed_dependency);break;case"error":let l=e.error_message.trim().substring(0,20)||"empty-error";a+="error-".concat(l);break;case"lov-mermaid":let r=e.mermaidCode.trim().substring(0,20)||"empty-mermaid";a+="mermaid-".concat(r);break;case"tool_use":a+="tool-use-".concat(e.name,"-").concat(e.data.substring(0,20));break;default:a+="unknown-".concat(Math.random().toString(36).substring(2,9))}return a};var rY=a(96179),rQ=a(92044);let r0=e=>{let{diffAvailable:t}=e,a=(0,rZ.hT)(e=>e.codeViewType),{setCodeViewType:s}=(0,rZ.VK)(),l=(0,en.VJ)(e=>e.activeEditId),r=(0,z.aK)(e=>e.edits),n=l?r[l]:null;return(0,p.jsxs)(rY.t,{className:"ml-auto",type:"single",variant:"outline",value:a,defaultValue:rZ.es.RAW,onValueChange:e=>{e&&(s(e),e===rZ.es.RAW?S.ZP.capture(I.SL.PREVIEW.RAW_TAB_CLICKED):e===rZ.es.DIFF&&S.ZP.capture(I.SL.PREVIEW.DIFF_TAB_CLICKED))},children:[(null==n?void 0:n.type)!==rQ.I.type.REVERT&&(0,p.jsx)(rY.G,{size:"sm",className:"h-7",value:rZ.es.RAW,children:"Raw"}),(0,p.jsx)(rY.G,{size:"sm",className:"h-7",disabled:!t,value:rZ.es.DIFF,children:"Diff"})]})},r1=()=>{var e;let{exitView:t}=(0,eA.Z)(),a=(0,en.VJ)(e=>e.activeEditId),s=(0,z.aK)(e=>e.edits),l=a?s[a]:null,r=(0,Y.iZ)(e=>e.project),{open:n,GithubRequiredDialog:i}=sm();return(0,y.Z)("md")?null:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i,{}),(0,p.jsxs)("div",{className:"z-10 flex w-full items-center gap-2 border-b bg-muted px-4 py-3",children:[(0,p.jsxs)(rT,{variant:"ghost",size:"sm",onClick:()=>{S.ZP.capture(I.SL.CONSOLE.EXITED_VIA_BUTTON),t()},className:"flex items-center gap-2",hotkey:"esc",showHotkey:!0,hotkeyOptions:{enableOnFormTags:!0},children:[(0,p.jsx)(et.Z,{name:"chevron_left",size:"small"}),"Exit"]}),(null==l?void 0:l.commit_sha)&&(0,p.jsx)(rT,{variant:"ghost",size:"sm",onClick:()=>{var e;let t=(0,ae._J)((null==r?void 0:r.github_repo_name)||"",l.commit_sha||"",null==r?void 0:null===(e=r.github_owner)||void 0===e?void 0:e.name);if(S.ZP.capture(I.SL.CONSOLE.GITHUB_LINK_CLICKED,{hasCustomGithubOwner:(0,ae.gU)(r),context:"console_header"}),!(0,ae.gU)(r)){n();return}t&&window.open(t,"_blank")},hotkey:"G",showHotkey:!0,children:"View on GitHub"}),(0,p.jsx)(r0,{diffAvailable:!!(null==l?void 0:null===(e=l.diff)||void 0===e?void 0:e.length)})]})]})};var r2=a(42262),r5=a(58905),r4=a(21091),r3=a(25649),r6=a.n(r3);let r8=e=>{let{code:t,className:s}=e,[l,r]=(0,g.useState)(!0),[n,i]=(0,g.useState)(null),[o,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(1),[m,h]=(0,g.useState)(1),[x,f]=(0,g.useState)({x:0,y:0}),[v,b]=(0,g.useState)(!1),[j,y]=(0,g.useState)({x:0,y:0}),[w,N]=(0,g.useState)(!1),[E,k]=(0,g.useState)(!1),{resolvedTheme:C}=(0,ti.F)(),_=(0,g.useRef)(null),S=(0,g.useRef)(null),T=(0,g.useRef)(null),R=(0,g.useRef)(null),I=(0,g.useCallback)(e=>{let t=e.trim();return(t=t.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g,"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).trim()},[]),D=(0,g.useCallback)(()=>{if(!S.current||!T.current)return;let e=S.current,t=T.current.querySelector("svg");if(!t)return;let a=e.getBoundingClientRect(),s=a.width-40,l=a.height-80,r=t.getBoundingClientRect(),n=r.width/s,i=r.height/l;if(n>=.2&&n<=.9&&i>=.2&&i<=.9){u(1),h(1),k(!0);return}u(.8*Math.min(s/r.width,l/r.height)),h(1),f({x:0,y:0}),k(!0)},[]),P=(0,g.useCallback)(async()=>{if(!(null==t?void 0:t.trim())){i("No diagram code provided"),r(!1);return}try{r(!0),i(null),c(""),k(!1),u(1),h(1),_.current||(_.current=(await Promise.all([a.e(284),a.e(6994)]).then(a.bind(a,56994))).default);let e=_.current;if(!e)throw Error("Failed to load mermaid");let s="dark"===C;e.initialize({startOnLoad:!1,theme:s?"dark":"default",securityLevel:"loose",fontFamily:"Inter, system-ui, sans-serif",suppressErrorRendering:!0});let l=I(t),n="mermaid-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o=await e.render(n,l);if(o&&o.svg)c(o.svg),r(!1);else throw Error("No SVG content returned from mermaid")}catch(e){i(e instanceof Error?"Diagram syntax error: ".concat(e.message.split("\n")[0]):"Failed to render diagram"),r(!1)}},[t,C,I]),z=d*m,A=()=>h(e=>Math.min(1.5*e,10)),O=()=>h(e=>Math.max(e/1.5,.1)),L=()=>{h(1),f({x:0,y:0})},Z=()=>b(!1);(0,g.useEffect)(()=>{let e=e=>{if(w)switch(e.key){case"+":case"=":e.preventDefault(),A();break;case"-":e.preventDefault(),O();break;case"0":e.preventDefault(),L();break;case"Escape":e.preventDefault(),N(!1)}};if(w)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[w,m]),(0,g.useEffect)(()=>{P()},[P]),(0,g.useEffect)(()=>{if(o&&!E&&S.current&&T.current){let e=setTimeout(()=>{D()},300);return()=>clearTimeout(e)}},[o,E,D]),(0,g.useEffect)(()=>{let e=R.current;if(!e)return;let t=e=>{if(e.preventDefault(),e.stopPropagation(),!S.current)return;let t=S.current.getBoundingClientRect(),a=e.clientX-t.left,s=e.clientY-t.top,l=-.015*e.deltaY,r=d*m,n=Math.min(Math.max(m*(1+l),.1),10),i=d*n/r,o=t.width/2,c=t.height/2,u=a-o-(a-o-x.x)*i,p=s-c-(s-c-x.y)*i;h(n),f({x:u,y:p})};return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}},[d,m,x.x,x.y]);let{exitView:M}=(0,ei.sV)(),F=(0,p.jsxs)("div",{className:(0,eu.cn)("relative flex-1 bg-background",w?"fixed inset-0 z-50 rounded-none":"h-full",s),ref:S,children:[(0,p.jsx)("div",{className:"absolute left-4 top-4 z-10 flex gap-2",children:(0,p.jsxs)(Q.z,{variant:"secondary",size:"sm",onClick:()=>{N(!1),M()},children:[(0,p.jsx)(et.Z,{name:"close",size:"small"}),"Close"]})}),o&&(0,p.jsx)("div",{className:"absolute right-4 top-4 z-10 flex gap-2",children:(0,p.jsxs)("div",{className:"flex items-center gap-1 rounded-lg border bg-background/80 px-2 py-1 backdrop-blur-sm",children:[(0,p.jsx)("button",{onClick:O,className:"rounded p-1 hover:bg-accent",title:"Zoom out (-)",children:(0,p.jsx)(et.Z,{name:"remove",size:"small"})}),(0,p.jsxs)("span",{className:"min-w-12 px-2 text-center font-mono text-xs",children:[Math.round(100*m),"%"]}),(0,p.jsx)("button",{onClick:A,className:"rounded p-1 hover:bg-accent",title:"Zoom in (+)",children:(0,p.jsx)(et.Z,{name:"add",size:"small"})}),(0,p.jsx)("button",{onClick:L,className:"ml-1 rounded p-1 hover:bg-accent",title:"Reset zoom (0)",children:(0,p.jsx)(et.Z,{name:"refresh",size:"small"})})]})}),(0,p.jsxs)("div",{className:"flex h-full flex-col",children:[l&&(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,p.jsx)("div",{className:"text-sm text-muted-foreground",children:"Rendering diagram..."})}),n&&(0,p.jsxs)("div",{className:"m-4 rounded-lg border border-destructive/20 bg-destructive/5 p-4",children:[(0,p.jsx)("div",{className:"text-sm font-medium text-destructive",children:"Diagram Error"}),(0,p.jsx)("div",{className:"mt-1 text-sm text-destructive/80",children:n}),(0,p.jsxs)("details",{className:"mt-2",children:[(0,p.jsx)("summary",{className:"cursor-pointer text-sm text-muted-foreground",children:"Show diagram code"}),(0,p.jsx)("pre",{className:"mt-2 overflow-x-auto rounded bg-muted p-2 text-xs",children:t})]})]}),o&&(0,p.jsx)("div",{ref:R,className:(0,eu.cn)("relative min-h-0 flex-1 overflow-hidden",w?"cursor-grab":"",v?"cursor-grabbing":""),onMouseDown:e=>{e.preventDefault(),b(!0),y({x:e.clientX-x.x,y:e.clientY-x.y})},onMouseMove:e=>{v&&(e.preventDefault(),f({x:e.clientX-j.x,y:e.clientY-j.y}))},onMouseUp:Z,onMouseLeave:Z,style:{userSelect:"none",overscrollBehavior:"contain"},children:(0,p.jsx)("div",{className:"flex h-full w-full origin-center items-center justify-center",style:{transform:"scale(".concat(z,") translate(").concat(x.x/z,"px, ").concat(x.y/z,"px)")},children:(0,p.jsx)("div",{ref:T,dangerouslySetInnerHTML:{__html:o}})})})]}),w&&(0,p.jsx)("div",{className:"absolute bottom-4 left-4 rounded bg-background/80 px-2 py-1 text-xs text-muted-foreground backdrop-blur-sm",children:"Use +/- to zoom, drag to pan, Esc to exit"})]});return w?(0,p.jsxs)(p.Fragment,{children:[F,(0,p.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 backdrop-blur-sm"})]}):F},r9={add_dependency:{icon:"deployed_code",color:"text-green-500"},remove_dependency:{icon:"deployed_code",color:"text-red-500"},delete:{icon:"scan_delete",color:"text-red-500"},delete_directory:{icon:"scan_delete",color:"text-red-500"},edit:{icon:"note_stack",color:"text-yellow-500"},new:{icon:"note_add",color:"text-green-500"},rename:{icon:"swap_horiz",color:"text-blue-500"},rename_directory:{icon:"swap_horiz",color:"text-blue-500"}},r7=["delete","delete_directory","add_dependency","remove_dependency","rename","rename_directory"],ne=e=>{let{filePath:t,oldFilePath:a,operation:s,className:l,contentToCopy:r}=e,[n,i]=(0,g.useState)(!1),o=async()=>{if(r)try{await navigator.clipboard.writeText(r),i(!0),setTimeout(()=>i(!1),2e3)}catch(e){(0,N.Eo)(e)}};return(0,p.jsxs)("div",{className:(0,eu.cn)("flex flex-row items-center gap-2 rounded-t-lg bg-transparent font-mono",l,{"rounded-b-lg":r7.includes(s)}),children:[(0,p.jsx)(et.Z,{name:r9[s].icon,className:r9[s].color,size:"small"}),a&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{children:a}),(0,p.jsx)(et.Z,{name:"arrow_right",className:"text-muted-foreground",size:"small"})]}),(0,p.jsx)("span",{className:"flex-1",children:t}),r&&(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",onClick:o,className:"ml-auto text-muted-foreground hover:text-foreground",children:(0,p.jsx)(et.Z,{name:n?"check":"content_copy",size:"default"})})]})},nt=e=>{let{className:t,...a}=e;return(0,p.jsx)(ne,{...a,className:(0,eu.cn)("border border-border px-3 py-2 text-sm font-medium",t)})},na=[r5.Z],ns=(0,g.memo)(e=>{let{part:t}=e,{resolvedTheme:a}=(0,ti.F)(),s="dark"===a?tE:tk,l=(0,g.useMemo)(()=>({code(e){let{node:t,className:a,children:l}=e;return/language-(\w+)/.exec(a||"")?(0,p.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,p.jsx)(tn.ZP,{readOnly:!0,value:String(l).replace(/\n$/,""),className:(0,eu.cn)("flex-1 overflow-y-auto",tS().editor),theme:s,extensions:tC})}):(0,p.jsx)("span",{className:"rounded bg-muted px-1.5 py-0.5 font-mono text-sm",children:l})}}),[s]);switch(t.type){case"writing_file":return(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)(nt,{filePath:t.file_path,operation:"new",contentToCopy:t.content}),(0,p.jsx)("div",{className:"overflow-hidden rounded-b-lg border-x border-b",children:(0,p.jsx)(tn.ZP,{readOnly:!0,value:t.content,className:(0,eu.cn)("flex-1 overflow-y-auto",tS().editor),theme:s,basicSetup:{foldGutter:!1,foldKeymap:!1},extensions:tC})})]});case"text":return(0,p.jsx)("div",{className:"prose prose-zinc prose-markdown mb-2 max-w-full dark:prose-invert ".concat(r6().customProse," prose-h1:mb-2 prose-h1:text-xl prose-h1:font-medium prose-h2:text-lg prose-h2:font-medium prose-h3:text-base prose-h3:font-medium prose-pre:my-2 prose-ol:my-2 prose-ul:my-2 prose-li:my-0"),children:(0,p.jsx)(r2.UG,{remarkPlugins:na,components:l,children:t.content})});case"edit":let r=t.search_replace_parts.map(e=>e.replace).join("\n\n");return(0,p.jsxs)("div",{className:"mb-4",children:[(0,p.jsx)(nt,{filePath:t.file_path,operation:"edit",contentToCopy:r}),(0,p.jsx)("div",{className:"rounded-b-lg border-x border-b",children:t.search_replace_parts.map((e,t)=>(0,p.jsxs)("div",{className:"mb-1 p-2",children:[(0,p.jsxs)("div",{className:"mb-1 flex text-sm text-foreground",children:[(0,p.jsx)("span",{className:"flex-1",children:"Search"}),(0,p.jsx)("span",{className:"flex-1",children:"Replace"})]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(tn.ZP,{readOnly:!0,value:e.search,className:(0,eu.cn)("flex-1 overflow-y-auto",tS().editor),theme:s,extensions:tC}),(0,p.jsx)(tn.ZP,{readOnly:!0,value:e.replace,className:(0,eu.cn)("flex-1 overflow-y-auto",tS().editor),theme:s,extensions:tC})]})]},t))})]});case"delete":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(nt,{filePath:t.file_path,operation:"delete"})});case"rename":return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(nt,{filePath:t.new_file_path,oldFilePath:t.original_file_path,operation:"rename"})});case"add_dependency":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(nt,{filePath:t.dependency,operation:"add_dependency",className:"rounded-lg"})});case"remove_dependency":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(nt,{filePath:t.removed_dependency,operation:"remove_dependency",className:"rounded-lg"})});case"error":return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsxs)("div",{className:"flex items-center rounded-lg border border-warning-primary p-3 text-sm font-medium",children:[(0,p.jsx)(et.Z,{name:"warning",className:"mr-2 text-warning-foreground",size:"small"}),(0,p.jsx)("span",{children:t.error_message})]})});case"lov-mermaid":if(!t.done)return(0,p.jsxs)("div",{className:"mb-4 flex items-center gap-2 text-sm text-muted-foreground",children:[(0,p.jsx)(et.Z,{name:"progress_activity",size:"small",className:"animate-spin"}),(0,p.jsx)("span",{children:"Generating diagram..."})]});return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(r8,{code:t.mermaidCode})});case"tool_use":var n,i,o,c,d;if("lov-add-dependency"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(nt,{filePath:null!==(n=t.parsedData.package)&&void 0!==n?n:"",operation:"add_dependency",className:"rounded-lg"})});if("lov-remove-dependency"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(nt,{filePath:null!==(i=t.parsedData.package)&&void 0!==i?i:"",operation:"remove_dependency",className:"rounded-lg"})});if("lov-delete"===t.name)return(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsx)(nt,{filePath:null!==(o=t.parsedData.file_path)&&void 0!==o?o:"",operation:"delete"})});if("lov-rename"===t.name)return(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsx)(nt,{filePath:null!==(c=t.parsedData.new_file_path)&&void 0!==c?c:"",oldFilePath:null!==(d=t.parsedData.original_file_path)&&void 0!==d?d:"",operation:"rename"})});return(0,p.jsx)(r4.Y,{name:t.name,parsedData:t.parsedData,done:t.done,duration:t.duration});default:return null}},(e,t)=>{let a=e.part,s=t.part;if(a.type!==s.type)return!1;switch(a.type){case"text":return a.content===s.content;case"writing_file":return a.file_path===s.file_path&&a.content===s.content;case"edit":if(a.search_replace_parts.length!==s.search_replace_parts.length)return!1;return a.file_path===s.file_path&&a.search_replace_parts.every((e,t)=>{let a=s.search_replace_parts[t];return e.search===a.search&&e.replace===a.replace});case"delete":return a.file_path===s.file_path;case"rename":return a.original_file_path===s.original_file_path&&a.new_file_path===s.new_file_path;case"add_dependency":return a.dependency===s.dependency&&a.isDevDependency===s.isDevDependency;case"remove_dependency":return a.removed_dependency===s.removed_dependency;case"error":return a.error_message===s.error_message;case"lov-mermaid":return a.mermaidCode===s.mermaidCode&&a.done===s.done;case"tool_use":return a.name===s.name&&a.data===s.data&&a.done===s.done&&a.duration===s.duration;default:return!1}});var nl=a(20724);(n=(r=u||(u={})).action||(r.action={})).NEW="new",n.RENAME="rename",n.RENAME_DIRECTORY="rename_directory",n.DELETE="delete",n.DELETE_DIRECTORY="delete_directory",n.EDIT="edit",n.ADD_DEPENDENCY="add_dependency";var nr=e=>{let{oldContent:t,newContent:a,filePath:s,originalFilePath:l,action:r,editable:n=!1,onChange:i}=e,[o,c]=(0,g.useState)(!0),[d,m]=(0,g.useState)(!1),[h,x]=(0,g.useState)(a),[f,b]=(0,g.useState)(!1),j=(0,ek.v)(),{addPendingChange:y,enableServer:w,syncCode:E}=(0,tu.v)(),k=h!==a,C=(0,g.useCallback)(e=>{x(e),y({path:s,content:e}),w(),null==i||i(s,e)},[y,s,w,i]),{resolvedTheme:_}=(0,ti.F)(),T=async()=>{try{await navigator.clipboard.writeText(a),m(!0),setTimeout(()=>m(!1),2e3),S.ZP.capture(I.SL.CONSOLE.DIFF_COPIED)}catch(e){(0,N.Eo)(e)}},R=(0,g.useCallback)(async()=>{if(k){b(!0);try{await E({[s]:h},{commitMessage:"Manual edit: ".concat(s)}),v.Am.success("Changes saved")}catch(e){(0,N.Eo)(e)}finally{b(!1)}}},[k,s,h,E]);return(0,p.jsxs)("div",{className:"overflow-hidden rounded-lg border border-border",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsx)(nt,{filePath:s,className:"border-none",oldFilePath:l,operation:r}),(0,p.jsxs)("div",{className:"flex items-center gap-1",children:[!n&&(0,p.jsxs)("div",{className:"text-muted-foregroun mr-1 flex items-center gap-1 text-xs",children:[(0,p.jsx)(et.Z,{name:"info",size:"small"}),"Only latest edits can be modified"]}),n&&k&&(0,p.jsx)(Q.z,{variant:"affirmative",size:"sm",onClick:R,loading:f,disabled:f,className:"mr-1",children:"Save"}),j&&(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",onClick:T,className:"text-muted-foreground hover:text-foreground",title:d?"Copied!":"Copy diff content",children:(0,p.jsx)(et.Z,{name:d?"check":"content_copy",size:"default"})}),r!==u.action.DELETE&&(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",onClick:()=>c(e=>!e),className:"mr-1",children:(0,p.jsx)(et.Z,{name:o?"unfold_less":"unfold_more",size:"default"})})]})]}),h&&(0,p.jsx)(eW.E.div,{initial:{height:0},animate:{height:o?"auto":0},exit:{height:0},transition:{duration:.25},children:(0,p.jsx)(tn.ZP,{className:(0,eu.cn)(tS().editor,"border-t"),readOnly:!n,theme:"dark"===_?tE:tk,extensions:[...tC,tn.tk.editable.of(n),(0,nl.Z)({original:t,mergeControls:!1})],value:h,onChange:C})})]},s)};function nn(){return(0,p.jsx)("div",{className:"flex flex-col rounded-lg border border-border",children:(0,p.jsx)("div",{className:"flex items-center justify-between p-3",children:(0,p.jsx)("div",{className:"h-3 w-80 animate-pulse rounded bg-muted"})})})}let ni=g.memo(e=>{var t,a;let{activeEdit:s,editable:l=!1}=e,[r,n]=(0,g.useState)(Math.min(2,(null==s?void 0:null===(t=s.diff)||void 0===t?void 0:t.length)||0)),i=(0,g.useRef)(null);return(0,g.useEffect)(()=>()=>{null!==i.current&&clearTimeout(i.current)},[]),(0,g.useEffect)(()=>{(null==s?void 0:s.diff)&&r<s.diff.length&&(i.current=window.setTimeout(()=>{n(e=>{var t;return Math.min(e+2,(null===(t=s.diff)||void 0===t?void 0:t.length)||0)})},50))},[r,null==s?void 0:s.diff]),(0,p.jsx)("div",{className:"flex flex-col gap-4",children:null==s?void 0:null===(a=s.diff)||void 0===a?void 0:a.map((e,t)=>(0,p.jsx)(g.Fragment,{children:t<r?(0,p.jsx)(nr,{oldContent:e.old_content,newContent:e.new_content,filePath:e.file_path,originalFilePath:e.original_file_path,action:e.action,editable:l}):(0,p.jsx)(nn,{})},"".concat(e.action,"-").concat(e.file_path,"-").concat(t)))})});ni.displayName="DiffView";let no=e=>{var t;let{scrollContainerRef:a}=e,s=(0,en.VJ)(e=>e.codeContent),l=(0,en.VJ)(e=>e.activeEditId),r=(0,rZ.hT)(e=>e.codeViewType),n=(0,z.aK)(e=>e.edits),i=(0,Y.iZ)(e=>e.project),o=l?n[l]:null,c=(null==o?void 0:o.commit_sha)===(null==i?void 0:i.latest_commit_sha),d=(0,g.useRef)(null),u=(0,g.useRef)(),m=(0,g.useRef)(!0),h=(0,g.useRef)(!1),x=(0,g.useCallback)(()=>{if(a.current){let{scrollTop:e,scrollHeight:t,clientHeight:s}=a.current;m.current=t-e-s<10}},[a]),f=(0,g.useCallback)(e=>{e.deltaY<0?h.current=!0:h.current=!1},[]),v=(0,g.useCallback)(()=>{h.current=!0},[]),b=(0,g.useCallback)(()=>{h.current=!1},[]);return(0,g.useEffect)(()=>{let e=a.current;return e&&(e.addEventListener("scroll",x),e.addEventListener("wheel",f),e.addEventListener("touchstart",v),e.addEventListener("touchend",b)),()=>{e&&(e.removeEventListener("scroll",x),e.removeEventListener("wheel",f),e.removeEventListener("touchstart",v),e.removeEventListener("touchend",b))}},[a,x,f,v,b]),(0,g.useEffect)(()=>{var e,t,s;u.current!==(null===(e=a.current)||void 0===e?void 0:e.scrollHeight)&&(u.current=null===(t=a.current)||void 0===t?void 0:t.scrollHeight,m.current&&!h.current&&(null===(s=d.current)||void 0===s||s.scrollIntoView({behavior:"auto"})))},[s,a]),(0,p.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,p.jsx)(r1,{}),(0,p.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col gap-4 overflow-y-auto px-4 pt-4 scrollbar-thin scrollbar-track-muted scrollbar-thumb-muted-foreground",ref:a,children:[(0,p.jsx)(rX,{}),r===rZ.es.DIFF&&(0,p.jsx)(ni,{activeEdit:o,editable:c},null==o?void 0:o.id),r===rZ.es.RAW&&s&&(null===(t=s.parts)||void 0===t?void 0:t.length)>0?s.parts.map((e,t)=>(0,p.jsx)(ns,{part:e},r$(e,t))):null,(0,p.jsx)("div",{ref:d})]})]})},nc=(0,rO.default)(()=>a.e(6934).then(a.bind(a,76934)).then(e=>e.DebugView),{loadableGenerated:{webpack:()=>[76934]},loading:()=>(0,p.jsx)("div",{className:"flex h-full items-center justify-center",children:"Loading debug view..."})}),nd=()=>{let e=(0,en.VJ)(e=>e.mermaidContent);return e?e.mermaidCode?(0,p.jsx)("div",{className:"flex h-full flex-col",children:(0,p.jsx)("div",{className:"min-h-0 flex-1",children:(0,p.jsx)(r8,{code:e.mermaidCode,className:"h-full"})})}):(0,p.jsx)("p",{className:"mt-4 text-center text-destructive-primary",children:"Mermaid data found but no code property."}):(0,p.jsx)("p",{className:"mt-4 text-center",children:"No mermaid diagram selected."})};var nu=a(28713);let nm=()=>{let e=(0,en.VJ)(e=>e.activeEditId),t=(0,z.aK)(e=>e.edits),a=e?t[e]:null,s=(0,Y.iZ)(e=>e.project),l=(0,g.useMemo)(()=>{if(a&&s)return(0,te.t)({projectId:null==s?void 0:s.id,sha:a.commit_sha})},[a,s]);return(0,p.jsx)("iframe",{id:"preview-panel",src:"".concat(l,"?forceHideBadge=true"),sandbox:nu.h,allow:"accelerometer; autoplay; camera; encrypted-media; fullscreen; geolocation; gyroscope; microphone; midi; clipboard-read; clipboard-write; payment; usb; vr; xr-spatial-tracking; screen-wake-lock; magnetometer; ambient-light-sensor; battery; gamepad; picture-in-picture; display-capture; bluetooth;",className:"min-h-full w-full flex-grow"})},np=e=>{let{scrollContainerRef:t}=e,a=(0,Y.iZ)(e=>e.project),s=(0,eK.hO)(e=>e.projectWorkspace),l=(0,ei.No)(e=>e.activeView);if(!s||!a||!l)return null;switch(l){case"preview":return null;case"analytics":return(0,p.jsx)(rA.U,{project:a});case"backend":return(0,p.jsx)(tJ.QD,{workspace:s,isInsideEditor:!!a,project:a,myWorkspaceRole:"admin"});case"mermaid":return(0,p.jsx)(nd,{});case"codeEditor":return(0,p.jsx)(tW,{projectId:a.id});case"snapshot":return(0,p.jsx)(nm,{});case"codeViewer":case"error":return(0,p.jsx)(no,{scrollContainerRef:t});case"annotation":return(0,p.jsx)(rL,{});case"debug":return(0,p.jsx)(nc,{});default:return l}};var nh=a(86338);let nx=[{icon:"dock_to_right",text:"Chat with AI in the sidebar"},{icon:"location_searching",text:"Select specific elements to modify"},{icon:"imagesmode",text:"Upload images as a reference"},{icon:"preview",text:"Instantly preview your changes"},{icon:"school",text:"Set custom knowledge for every edit"},{icon:"database",text:"Connect Supabase for backend"},{icon:"code_blocks",text:"Collaborate at source, via GitHub"},{icon:"globe",text:"Deploy when you're ready"}],nf=e=>{let{text:t="Setting up..."}=e,a=(0,g.useRef)(null);return(0,g.useEffect)(()=>{let e=a.current;if(!e)return;let t=()=>{e.style.transform="translateY(0)"};return e.addEventListener("animationiteration",t),()=>e.removeEventListener("animationiteration",t)},[]),(0,p.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-8",children:[(0,p.jsx)(et.Z,{name:"lovable_icon",className:"h-[100px] w-[100px] text-muted-foreground/50"}),(0,p.jsx)("span",{children:t}),(0,p.jsxs)("div",{className:"w-100 relative mx-auto h-48 overflow-hidden rounded-lg bg-muted/50",children:[(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 top-0 z-10 h-12 bg-gradient-to-b from-muted to-transparent"}),(0,p.jsx)("div",{ref:a,className:"animate-slide-up",children:[...nx,...nx].map((e,t)=>(0,p.jsxs)("div",{className:"flex items-center gap-3 p-4 transition-colors",children:[(0,p.jsx)(et.Z,{name:e.icon,className:"h-5 w-5 text-muted-foreground"}),(0,p.jsx)("span",{className:"text-muted-foreground",children:e.text})]},t))}),(0,p.jsx)("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 z-10 h-12 bg-gradient-to-t from-muted to-transparent"})]}),(0,p.jsx)("div",{id:"onboarding-start",className:"absolute bottom-0 right-[12.5rem] h-3 w-3"})]})};function ng(e){let{message:t,level:a}=e;return void 0===a&&(a="info"),(0,p.jsx)("div",{className:(0,eu.cn)("absolute bottom-0 flex w-full flex-grow items-center justify-center pb-36 md:pb-2"),children:(0,p.jsxs)("div",{className:(0,eu.cn)("flex min-w-[300px] flex-row items-center justify-between gap-2 rounded-lg border-border px-6 py-4 shadow-lg shadow-black/25","error"===a&&"bg-warning","info"===a&&"bg-background"),children:[(0,p.jsx)("p",{className:"font-medium",children:t})," ",(0,p.jsx)(sJ.$,{variant:"ring",size:"default"})]})})}function nv(e){let{isDiscardDialogOpen:t,setIsDiscardDialogOpen:a,hasUnsavedChanges:s,isSaving:l,handleDiscard:r}=e;return(0,p.jsxs)(ee.Vq,{open:t,onOpenChange:a,children:[(0,p.jsx)(ee.hg,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"secondary",size:"sm",className:"h-6 text-xs transition duration-150 ease-out hover:bg-secondary",onClick:e=>{s||(e.preventDefault(),e.stopPropagation())},disabled:l||!s,children:"Discard"})}),(0,p.jsx)(ee.cZ,{className:"p-4",size:"sm",children:(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{children:"Discard Changes"}),(0,p.jsx)(ee.Be,{children:"Are you sure you want to discard your changes?"}),(0,p.jsxs)(ee.cN,{className:"flex gap-2 pt-4",children:[(0,p.jsx)(ee.GG,{children:(0,p.jsx)(Q.z,{variant:"outline",children:"Cancel"})}),(0,p.jsx)(ee.GG,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"destructive",onClick:r,children:"Discard"})})]})]})})]})}function nb(){let e=(0,ez.f6)(e=>e.visibleMode),{activeView:t}=(0,eA.Z)(),a=(0,Y.iZ)(e=>{var t;return!!(null===(t=e.project)||void 0===t?void 0:t.preview_build_commit_sha)}),s=(0,Y.iZ)(e=>!!e.project),[l,r]=(0,g.useState)(!1),{syncCode:n,hasUnsavedChanges:i,generateAst:o,refreshPreview:c}=(0,tu.v)(),d=(0,to.A7)(e=>e.clearPendingChanges),u=(0,to.A7)(e=>e.clearUploads),m=(0,e6.UC)(e=>e.isSaving),{setIsSaving:h,turnOffVisualEditing:x}=(0,e6.S9)(),{snapshot:f}=(0,to.ag)(),v=(0,g.useCallback)(()=>{S.ZP.capture("visual_edits:discard_clicked"),d(),u(),c(),o(),x()},[d,u,o,x,c]),b=(0,g.useCallback)(async()=>(S.ZP.capture("visual_edits:save_clicked"),h(!0),n(f.getPendingChanges()).then(()=>{h(!1),x()})),[h,f,n,x]);return(0,p.jsxs)("div",{className:(0,eu.cn)("relative h-full w-full",{invisible:"preview"!==t}),children:[s&&!a&&(0,p.jsx)("div",{className:"absolute inset-0",children:(0,p.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center"})}),(0,p.jsx)("div",{className:(0,eu.cn)("absolute inset-0",{"pointer-events-none invisible":"static"!==e||!a,active:"static"===e}),children:(0,p.jsx)(ez.g9,{})}),(0,p.jsxs)("div",{className:(0,eu.cn)("absolute inset-0",{"pointer-events-none invisible":"live"!==e,active:"live"===e}),children:[(0,p.jsx)(ez.i5,{}),i&&(0,p.jsxs)("div",{className:"sticky bottom-4 left-1/2 z-10 flex w-max -translate-x-1/2 items-center justify-center gap-5 rounded-xl bg-popover px-3.5 py-2",children:[(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:"You have unsaved changes"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(nv,{isDiscardDialogOpen:l,setIsDiscardDialogOpen:r,hasUnsavedChanges:i,isSaving:m,handleDiscard:v}),(0,p.jsx)(Q.z,{onClick:b,loading:m,disabled:!i,size:"sm","aria-label":"save visual edits",variant:"affirmative",className:"h-6 text-xs",children:"Save"})]})]})]}),(0,p.jsx)(nj,{visibleMode:e,hasPreviewBuild:a})]})}function nj(e){let{visibleMode:t,hasPreviewBuild:a}=e,s=(0,ez.f6)(e=>e.error),l=(0,A.bk)(e=>e.isSendChatMessageMutationPending),r=(0,ez.f6)(e=>null!==e.error&&"dev_server"===e.error.type),{agentModeEnabled:n}=(0,nh.v)(),i=(0,ez.f6)(e=>e.targetMode),o=(0,A.bk)(e=>e.isBuildErrorOccurredDuringStream),c=(0,ez.f6)(e=>e.isStartingSandboxInTheBackground);return"live"!==i?null:a&&o&&l&&n?(0,p.jsx)(ng,{message:"An error occurred, trying to fix automatically",level:"error"}):"live"===t?null:r?(0,p.jsx)("div",{className:"absolute inset-0 flex w-full flex-grow items-center justify-center pb-2",children:(0,p.jsx)(ny,{message:null==s?void 0:s.message,traceId:null==s?void 0:s.traceId})}):a&&!c?(0,p.jsx)(ng,{message:"Starting live preview..."}):l?(0,p.jsx)("div",{className:"absolute inset-0 flex flex-grow items-center justify-center bg-muted",children:(0,p.jsx)(nw,{})}):null}function ny(e){let{restartLiveMode:t,revertToStaticMode:a}=(0,ez.My)();return(0,p.jsxs)("div",{className:"absolute flex min-w-[300px] flex-col items-center justify-between gap-6 rounded-lg border-border bg-background px-12 py-6 shadow-lg shadow-black/25",children:[(0,p.jsx)("p",{className:"font-medium",children:e.message}),(0,p.jsx)(Q.z,{variant:"accent",onClick:()=>{t(!0)},children:"Try again"}),(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",className:"absolute right-2 top-2 z-10 hover:bg-transparent hover:opacity-75",onClick:()=>a(),children:(0,p.jsx)(et.Z,{name:"close",size:"default"})}),e.traceId&&(0,p.jsx)("code",{className:"absolute bottom-2 right-2 break-all rounded px-[0.2rem] font-mono text-muted-foreground/70",children:e.traceId})]})}function nw(){return(0,p.jsx)("div",{className:"absolute inset-0 flex flex-grow items-center justify-center bg-muted",children:(0,p.jsx)(nf,{text:"Spinning up preview..."})})}function nN(){let e=(0,ei.No)(e=>e.activeView),t=(0,g.useRef)(null);return(0,p.jsx)("div",{className:(0,eu.cn)("flex flex-grow flex-col overflow-hidden rounded-none md:rounded-xl md:border"),children:(0,p.jsxs)("div",{className:"relative flex flex-grow flex-col items-center",children:[(0,p.jsx)(rC,{children:(0,p.jsx)(rz,{children:(0,p.jsx)(nb,{})})}),"preview"!==e&&(0,p.jsx)("div",{className:"absolute inset-0 z-10 overflow-y-auto bg-background",ref:t,children:(0,p.jsx)(np,{scrollContainerRef:t})})]})})}var nE=a(83246);let nk=e=>(0,p.jsx)(ee.Vq,{...e,children:(0,p.jsx)(ee.cZ,{className:"py-16 text-center",children:(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{className:"text-center text-2xl",children:"This project has been deprecated."}),(0,p.jsx)("p",{className:"text-center",children:"This project is no longer supported, as it's using Gitlab. Please consider migrating the code to a new GitHub project."})]})})});var nC=a(8782);let n_=e=>{let t=(0,Y.iZ)(e=>e.project),{canEdit:a}=(0,w.t)(),[s,l]=g.useState(!1),r=!!(null==t?void 0:t.is_supabase_enabled)||!!(null==t?void 0:t.supabase_project_config),n=a||!r;return(0,p.jsx)(ee.Vq,{...e,children:(0,p.jsxs)(ee.cZ,{size:"sm",children:[(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{className:"flex items-center gap-2",children:"Remix this project"}),(0,p.jsxs)(ee.Be,{children:[(0,p.jsx)("p",{children:"By remixing a project, you will create a copy that you own."}),!n&&(0,p.jsx)("p",{children:"You do not have permission to remix this project because it uses Supabase."})]})]}),(0,p.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[(0,p.jsx)(nC.X,{id:"include-history",disabled:!a||e.isRemixing,checked:s,onCheckedChange:e=>l(e)}),(0,p.jsx)(rt.Label,{htmlFor:"include-history",children:"Include project history"})]}),(0,p.jsxs)(ee.cN,{children:[(0,p.jsx)(ee.GG,{asChild:!0,children:(0,p.jsx)(Q.z,{variant:"outline",children:"Cancel"})}),(0,p.jsxs)(Q.z,{disabled:!n,onClick:()=>e.onRemix({includeHistory:s}),className:"flex items-center gap-1",loading:e.isRemixing,children:[!e.isRemixing&&(0,p.jsx)(et.Z,{name:"shuffle",size:"small"}),e.isRemixing?"Remixing...":"Remix"]})]})]})})};var nS=a(54775),nT=a(34841);(o=(i=m||(m={})).accessibility||(i.accessibility={})).REPO_ACCESSIBLE="repo_accessible",o.REPO_NOT_ACCESSIBLE="repo_not_accessible",o.INSTALLATION_NOT_FOUND="installation_not_found",o.INSTALLATION_SUSPENDED="installation_suspended",o.REPO_NOT_FOUND="repo_not_found",o.INSUFFICIENT_PERMISSIONS="insufficient_permissions";let nR=e=>{let{project:t}=e,a=(0,j.C)(),[s,l]=(0,g.useState)(!1),r=t.github_owner,n=t.name;(0,g.useEffect)(()=>{(null==a?void 0:a.accessibility)&&(null==a?void 0:a.accessibility)!==m.accessibility.REPO_ACCESSIBLE&&l(!0)},[null==a?void 0:a.accessibility]);let{authUser:i}=(0,b.Eu)(),{installations:o}=(0,nT.D)({enabled:!!i}),c=(0,j.C)(),d=(0,g.useMemo)(()=>{if(!r||!o)return null;let e=o.find(e=>r.name===e.account.login);return e?e.html_url:null},[r,o]),[u,h]=(0,g.useState)(!1);return(0,g.useEffect)(()=>{c&&("repo_accessible"===c.accessibility?l(!1):u||(l(!0),h(!0)))},[c,l,u,h]),(0,p.jsx)(ee.Vq,{open:s,onOpenChange:l,children:(0,p.jsxs)(ee.cZ,{children:[(0,p.jsx)(ee.fK,{children:(0,p.jsx)(ee.$N,{className:"text-2xl",children:"We can't access your repository"})}),(()=>{switch(null==c?void 0:c.accessibility){case"repo_not_accessible":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"If you want to keep using Lovable to improve your project:"}),(0,p.jsxs)("ol",{className:"mt-4 list-inside list-decimal",children:[(0,p.jsxs)("li",{children:["Go to the"," ",d?(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:"GitHub App settings"}):(0,p.jsx)("strong",{children:" GitHub App settings"})]}),(0,p.jsxs)("li",{children:["Grant ",(0,p.jsx)("strong",{children:"Repository access"})," to"," ",r&&n?(0,p.jsxs)("strong",{children:[r.name,"/",n]}):(0,p.jsx)("strong",{children:"your project"}),"."]})]}),(0,p.jsx)(nI,{appSettingsUrl:d})]});case"installation_not_found":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-l",children:["We couldn't find the Lovable GitHub app installation for your"," ",(null==r?void 0:r.type)==="Organization"?"organization":"account",". To resolve this issue, please connect the GitHub app again."]}),(0,p.jsx)("div",{className:"mt-4 flex justify-center",children:(0,p.jsx)(Q.z,{className:"ml-2",size:"lg",onClick:()=>{(0,nS.Mn)({githubOwner:null!=r?r:null})},children:"Install GitHub App"})})]});case"insufficient_permissions":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"We don't have the necessary permissions to access your repository. Please uninstall and reinstall the Lovable GitHub app."}),(0,p.jsx)(nI,{appSettingsUrl:d})]});case"installation_suspended":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("p",{className:"text-l",children:["The GitHub app installation for your"," ",(null==r?void 0:r.type)==="Organization"?"organization":"account"," ","has been suspended."," ",d?(0,p.jsxs)(p.Fragment,{children:["To resolve this issue, visit your"," ",(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:"GitHub App settings"})," ","and unsuspend the Lovable GitHub app installation."]}):(0,p.jsx)(p.Fragment,{children:"Please navigate to your GitHub App settings and unsuspend the Lovable app installation. You can find it under your GitHub account or organization's settings."})]}),(0,p.jsx)(nI,{appSettingsUrl:d})]});case"repo_not_found":return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{className:"text-l",children:"We couldn't find the specified repository in your GitHub account. Please reach out to our support team for further assistance:"}),d&&(0,p.jsxs)("p",{children:["If you removed our app's access to your repository, you can"," ",(0,p.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-affirmative-primary hover:underline",children:"reinstate it here."})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)(Q.z,{variant:"outline",asChild:!0,children:(0,p.jsx)(tQ.default,{href:"/support",children:"Reach out to Support"})})})]});default:return null}})()]})})},nI=e=>{let{appSettingsUrl:t}=e;return(0,p.jsx)("div",{className:"mt-4 flex justify-center",children:t&&(0,p.jsx)(Q.z,{className:"ml-2",size:"lg",onClick:()=>{window.open(t,"_blank")},children:"App settings"})})},nD=e=>{let{project:t}=e,a=(0,f.useRouter)(),s=(0,Y.iZ)(e=>e.isRemixDialogOpen),{setIsRemixDialogOpen:l}=(0,Y.d2)(),{canEdit:r}=(0,w.t)(),{mutate:n,isPending:i}=(0,nE.G)({onSubmit:()=>l(!0)}),o=t.id,c=(0,g.useCallback)(e=>{let{includeHistory:t}=e;n({projectId:o,includeHistory:t})},[n,o]);return(0,p.jsxs)(p.Fragment,{children:[t&&!t.git_on_s3&&!t.is_github&&(0,p.jsx)(nk,{open:!0,onOpenChange:()=>a.push("/")}),r&&t&&(0,p.jsx)(nR,{project:t}),(0,p.jsx)(n_,{onRemix:c,isRemixing:i,open:s,onOpenChange:l})]})};var nP=a(90901),nz=a(50474),nA=a(71286);let nO=(0,g.memo)(()=>{let{setSelectedImageUrl:e}=(0,z.mx)(),t=(0,z.aK)(e=>e.selectedImageUrl),a=(0,k.Eh)(e=>e.images),s=(0,g.useCallback)(()=>{e(void 0)},[e]),l=(0,g.useCallback)(e=>{e.target===e.currentTarget&&s()},[s]),r=a.find(e=>e.url===t),n=(null==r?void 0:r.name)||"",i=(0,g.useRef)(null);return(0,p.jsx)(nA.Vq,{open:void 0!==t,onOpenChange:s,children:(0,p.jsxs)(nA.PK,{children:[(0,p.jsx)(nA.t9,{className:"fixed inset-0 z-[10000] bg-black/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),(0,p.jsxs)(nA.cZ,{className:"fixed inset-0 z-[10000] flex flex-col items-center justify-center gap-2 bg-transparent data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",onClick:l,children:[(0,p.jsx)("div",{className:"relative inline-block max-h-[85dvh] max-w-[90vw]",ref:i,children:(0,p.jsx)("img",{onLoad:e=>{let t=e.target;t&&i.current&&(i.current.style.aspectRatio="".concat(t.naturalWidth," / ").concat(t.naturalHeight))},className:"h-full w-full rounded-xl object-contain shadow-modal",src:t,alt:"Fullscreen Image"})}),n&&(0,p.jsx)("p",{className:"mt-2 min-w-0 max-w-[80vw] truncate text-center text-sm text-white",children:n}),(0,p.jsx)(ee.GG,{asChild:!0,className:"absolute right-4 top-2.5 text-white",children:(0,p.jsx)(Q.z,{variant:"ghost",size:"icon-sm",className:"hover:text-foreground",children:(0,p.jsx)(et.Z,{name:"close"})})})]})]})})});nO.displayName="ImagePreviewDialogV2";let nL=[{targetId:"onboarding-start",title:"Take a quick tour while waiting?",description:"Great job on your first prompt! Let's take a quick tour and learn about visual edits, integrations and publishing.",side:"top",showBorder:!1,showTooltip:!1,index:1,eventName:I.SL.ONBOARDING_TOUR.STEP_VIEWED_ONBOARDING_START},{targetId:"visual-editor-toggle",title:"Visual edits",description:"Click directly in your preview to make quick precision changes to fonts, colors or text. Visual edits are free!",side:"top",showBorder:!1,showTooltip:!0,index:2,eventName:I.SL.ONBOARDING_TOUR.STEP_VIEWED_VISUAL_EDITOR_TOGGLE},{targetId:"main-menu",title:"Control your project",description:"Click the project title and open the drop down to rename, duplicate, or adjust settings for your app.",side:"bottom",showBorder:!1,showTooltip:!0,index:3,eventName:I.SL.ONBOARDING_TOUR.STEP_VIEWED_MAIN_MENU},{targetId:"preview-url-bar",title:"Navigate pages or view on mobile",description:"If your app has multiple pages you can navigate between them here, or toggle mobile view to test your design on smaller screens.",side:"bottom",showBorder:!1,showTooltip:!0,index:4,eventName:I.SL.ONBOARDING_TOUR.STEP_VIEWED_PREVIEW_URL_BAR},{targetId:"supabase-dropdown",title:"Connect to database",description:"Supabase automatically stores everything your project needs — like user names, messages, or notes.",side:"bottom",showBorder:!1,showTooltip:!0,index:5,eventName:I.SL.ONBOARDING_TOUR.STEP_VIEWED_SUPABASE_DROPDOWN},{targetId:"publish-menu",title:"Publish your app",description:'Ready to share? Hit "Publish" to go live. You can also connect a custom domain.',side:"bottom",showBorder:!1,showTooltip:!0,index:6,eventName:I.SL.ONBOARDING_TOUR.STEP_VIEWED_SHARE_MENU}],nZ=()=>{let e=!(0,y.Z)("md"),{userData:t}=(0,Z.SE)(),a=(0,eR.uR)(),s=(0,ez.f6)(e=>e.targetMode),l=a&&e&&!(null==t?void 0:t.has_seen_onboarding_tour)&&"live"===s,[r,n]=(0,g.useState)(0),[i,o]=(0,g.useState)(!0),[c,d]=(0,g.useState)(null),[u,m]=(0,g.useState)(!1),h=(0,x.D)({mutationFn:async()=>{if(!t)return;let e=(0,E.SJ)();await e.put("/user/".concat(t.id),{has_seen_onboarding_tour:!0})}});(0,g.useEffect)(()=>{var e;if(!i)return;let t=document.getElementById(null===(e=nL[r])||void 0===e?void 0:e.targetId);t&&(d(t),t.scrollIntoView({behavior:"smooth",block:"center"}))},[r,i]),(0,g.useEffect)(()=>{if(0===r){let e=setTimeout(()=>{m(!0)},1e3);return()=>clearTimeout(e)}},[r]),(0,g.useEffect)(()=>{var e,t;i&&S.ZP.capture(nL[r].eventName,{step:r+1,stepTitle:null===(e=nL[r])||void 0===e?void 0:e.title,stepTargetId:null===(t=nL[r])||void 0===t?void 0:t.targetId})},[r,i]);let f=()=>{r<nL.length-1?n(r+1):(o(!1),S.ZP.capture(I.SL.ONBOARDING_TOUR.COMPLETED,{totalSteps:nL.length}),h.mutate())},v=()=>{var e,t;o(!1),S.ZP.capture(I.SL.ONBOARDING_TOUR.SKIPPED,{step:r+1,stepTitle:null===(e=nL[r])||void 0===e?void 0:e.title,stepTargetId:null===(t=nL[r])||void 0===t?void 0:t.targetId}),h.mutate()},b=(0,ez.f6)(e=>"live"===e.visibleMode);return l&&(0!==r||!b)&&i&&c?(0,p.jsxs)(ed.u,{open:!0,defaultOpen:!0,instant:!0,children:[(0,p.jsx)(ed.aJ,{asChild:!0,children:(0,p.jsx)("div",{className:"pointer-events-none fixed",style:{top:c.getBoundingClientRect().top,left:c.getBoundingClientRect().left,width:c.offsetWidth,height:c.offsetHeight,boxShadow:0===r?"none":"0 0 0 9999px rgba(0, 0, 0, 0.5)",zIndex:9998,border:!1!==nL[r].showBorder?"1px solid #3b82f6":"none",borderRadius:getComputedStyle(c).borderRadius||"4px"}})}),(0,p.jsxs)(ed._v,{side:nL[r].side,className:"z-[9999] w-[383px] rounded-lg border border-muted-border bg-background p-4 text-foreground opacity-0 shadow-lg transition-opacity duration-300 ".concat(0===r&&u?"opacity-100":r>0?"opacity-100":""),sideOffset:5,avoidCollisions:!0,sticky:"always",children:[nL[r].showTooltip&&(0,p.jsx)(ed.Ce,{className:"z-[10000] h-3 w-3 fill-background"}),(0,p.jsx)("div",{className:"flex flex-col gap-6",children:0===r?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"flex flex-row items-center justify-between",children:(0,p.jsx)("h3",{className:"text-base font-medium text-foreground",children:nL[r].title})}),(0,p.jsx)("p",{className:"text-base text-foreground/80",children:nL[r].description}),(0,p.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,p.jsx)(Q.z,{variant:"ghost",size:"sm",onClick:v,className:"text-foreground/60 hover:text-foreground",children:"No thanks"}),(0,p.jsx)(Q.z,{size:"sm",onClick:f,className:"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/80",children:"Let's go"})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,p.jsx)("h3",{className:"text-base font-medium text-foreground",children:nL[r].title}),(0,p.jsx)(Q.z,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0 hover:bg-background/10",onClick:v,children:(0,p.jsx)(et.Z,{name:"close",size:"small",className:"text-foreground"})})]}),(0,p.jsx)("p",{className:"text-base text-foreground/80",children:nL[r].description}),(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("p",{className:"text-base text-foreground/60",children:[r," of ",nL.length-1]}),(0,p.jsxs)("div",{className:"flex gap-2",children:[r>1&&(0,p.jsx)(Q.z,{variant:"outline",size:"sm",onClick:()=>{r>0&&n(r-1)},className:"hover:affirmative border-0 bg-background text-foreground",children:"Back"}),(0,p.jsx)(Q.z,{size:"sm",onClick:f,className:"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/80",children:r===nL.length-1?"Done":"Next"})]})]})]})})]})]}):null},nM=()=>{let e=(0,ei.No)(e=>e.blocker),t=(0,ei.No)(e=>e.showBlockerDialog),a=(0,ei.No)(e=>e.nextView),{__internal:{setShowBlockerDialog:s},clearBlocker:l,switchToViewRaw:r}=(0,ei.sV)();return e?(0,p.jsx)(ee.Vq,{open:t,onOpenChange:s,children:(0,p.jsxs)(ee.cZ,{children:[(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{children:e.title}),(0,p.jsx)(ee.Be,{children:e.description})]}),e.content,(0,p.jsxs)(ee.cN,{children:[(0,p.jsx)(Q.z,{variant:"outline",onClick:()=>{var t;s(!1),null==e||null===(t=e.onCancel)||void 0===t||t.call(e)},children:"Cancel"}),(0,p.jsx)(Q.z,{onClick:()=>{var t;s(!1),l(),null==e||null===(t=e.onConfirm)||void 0===t||t.call(e),r(a)},children:"Confirm"})]})]})}):null},nF=()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(eD.Y,{}),(0,p.jsx)(nz.CreateWorkspaceDialog,{}),(0,p.jsx)(nP.default,{}),(0,p.jsx)(nZ,{}),(0,p.jsx)(nO,{}),(0,p.jsx)(W.RootDialog,{}),(0,p.jsx)(nM,{})]}),nU=e=>{var t;let{children:a,projectId:s}=e,[l,r]=(0,g.useState)(!0),n=(0,Y.iZ)(e=>e.project),{isAuthenticated:i}=(0,b.Eu)();(0,g.useEffect)(()=>{(null==n?void 0:n.name)&&(document.title="".concat(n.name," - Lovable"))},[null==n?void 0:n.name]);let{canEdit:o,isLoading:c}=(0,w.t)(),d=(0,$.c)(e=>e.hasFetchedCollaborators),u=!c&&(!i||!!d)&&!1===o,m=(0,g.useRef)(null),h=(0,g.useCallback)(()=>{r(!1)},[]),x=(0,g.useCallback)(()=>{r(!0)},[]),f=(0,g.useCallback)(()=>{r(!l)},[l]);(0,g.useEffect)(()=>{var e,t;l?null===(e=j.current)||void 0===e||e.expand():null===(t=j.current)||void 0===t||t.collapse()},[l]),(0,g.useEffect)(()=>{u&&h()},[h,u]),(0,eo.y1)("mod+b",e=>{e.preventDefault(),f()},{enableOnFormTags:!0},[f]);let j=(0,g.useRef)(null),y=(0,eJ.I_)(),N=(0,eJ.k6)(),E=(0,eJ.SE)(e=>e.panelSizes),k=(0,eJ.SE)(e=>e.updatePanelSizes),C=(0,W.z)(sC),_=sN();return(0,g.useEffect)(()=>{if(_){let e=v.Am.warning("Update Project",{description:"Your project is out of date",duration:1/0,action:(0,p.jsx)(Q.z,{className:"ml-auto",variant:"accent",onClick:()=>{C({childProps:{}})},children:"Update project"})});return()=>{v.Am.dismiss(e)}}},[_,C]),(0,p.jsx)(tT.T,{children:(0,p.jsxs)("div",{className:"flex h-dvh flex-col",children:[(0,p.jsx)("div",{className:"sticky top-0 z-50 w-full",children:(0,p.jsx)(s_.E,{})}),(0,p.jsxs)("div",{className:"flex min-h-0 flex-1 flex-col bg-background",children:[n&&(0,p.jsx)(nD,{project:n}),(0,p.jsx)(nF,{}),(0,p.jsx)(rk,{}),(0,p.jsx)(sw,{isSidebarOpen:l,toggleSidebar:f,openSidebar:x,hideButtons:u}),(0,p.jsx)("main",{className:"relative isolate flex min-h-0 flex-1",ref:m,children:(0,p.jsx)("div",{className:"hidden min-h-0 flex-1 md:flex",children:(0,p.jsxs)(sT,{direction:"horizontal",className:"relative flex min-h-0 flex-1 flex-row",autoSaveId:"editor-resizable-panels",onLayout:e=>{e&&(e[0]>0&&(document.cookie="react-resizable-panels:layout=".concat(JSON.stringify(e),"; path=/projects")),k(e))},children:[(0,p.jsx)(sR,{collapsible:!0,onExpand:x,onCollapse:h,defaultSize:null!==(t=E[0])&&void 0!==t?t:eq.DEFAULT_SIDEBAR_SIZE,minSize:y,maxSize:N,collapsedSize:0,className:(0,eu.cn)("relative inset-y-0 z-40 mr-0 flex h-full min-h-0 overflow-x-hidden bg-background"),ref:j,children:a}),(0,p.jsx)(sI,{className:"z-[10000] ml-2",tooltip:"Drag to resize"}),(0,p.jsx)(sR,{minSize:40,defaultSize:E[1]||100-eq.DEFAULT_SIDEBAR_SIZE,className:"relative flex flex-1 flex-col pb-2 pr-2",id:"preview-panel",children:(0,p.jsx)(nN,{})})]})})})]})]})})};var nK=a(45060),nV=a(53197);let nW=()=>{let{refreshPreview:e}=(0,ez.My)(),[t,a]=(0,g.useState)(!1),s=(0,g.useRef)(null),{pages:l}=e3(),r=(0,e4.u)(e=>e.setCurrentPage),n=(0,ez.My)().refreshPreview,i=(0,ez.f6)(e=>e.currentPath);(0,g.useEffect)(()=>{r(i||"/"),m(i||"/")},[i,r]),(null==l?void 0:l.find(e=>e.path===i))||null==l||l.find(e=>e9(i,e.path));let o=e7(i),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)(o),h=null==l?void 0:l.filter(e=>e&&e.path.toLowerCase().includes(u.toLowerCase())),{activeView:x}=(0,eA.Z)(),f="preview"!==x,v=(0,rK.gu)(e=>e.view),[b,j]=(0,g.useState)(!0);(0,g.useEffect)(()=>{let e=0,t=t=>{if("SCROLL_POSITION"===t.data.type){let{scrollY:a}=t.data.payload,s=a-e;s>20?j(!1):s<-1&&j(!0),e=a}};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}},[]);let y=(0,rK.gu)(e=>e.isPreviewDocked),{setIsPreviewDocked:w}=(0,rK.zp)(),N={visible:{opacity:v===rK.$.PREVIEW?1:0,scale:v===rK.$.PREVIEW?1:.9},hidden:{opacity:0,scale:.5}};return(0,p.jsx)("div",{className:"relative h-10 w-full",children:(0,p.jsxs)(eW.E.div,{className:(0,eu.cn)("absolute inset-x-0 bottom-0 flex w-full flex-col overflow-hidden rounded-3xl border bg-background shadow-modal",!y&&"border-transparent",y&&"shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0,scale:.9},animate:y?"visible":b?"visible":"hidden",variants:N,transition:{duration:.2,type:"spring",bounce:.15},children:[(0,p.jsxs)(eW.E.div,{className:"flex max-h-[200px] w-full flex-col gap-1 overflow-hidden overflow-y-auto px-2",initial:{height:0,paddingTop:0,paddingBottom:0},animate:{height:c?"auto":0,paddingTop:c?12:0,paddingBottom:c?12:0},transition:{duration:.3,type:"spring",bounce:.1},children:[null==h?void 0:h.slice(0,9).map((e,t)=>(0,p.jsx)(eW.E.button,{className:(0,eu.cn)("flex w-full flex-col rounded-full px-4 py-1 text-left active:bg-muted",0===t&&"bg-muted"),onClick:()=>{r(e.path),m(e.path),n(e.path),d(!1)},children:(0,p.jsx)("p",{className:"text-lg",children:nB(e.path,u)})},e.path)),(null==h?void 0:h.length)===0&&(0,p.jsxs)("p",{className:"px-4 py-1 text-lg text-muted-foreground",children:['No pages found matching "',u,'"']})]}),(0,p.jsx)("div",{id:"preview-url-bar",className:(0,eu.cn)("flex h-10 items-center bg-background pl-2",c&&"border-t"),children:(0,p.jsxs)("form",{className:"relative flex h-full min-h-10 flex-grow items-center",onSubmit:e=>{var t,a,l,i;e.preventDefault(),(null==h?void 0:h[0])&&(r((null==h?void 0:null===(t=h[0])||void 0===t?void 0:t.path)||""),n((null==h?void 0:null===(a=h[0])||void 0===a?void 0:a.path)||""),m((null==h?void 0:null===(l=h[0])||void 0===l?void 0:l.path)||""),d(!1),null===(i=s.current)||void 0===i||i.blur())},children:[l&&l.length>1?(0,p.jsx)(e2.I,{ref:s,type:"text",value:f?"Pages unavailable":u,onChange:e=>m(e.target.value),placeholder:"Search pages",onBlur:()=>d(!1),className:"h-full border-none bg-transparent px-4 py-3 text-lg shadow-none outline-none ring-0 focus-visible:outline-none focus-visible:ring-0",disabled:f,onFocus:e=>{d(!0),setTimeout(()=>{var e;null===(e=s.current)||void 0===e||e.select()},0),/Android/i.test(navigator.userAgent)&&setTimeout(()=>{e.target.scrollIntoView({behavior:"smooth",block:"center"})},200)}}):(0,p.jsx)("p",{className:"flex h-full items-center px-4 text-lg",children:o}),(0,p.jsxs)("div",{className:"absolute inset-y-0 right-0 flex items-center gap-0.5",children:[c&&(0,p.jsx)(Q.z,{variant:"ghost",className:"mr-2 h-8 w-8 p-1",type:"button",onPointerDown:e=>{m("/"),e.preventDefault()},children:(0,p.jsx)(et.Z,{name:"close"})}),!c&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ta,{variant:"ghost",type:"button",className:"h-8 w-8 p-1"}),(0,p.jsx)(Q.z,{variant:"ghost",className:"h-8 w-8 p-1",type:"button",onClick:()=>{a(!0),e(),setTimeout(()=>{a(!1)},1e3)},disabled:t,children:(0,p.jsx)(et.Z,{name:"refresh",className:t?"animate-spin":""})}),(0,p.jsx)("button",{className:(0,eu.cn)("h-full pl-2 pr-4",y&&"bg-accent-primary text-accent-primary-foreground"),onClick:()=>{w(e=>!e),j(!0)},children:(0,p.jsx)(et.Z,{name:y?"dock_to_bottom_fill":"dock_to_bottom"})})]})]})]})})]})})},nB=(e,t)=>{if(!t||"/"===t)return(0,p.jsx)("span",{children:e});let a=e.startsWith("/")?e.slice(1):e,s=t.startsWith("/")?t.slice(1):t,l=s.toLowerCase();if(!a.toLowerCase().includes(l))return(0,p.jsx)("span",{children:e});let r=a.toLowerCase().indexOf(l),n=a.slice(0,r),i=a.slice(r,r+s.length),o=a.slice(r+s.length);return(0,p.jsxs)("span",{children:[e.startsWith("/")&&"/",n&&(0,p.jsx)("span",{className:"text-muted-foreground",children:n}),(0,p.jsx)("span",{children:i}),o&&(0,p.jsx)("span",{className:"text-muted-foreground",children:o})]})};var nG=a(51117),nH=a(73181),nJ=a(20827),nq=a(93023),nX=a(95652),n$=a(38864);let nY=()=>{let e=(0,rZ.hT)(e=>e.chatMode)===rZ.jE.CHAT_ONLY,{setChatMode:t}=(0,rZ.VK)(),{isAgentModeDefault:a}=(0,nh.v)();return(0,p.jsx)(eV.M,{children:e&&(0,p.jsx)(nQ,{className:"bg-affirmative-primary text-affirmative-primary-foreground",icon:"emoji_objects",onClick:()=>{t(a?rZ.jE.AGENT:rZ.jE.DEFAULT)}})})},nQ=e=>{let{className:t,icon:a,onClick:s}=e;return(0,p.jsxs)(eW.E.button,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,type:"spring",bounce:0},className:(0,eu.cn)("flex h-10 shrink-0 items-center justify-center gap-2 rounded-full px-2.5 py-1",t),type:"button",onClick:s,children:[(0,p.jsx)(et.Z,{name:a}),(0,p.jsx)(et.Z,{name:"close",className:"opacity-50"})]})},n0=e=>{let[t,a]=(0,g.useState)(!1),s=(0,B.v)(),{setSelectedImageUrl:l}=(0,z.mx)(),{message:r,sendChatMessage:n,isSendingDisabled:i,AuthDialogComponent:o}=(0,sL.i)(),c=(0,g.useCallback)(async()=>{if((0,n$.G)(r)){S.ZP.capture("api_key_detected",{project_id:s}),a(!0);return}await n()},[s,n,r]);return(0,p.jsxs)("div",{className:"flex w-full items-start justify-between gap-2",children:[(0,p.jsx)(nX.s,{isOpen:t,onDismiss:()=>a(!1),onConfirm:()=>{a(!1),n(),S.ZP.capture("api_key_warning_dismissed",{project_id:s})}}),(0,p.jsxs)(nG.x,{className:"relative w-full flex-1 border-none bg-transparent p-0 md:mr-0",onSubmit:c,AuthDialogComponent:o,children:[(0,p.jsx)(nH.T,{setSelectedImageUrl:l}),(0,p.jsxs)("div",{className:"flex flex-1 items-start gap-2",children:[(0,p.jsx)(nJ.E,{autoSize:!0,minHeight:40,forceShowPlaceholder:!1,placeholder:"Ask Lovable...",enableSlashCommands:!1,isChatModeActive:!1,className:"text-lg",shouldAutoFocus:!1}),(0,p.jsx)(nY,{})]}),(0,p.jsx)(nq.yo,{})]}),(0,p.jsx)("div",{className:"mt-1"})]})},n1=e=>{let{view:t}=e;return(0,p.jsxs)("div",{className:"relative z-10",children:[t===rK.$.PREVIEW&&(0,p.jsx)(nW,{}),t===rK.$.CHAT&&(0,p.jsx)(n0,{})]})};var n2=a(91787),n5=a(62369);let n4=e=>{let{}=e,t=(0,rZ.hT)(e=>e.chatMode)===rZ.jE.CHAT_ONLY,{setChatMode:a}=(0,rZ.VK)(),s=(0,eR.zq)(),{isAgentModeDefault:l,setAgentMode:r}=(0,nh.v)();return(0,p.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 py-2",children:[(0,p.jsx)(et.Z,{name:"chat_bubble"}),(0,p.jsx)("p",{className:"flex-1 text-lg",children:"Chat Mode"}),(0,p.jsx)(n5.r,{checked:t,onCheckedChange:()=>a(t?l?rZ.jE.AGENT:rZ.jE.DEFAULT:rZ.jE.CHAT_ONLY),className:"h-6 w-10",thumbClassName:"h-5 w-5"})]}),s&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex items-center justify-between gap-2 py-2",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)(et.Z,{name:"mode_cool"}),(0,p.jsx)("p",{className:"w-fit flex-1 text-lg",children:"Legacy Mode"})]}),(0,p.jsx)(n5.r,{checked:!l,onCheckedChange:()=>r(!l),className:"h-6 w-10",thumbClassName:"h-5 w-5"})]}),(0,p.jsxs)(tQ.default,{href:"https://lovable.dev/blog/agent-mode-beta",target:"_blank",className:"flex items-center gap-1 py-2 text-muted-foreground",children:[(0,p.jsx)(et.Z,{name:"info"}),(0,p.jsx)("p",{className:"ml-1 text-lg",children:"Agent Features and Pricing"}),(0,p.jsx)(et.Z,{name:"arrow_outward",className:"ml-auto"})]})]})]})};var n3=a(88515);let n6=e=>{let{closeSheet:t}=e,{getInputProps:a}=(0,n3.j)({portalTargetRef:null,onDropAccepted:t});return(0,p.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,p.jsxs)("label",{className:"flex cursor-pointer flex-col items-center justify-center gap-2 rounded-xl border border-input p-4 active:bg-muted",children:[(0,p.jsx)("input",{className:"hidden",...a({capture:"environment"})}),(0,p.jsx)(et.Z,{name:"add_a_photo"}),(0,p.jsx)("p",{children:"Camera"})]}),(0,p.jsxs)("label",{className:"flex flex-col items-center justify-center gap-2 rounded-xl border border-input p-4 active:bg-muted",children:[(0,p.jsx)("input",{className:"hidden",...a()}),(0,p.jsx)(et.Z,{name:"add_photo_alternate"}),(0,p.jsx)("p",{children:"Images"})]})]})},n8=e=>{let{children:t}=e,[a,s]=(0,g.useState)(!1);return(0,p.jsxs)(n2.yo.Root,{license:"commercial",presented:a,onPresentedChange:s,children:[(0,p.jsx)(n2.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(n2.yo.Portal,{children:(0,p.jsxs)(n2.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(n2.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(n2.yo.Content,{className:"flex h-auto flex-col gap-4 rounded-t-2xl p-4",children:[(0,p.jsx)(n2.TX.Root,{children:(0,p.jsx)(n2.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(n2.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"}),(0,p.jsx)(n6,{closeSheet:()=>{s(!1)}}),(0,p.jsx)(n4,{})]})]})})]})};var n9=a(41173),n7=a(78159);let ie=e=>{let{children:t}=e,a=(0,em.z)(e=>e.showHistory),{setShowHistory:s}=(0,em.VF)(),[l,r]=(0,g.useState)(!1);return(0,p.jsxs)(n2.yo.Root,{license:"commercial",presented:a,onPresentedChange:s,children:[(0,p.jsx)(n2.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(n2.yo.Portal,{children:(0,p.jsxs)(n2.yo.View,{className:"z-[10000] h-[max(100dvh,100%)]",swipeOvershoot:!1,onTravelRangeChange:e=>{2===e.start&&r(!0)},onTravelStatusChange:e=>{"idleOutside"===e&&r(!1)},detents:l?void 0:"50vh",children:[(0,p.jsx)(n2.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(n2.yo.Content,{className:"flex h-[calc(max(100dvh,100%)-20px)] flex-col rounded-t-2xl p-4 pb-0",children:[(0,p.jsx)(n2.TX.Root,{children:(0,p.jsx)(n2.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(n2.yo.Title,{children:"History"}),(0,p.jsx)(n2.yo.Description,{className:"text-muted-foreground",children:"View and restore past edits"}),(0,p.jsx)(n2.Xs.Root,{asChild:!0,className:"w-full",children:(0,p.jsx)(n2.Xs.View,{className:"mt-4 flex min-h-0 w-full flex-1 [&>div]:w-full",scrollGestureTrap:{yEnd:!0},scrollGesture:!!l&&"auto",children:(0,p.jsx)(n2.Xs.Content,{asChild:!0,className:"w-full",children:(0,p.jsx)("div",{className:"flex min-h-0 w-full flex-1 flex-col @container/chat",children:(0,p.jsx)(n7.p,{})})})})}),(0,p.jsx)(n9.A,{}),(0,p.jsx)(n2.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]})},it=eW.E.create(Q.z),ia=()=>{let e=(0,em.z)(e=>e.showHistory),t=(0,rK.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(ie,{children:(0,p.jsx)(it,{variant:t?"outline":"secondary",size:"mobile-round",className:(0,eu.cn)("bg-secondary !shadow-modal hover:bg-secondary md:hover:bg-accent-primary/75 md:hover:text-accent-primary-foreground",e&&"bg-accent-primary text-accent-primary-foreground hover:bg-accent-primary md:hover:bg-accent-primary/75",!t&&"!shadow-modal",t&&"!shadow-transparent"),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},style:{transition:"box-shadow 0.2s ease-out"},children:(0,p.jsx)(et.Z,{name:"history"})})})};var is=a(52922);let il=e=>{let{children:t}=e,a=(0,B.v)(),{message:s,sendChatMessage:l,isSendingDisabled:r}=(0,sL.i)(),{showStopAction:n,mutation:i}=(0,is.q)({projectId:null!=a?a:void 0}),o=(0,g.useCallback)(async()=>{await i.mutateAsync()},[i]);return a&&(n||i.isPending)?(0,p.jsx)(eW.E.button,{type:"button",className:(0,eu.cn)("flex h-10 w-10 items-center justify-center rounded-full bg-primary transition-opacity duration-150 disabled:cursor-not-allowed disabled:opacity-50"),disabled:i.isPending,onClick:o,initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(et.Z,{name:"stop_fill",size:"large",className:"text-background"})},"stop-button"):s.length>0?(0,p.jsx)(eW.E.button,{id:"chatinput-send-message-button",type:"submit",className:(0,eu.cn)("flex h-10 w-10 items-center justify-center rounded-full bg-foreground text-background transition-opacity duration-150 ease-out disabled:cursor-not-allowed disabled:opacity-50"),disabled:r,onClick:l,initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(et.Z,{name:"arrow_upward_alt_600",size:"large"})},"send-button"):t};var ir=a(21622);let ii=(0,g.forwardRef)((e,t)=>{let{children:a,className:s,asChild:l=!1,...r}=e,n=l?ir.g7:"div";return(0,p.jsx)(n,{ref:t,className:(0,eu.cn)("flex items-center gap-2 py-2 transition-colors duration-150 ease-in-out active:text-muted-foreground",s),...r,children:a})});ii.displayName="MobileMenuOption";let io=e=>{let{project:t,hasSupabaseConfig:a,isLoadingSecurityWarnings:s,securityWarnings:l}=e,{openSettings:r}=(0,eN.r)(),{customDomains:n}=aQ({projectId:null==t?void 0:t.id,enabled:!0});return(0,p.jsxs)("div",{className:"my-4 flex flex-col gap-2",children:[(null==t?void 0:t.url)?(0,p.jsx)(ii,{asChild:!0,children:(0,p.jsxs)("a",{href:null==t?void 0:t.url,target:"_blank",rel:"noreferrer",className:"font-medium",children:[(0,p.jsx)(et.Z,{name:"language"}),(0,a$.P)(t.url),(0,p.jsx)(et.Z,{name:"arrow_outward",className:"ml-auto text-muted-foreground"})]})}):(0,p.jsxs)(ii,{children:[(0,p.jsx)(et.Z,{name:"language"}),(0,p.jsxs)("p",{className:"font-medium",children:[null==t?void 0:t.name,".lovable.app"]})]}),null==n?void 0:n.map((e,t)=>(0,p.jsx)("div",{className:"flex items-center px-4 py-0.5",children:(0,p.jsx)(aX.Z,{domain:e,showRemove:!1,showIcon:!0},t)},t)),(0,p.jsxs)(ii,{onClick:()=>r("domains"),children:[(0,p.jsx)(et.Z,{name:"add"}),"Custom domains"]}),a&&(0,p.jsx)(si,{isLoadingSecurityWarnings:null!=s&&s,securityWarnings:null!=l?l:null,project:t})]})},ic=e=>{var t,a;let{children:s}=e,[l,r]=(0,g.useState)(!1),{setView:n}=(0,rK.zp)(),i=()=>{r(!1)},[o,c]=(0,g.useState)(!1),d=(0,Y.iZ)(e=>e.project),u=(0,Y.iZ)(e=>e.projectId),m=(0,eR.ZG)(),h=!!(null==d?void 0:null===(t=d.supabase_project_config)||void 0===t?void 0:t.supabase_project_id),{securityWarnings:x,isLoadingWarnings:f,hasSupabaseErrors:v}=(0,a7.N)({projectId:u,supabaseProjectId:null==d?void 0:null===(a=d.supabase_project_config)||void 0===a?void 0:a.supabase_project_id,setShowPublishConfirmDialog:c,shouldFetchSecurityWarnings:!m&&l}),{handleSecurityReview:b,isSendingSecurityReview:j,isSecurityReviewDisabled:y,securityReviewDisabledReason:w}=(0,a9.C)({projectId:u,setIsOpen:r}),{errorMessage:N,isBuildError:E,failedDialogOpen:k,setFailedDialogOpen:C,handlePublish:_,handlePublishAnyway:S,publishMutation:T}=a8({projectId:u,hasCriticalSecurityIssues:null!=v&&v,setShowPublishConfirmDialog:c,projectUrl:(null==d?void 0:d.url)||void 0}),{showUpdateSuccess:R,isUpToDate:I,buttonText:D}=a3({project:d,publishMutation:T}),P=(0,eR.wf)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n2.yo.Root,{license:"commercial",presented:l,onPresentedChange:r,children:[(0,p.jsx)(n2.yo.Trigger,{asChild:!0,children:s}),(0,p.jsx)(n2.yo.Portal,{children:(0,p.jsxs)(n2.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(n2.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(n2.yo.Content,{className:"h-auto rounded-t-2xl p-4",children:[(0,p.jsx)(n2.TX.Root,{children:(0,p.jsx)(n2.yo.Handle,{children:"Close menu"})}),(0,p.jsx)(n2.yo.Title,{children:(null==d?void 0:d.url)?"Update":"Publish"}),(0,p.jsx)(n2.yo.Description,{className:"text-muted-foreground",children:(null==d?void 0:d.url)?"Update your project to make your changes live.":"Publish your project to make it visible for others on the internet."}),(0,p.jsx)(io,{project:d,hasSupabaseConfig:h,isLoadingSecurityWarnings:f,securityWarnings:null!=x?x:void 0}),P&&(0,p.jsx)(aq,{project:d}),(0,p.jsxs)("div",{className:"mt-8 flex items-center gap-2",children:[!v&&(0,p.jsx)(aW.b,{showTooltip:!!w,tooltipContent:w,className:"w-full",children:(0,p.jsxs)(Q.z,{variant:"secondary",onClick:()=>{n(rK.$.CHAT),b(),i()},disabled:y,loading:j,className:"relative h-10 w-full gap-1.5 text-base",children:["Review Security ",(0,p.jsx)(aB,{className:"text-sm"})]})}),(0,p.jsx)(Q.z,{variant:R||I?"affirmative":v?"secondary":"affirmative",onClick:_,disabled:f||I,loading:T.isPending,className:(0,eu.cn)("h-10 w-full text-base",(R||I)&&"bg-affirmative-primary text-affirmative-primary-foreground hover:bg-affirmative-primary/80"),children:D}),v&&(0,p.jsx)(aW.b,{showTooltip:!!w,tooltipContent:w,className:"w-full",children:(0,p.jsxs)(Q.z,{variant:"affirmative",onClick:()=>{n(rK.$.CHAT),b(),i()},disabled:y,loading:j,className:"relative h-10 w-full gap-1.5 text-base",children:["Review Security ",(0,p.jsx)(aB,{className:"text-sm"})]})})]}),(0,p.jsx)(n2.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]}),(0,p.jsx)(aM,{open:k,onOpenChange:C,errorMessage:N,isBuildError:E}),(0,p.jsx)(aG,{open:o,onOpenChange:c,onPublishAnyway:S,onReviewIssues:b,isReviewDisabled:y,isReviewLoading:j,reviewDisabledReason:w})]})},id=eW.E.create(Q.z),iu=()=>{let{activeView:e}=(0,eA.Z)(),t=(0,z.aK)(e=>e.edits),a=(0,en.VJ)(e=>e.activeEditId),s=a?t[a]:null,{openSettings:l}=(0,eN.r)();return"preview"===e?(0,p.jsx)(ip,{}):"snapshot"===e?(0,p.jsx)(im,{activeEdit:s}):(0,p.jsx)(id,{variant:"outline",size:"mobile-round",onClick:()=>l(),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(et.Z,{name:"settings"})},"settings-button")},im=e=>{let{activeEdit:t}=e,{setView:a}=(0,rK.zp)(),{exitView:s}=(0,eA.Z)(),l=(0,sx.C)(),r=(0,A.bk)(e=>e.isSomeRevertMutationPending),{mutate:n,isPending:i}=(0,sf.I)({onSuccess:s}),o=(0,rK.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(id,{variant:o?"outline":"secondary",size:"mobile-round",className:(0,eu.cn)("animate-text-shimmer px-0 text-lg text-affirmative-primary hover:bg-secondary focus-visible:bg-secondary active:bg-secondary",!o&&"!shadow-modal",o&&"!shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},disabled:!t||l||r||i,onClick:()=>{n({edit:t}),a(rK.$.CHAT)},initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(et.Z,{name:"restart_alt",className:i?"animate-spin-reverse":""})},"restore-button")},ip=()=>{let e=(0,rK.gu)(e=>e.isPreviewDocked);return(0,p.jsx)(ic,{children:(0,p.jsx)(id,{variant:e?"outline":"secondary",size:"mobile-round",className:(0,eu.cn)("px-0 text-lg text-affirmative-primary hover:bg-secondary focus-visible:bg-secondary active:bg-secondary",!e&&"!shadow-modal",e&&"!shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(et.Z,{name:"language"})},"publish-button")})},ih=()=>{let{view:e}=(0,rK.gu)(e=>e),{setView:t}=(0,rK.zp)(),a=(0,g.useRef)(null),s=(0,rK.gu)(e=>e.isPreviewDocked);return(0,p.jsxs)(eW.E.div,{ref:a,className:(0,eu.cn)("relative grid h-10 flex-1 grid-cols-2 rounded-full bg-muted text-lg",e===rK.$.PREVIEW&&!s&&"shadow-modal",s&&"shadow-transparent"),style:{transition:"box-shadow 0.2s ease-out"},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,type:"spring",bounce:0},children:[(0,p.jsx)("div",{onClick:()=>t(rK.$.CHAT),className:(0,eu.cn)("relative flex h-full cursor-pointer items-center justify-center rounded-full px-4"),"data-testid":"mobile-view-chat-button",children:(0,p.jsx)("span",{className:"pointer-events-none relative z-10 select-none",children:"Chat"})}),(0,p.jsx)("div",{onClick:()=>t(rK.$.PREVIEW),className:(0,eu.cn)("relative flex h-full cursor-pointer items-center justify-center rounded-full px-4"),"data-testid":"mobile-view-preview-button",children:(0,p.jsx)("span",{className:"pointer-events-none relative z-10 select-none",children:"Preview"})}),(0,p.jsx)(eW.E.div,{className:"absolute inset-y-[2px] w-1/2 rounded-full bg-background shadow-md","data-testid":"mobile-view-pill","data-view":e,initial:{left:e===rK.$.CHAT?"2px":"calc(50% - 2px)"},animate:{left:e===rK.$.CHAT?"2px":"calc(50% - 2px)"},transition:{type:"spring",duration:.4,bounce:0},layoutId:"mobile-view-switcher-pill",drag:"x",dragConstraints:a,dragElastic:0,dragMomentum:!0,dragTransition:{bounceStiffness:80,bounceDamping:10},dragSnapToOrigin:!0,onDragEnd:(e,s)=>{if(!a.current)return;let l=s.offset.x;Math.abs(l)>40&&(l>0?t(rK.$.PREVIEW):t(rK.$.CHAT))}},"pill-".concat(e))]},"mobile-view-switcher")},ix=()=>(0,p.jsxs)("div",{className:"absolute inset-0 translate-y-[30%] [&>div]:absolute [&>div]:inset-0",style:{bottom:"calc(-1 * env(safe-area-inset-bottom))"},children:[(0,p.jsx)("div",{style:{zIndex:2,WebkitBackdropFilter:"blur(1px)",backdropFilter:"blur(1px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgb(255, 255, 255) 12.5%, rgb(255, 255, 255) 37.5%, rgba(255, 255, 255, 0) 50%)"}}),(0,p.jsx)("div",{style:{zIndex:3,WebkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 12.5%, rgb(255, 255, 255) 37.5%, rgb(255, 255, 255) 50%, rgba(255, 255, 255, 0) 62.5%)"}}),(0,p.jsx)("div",{style:{WebkitBackdropFilter:"blur(4px)",backdropFilter:"blur(4px)",WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 37.5%, rgb(255, 255, 255) 50%, rgb(255, 255, 255) 62.5%, rgba(255, 255, 255, 0) 75%)"}}),(0,p.jsx)("div",{style:{zIndex:5,WebkitMask:"linear-gradient(to bottom, rgba(255, 255, 255, 0) 50%, rgb(255, 255, 255) 62.5%, rgb(255, 255, 255) 75%, rgba(255, 255, 255, 0) 87.5%)",WebkitBackdropFilter:"blur(8px)",backdropFilter:"blur(8px)"}})]}),ig=eW.E.create(Q.z),iv=()=>{let{view:e}=(0,rK.gu)(e=>e),{setView:t}=(0,rK.zp)(),{openSettings:a}=(0,eN.r)(),s=(0,rK.gu)(e=>e.isPreviewDocked),{activeView:l,exitView:r}=(0,eA.Z)();return"preview"===l||"snapshot"===l||e===rK.$.CHAT?(0,p.jsxs)("div",{className:(0,eu.cn)("relative z-10 -mx-px flex w-[calc(100%+2px)] flex-col gap-2 rounded-t-2xl border-l border-r border-t bg-background p-4",e===rK.$.PREVIEW&&"gap-2 rounded-none bg-transparent transition-colors duration-150 ease-in-out",!s&&e===rK.$.PREVIEW&&"border-none"),children:[!s&&(0,p.jsx)(ix,{}),(0,p.jsx)(n1,{view:e}),(0,p.jsxs)("div",{className:"z-20 flex w-full items-center justify-between gap-2",children:[(0,p.jsx)("div",{className:"flex justify-start gap-2",children:(0,p.jsxs)(eV.M,{children:[e===rK.$.CHAT&&(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(n8,{children:(0,p.jsx)(ig,{variant:"outline",size:"mobile-round",initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(et.Z,{name:"add"})})})}),e===rK.$.PREVIEW&&(0,p.jsx)(ia,{})]})}),(0,p.jsx)(ih,{}),(0,p.jsx)("div",{className:"flex justify-end gap-2",children:(0,p.jsxs)(eV.M,{children:[e===rK.$.CHAT&&(0,p.jsx)(il,{children:(0,p.jsx)(ig,{variant:"outline",size:"mobile-round",onClick:()=>a(),initial:{opacity:0,scale:.7},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.7},transition:{duration:.2,type:"spring",bounce:.4},children:(0,p.jsx)(et.Z,{name:"settings"})},"settings-button")}),e===rK.$.PREVIEW&&(0,p.jsx)(iu,{})]})})]})]}):(0,p.jsx)(ib,{setView:t})},ib=e=>{let{setView:t}=e,{exitView:a,activeView:s}=(0,eA.Z)();return(0,p.jsxs)("div",{className:"relative -mx-px flex w-[calc(100%+2px)] items-center justify-between overflow-hidden rounded-t-2xl border-x border-t bg-background px-4 py-4",children:[(0,p.jsx)(Q.z,{variant:"outline",onClick:()=>{t(rK.$.CHAT),a()},size:"mobile-round",children:(0,p.jsx)(et.Z,{name:"chevron_left"})}),(0,p.jsxs)("p",{className:"absolute left-1/2 -translate-x-1/2 whitespace-nowrap text-center font-medium",children:["Viewing ",nV.bC[s]]})]})},ij=e=>{let{onSelect:t}=e;return(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,p.jsx)(iy,{value:"system",label:"System",icon:"contrast",onSelect:t}),(0,p.jsx)(iy,{value:"light",label:"Light",icon:"light_mode",onSelect:t}),(0,p.jsx)(iy,{value:"dark",label:"Dark",icon:"dark_mode",onSelect:t})]})},iy=e=>{let{value:t,label:a,icon:s,onSelect:l}=e,{theme:r,setTheme:n}=(0,ti.F)(),i=e=>{("light"===e||"dark"===e||"system"===e)&&(n(e),null==l||l())};return(0,p.jsxs)("div",{className:(0,eu.cn)("flex cursor-pointer flex-col items-center justify-center gap-2 rounded-xl border border-input bg-background p-4 active:bg-muted-active",r===t&&"border-primary"),onClick:()=>i(t),children:[(0,p.jsx)(et.Z,{name:s}),(0,p.jsx)("p",{children:a})]})},iw=e=>{let{children:t}=e,{theme:a}=(0,ti.F)(),[s,l]=(0,g.useState)(!1),r=(0,eK.hO)(e=>e.projectWorkspace),n=(0,eK.hO)(e=>e.membership),i=(0,Y.iZ)(e=>e.project),{canEdit:o}=(0,w.t)(),[c,d]=(0,g.useState)(!1),[u,m]=(0,g.useState)("initial"),{openSettings:h}=(0,eN.r)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(n2.yo.Root,{license:"commercial",presented:s,onPresentedChange:e=>{l(e),m("initial")},className:"flex min-w-0",children:[(0,p.jsx)(n2.yo.Trigger,{asChild:!0,children:t}),(0,p.jsx)(n2.yo.Portal,{children:(0,p.jsxs)(n2.yo.View,{className:"z-[10000]",children:[(0,p.jsx)(n2.yo.Backdrop,{themeColorDimming:"auto"}),(0,p.jsxs)(n2.yo.Content,{className:"relative flex h-auto min-h-[20vh] flex-col overflow-hidden rounded-t-2xl",children:[(0,p.jsx)(n2.TX.Root,{children:(0,p.jsx)(n2.yo.Handle,{children:"Close menu"})}),(0,p.jsxs)("div",{className:"relative flex-1 overflow-hidden rounded-t-2xl",children:[(0,p.jsxs)(eW.E.div,{className:"rounded-t-2xl bg-background p-4",initial:{x:"0%"},animate:{x:"initial"===u?"0%":"-20%"},transition:{duration:.4,type:"spring",bounce:.1},children:[o&&r&&(0,p.jsx)(eL.H,{workspace:r,membership:n}),(0,p.jsxs)("div",{className:"flex flex-col gap-1 py-4",children:[o&&(0,p.jsxs)(ii,{onClick:()=>{l(!1),h("project")},children:[(0,p.jsx)(et.Z,{name:"settings"}),(0,p.jsx)("p",{children:"Project settings"})]}),o&&i&&(0,p.jsxs)(ii,{onClick:()=>{l(!1),d(!0)},children:[(0,p.jsx)(et.Z,{name:"edit"}),(0,p.jsx)("span",{children:"Rename project"})]}),(0,p.jsxs)(ii,{onClick:()=>m("appearance"),children:[(0,p.jsx)(et.Z,{name:"contrast"}),(0,p.jsx)("span",{children:"Appearance"}),(0,p.jsxs)("div",{className:"ml-auto flex items-center gap-1 text-muted-foreground",children:[(0,p.jsx)("span",{className:"capitalize",children:a}),(0,p.jsx)(et.Z,{name:"chevron_right"})]})]})]})]}),(0,p.jsxs)(eW.E.div,{className:"absolute inset-0 flex flex-col gap-4 rounded-t-2xl bg-muted p-4",initial:{x:"100%"},animate:{x:"appearance"===u?"0%":"100%"},transition:{duration:.4,type:"spring",bounce:.1},children:[(0,p.jsxs)("div",{className:"relative flex w-full justify-center",children:[(0,p.jsxs)("button",{className:"absolute left-0 top-0 flex items-center gap-1 duration-150 ease-in-out active:text-muted-foreground",onClick:()=>m("initial"),children:[(0,p.jsx)(et.Z,{name:"chevron_left"}),(0,p.jsx)("span",{children:"Back"})]}),(0,p.jsx)("p",{className:"text-center font-medium",children:"Appearance"})]}),(0,p.jsx)(ij,{onSelect:()=>m("initial")})]})]}),(0,p.jsx)(n2.yo.BleedingBackground,{className:"rounded-t-2xl border-t bg-background"})]})]})})]}),i&&(0,p.jsx)(ey.i,{project:i,isOpen:c,onClose:()=>d(!1)})]})},iN=e=>{let{canEdit:t=!0,isLoadingPermissions:a=!1}=e,s=(0,Y.iZ)(e=>e.project),l=!!(null==s?void 0:s.is_supabase_enabled)||!!(null==s?void 0:s.supabase_project_config);return(0,p.jsxs)("div",{className:"relative z-10 flex h-12 w-full shrink-0 items-center justify-between gap-4 bg-background pr-4",children:[(0,p.jsx)(Q.z,{variant:"ghost",asChild:!0,className:"h-full hover:bg-transparent focus-visible:bg-transparent active:bg-transparent",children:(0,p.jsx)(tQ.default,{href:"/",children:(0,p.jsx)(et.Z,{name:"chevron_left"})})}),(0,p.jsx)(iw,{children:(0,p.jsxs)("h1",{className:"absolute left-1/2 top-1/2 flex min-w-0 max-w-[50vw] -translate-x-1/2 -translate-y-1/2 items-center gap-1 truncate text-lg font-medium",children:[(null==s?void 0:s.name)?(0,p.jsx)("span",{className:"truncate",children:s.name}):(0,p.jsx)(eB.O,{className:"h-4 w-36"}),(0,p.jsx)(et.Z,{name:"chevron_right",className:"rotate-90"})]})}),(0,p.jsx)(iE,{canEdit:t,isLoadingPermissions:a,isSupabaseEnabled:l})]})},iE=e=>{let{canEdit:t,isLoadingPermissions:a,isSupabaseEnabled:s}=e,{setIsRemixDialogOpen:l}=(0,Y.d2)(),{isAuthenticated:r}=(0,b.Eu)(),n=(0,f.useRouter)(),i=(0,g.useCallback)(()=>{if(!r){n.push("/login?redirect=".concat(window.location.pathname));return}l(!0)},[r,n,l]);return a?(0,p.jsx)("div",{className:"h-4 w-10"}):t?(0,p.jsx)(az,{hasUnsavedChanges:!1}):(0,p.jsx)(Q.z,{className:"flex items-center gap-1",onClick:i,disabled:!(t||!s),size:"sm",children:"Remix"})},ik=e=>{let{children:t,projectId:a}=e,{view:s}=(0,rK.gu)(e=>e),l=(0,Y.iZ)(e=>e.project),r=(0,rK.gu)(e=>e.isPreviewDocked),{setIsPreviewDocked:n}=(0,rK.zp)();(0,g.useEffect)(()=>{window.addEventListener("message",e=>{"SCROLLABLE"===e.data.type&&n(!1)})},[n]);let[i,o]=(0,g.useState)(!1),{canEdit:c,isLoading:d}=(0,w.t)();return((0,g.useEffect)(()=>{s===rK.$.PREVIEW&&o(!0)},[s]),c)?(0,p.jsxs)("div",{className:"flex h-dvh min-h-0 max-w-[100vw] flex-1 flex-col overflow-hidden md:hidden",style:{paddingBottom:"env(safe-area-inset-bottom)"},children:[(0,p.jsxs)("div",{className:(0,eu.cn)("relative min-h-0 flex-1"),children:[(0,p.jsxs)(eW.E.div,{animate:{x:s===rK.$.CHAT?0:"-100vw"},transition:{duration:.5,type:"spring",bounce:.15},className:(0,eu.cn)("absolute inset-0 flex min-h-0 max-w-[100vw] flex-1 flex-col will-change-transform",s!==rK.$.CHAT&&"pointer-events-none"),"aria-hidden":s!==rK.$.CHAT,tabIndex:s!==rK.$.CHAT?-1:0,inert:s!==rK.$.CHAT,children:[(0,p.jsx)(iN,{}),t]},rK.$.CHAT),(i||s===rK.$.PREVIEW)&&(0,p.jsx)(eW.E.div,{initial:{x:"100vw"},animate:{x:s===rK.$.PREVIEW?0:"100vw"},transition:{duration:.5,type:"spring",bounce:.15},className:(0,eu.cn)("absolute inset-0 flex max-w-[100vw] flex-1 flex-col overflow-y-auto overflow-x-hidden will-change-transform",s!==rK.$.PREVIEW&&"pointer-events-none",r?"h-auto":"h-dvh"),"aria-hidden":s!==rK.$.PREVIEW,tabIndex:s!==rK.$.PREVIEW?-1:0,inert:s!==rK.$.PREVIEW,children:(0,p.jsx)(nN,{})},rK.$.PREVIEW)]}),(0,p.jsx)(nK.t,{children:(0,p.jsx)(iv,{})}),l&&(0,p.jsx)(nD,{project:l}),(0,p.jsx)(nF,{})]}):(0,p.jsx)(iC,{projectId:a,isLoadingPermissions:d})},iC=e=>{let{projectId:t,isLoadingPermissions:a}=e,s=(0,Y.iZ)(e=>e.project);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"relative flex h-dvh min-h-0 max-w-[100vw] flex-1 flex-col overflow-hidden md:hidden",children:[(0,p.jsx)(iN,{canEdit:!1,isLoadingPermissions:a}),(0,p.jsx)("div",{className:(0,eu.cn)("absolute inset-0 flex h-dvh flex-1 flex-col"),children:(0,p.jsx)(nN,{})})]}),s&&(0,p.jsx)(nD,{project:s}),(0,p.jsx)(nF,{})]})};var i_=a(48535);function iS(){let e=(0,B.D)(),{refreshPreview:t}=(0,ez.My)(),{errors:a}=(0,i_.hT)({projectId:e}),s=(0,A.bk)(e=>e.isSendChatMessageMutationPending),l=(0,g.useRef)(!1);(0,g.useEffect)(()=>{s?a&&a.length>0&&(l.current=!0):(l.current&&t(),l.current=!1)},[a,t,s])}var iT=a(11134),iR=a(81858),iI=a(88021);function iD(e){let{open:t,onOpenChange:a,orgId:s}=e,l=(0,iR.T_)("SupabaseReauthDialog"),r=(0,B.v)(),{handleConnect:n}=(0,iI.hb)(r||"");return(0,p.jsx)(ee.Vq,{open:t,onOpenChange:a,children:(0,p.jsxs)(ee.cZ,{size:"md",children:[(0,p.jsxs)(ee.fK,{children:[(0,p.jsx)(ee.$N,{children:l("title")}),(0,p.jsx)(ee.Be,{children:l("description")})]}),(0,p.jsx)("div",{className:"mt-4 flex flex-col gap-4",children:(0,p.jsx)(Q.z,{onClick:()=>{a(!1),n({supabaseOrgId:s})},className:"w-full",children:l("button.reauthenticate")})})]})})}var iP=a(29895),iz=a(46724);let iA=e=>{var t;let{children:a}=e,s=(0,Y.iZ)(e=>e.projectId);iS();let l=(0,h.NL)(),r=(0,sx.C)(),{canEdit:n,isProjectAdmin:i}=(0,w.t)(),o=(0,sk.mo)({projectId:s,onRepoInaccessible:()=>{l.setQueryData(iz.V.repoAccessibility({projectId:s,userProjectPermissions:{admin:i,edit:n}}).queryKey,()=>({accessibility:m.accessibility.REPO_NOT_ACCESSIBLE}))}}),{userData:c}=(0,Z.SE)(),[d,u]=(0,g.useState)(!1),x=(0,Y.iZ)(e=>{var t;return null===(t=e.project)||void 0===t?void 0:t.supabase_project_config}),f=(0,Y.iZ)(e=>e.project),v=(0,iP.S)({workspaceId:null!==(t=null==f?void 0:f.workspace_id)&&void 0!==t?t:""}),b=(0,g.useCallback)(async e=>{var t,a,l;let{body:r,options:n}=e;null==n||null===(t=n.clear)||void 0===t||t.call(n),S.LJ.capture(I.SL.CHAT.MESSAGE_SENT,{project_id:s,selected_element:(null===(a=r.selected_elements)||void 0===a?void 0:a.length)||null});let i=null==x?void 0:x.supabase_organization_id,c=null==v?void 0:null===(l=v.supabaseOrganizations)||void 0===l?void 0:l.find(e=>e.id===i);if(x&&c&&!c.has_analytics_scope){u(!0);return}await o.mutateAsync({body:r,restore:null==n?void 0:n.restore,clear:null==n?void 0:n.clear})},[null==f?void 0:f.workspace_id,s,o,x,null==v?void 0:v.supabaseOrganizations]);return(0,p.jsxs)(iT.x,{onSendChatMessage:b,hasActiveLock:r,children:[(0,p.jsx)(iD,{orgId:null==x?void 0:x.supabase_organization_id,open:d,onOpenChange:u}),a]})};var iO=a(21652);let iL="joinedViaInviteLink";function iZ(e){let{children:t}=e,{project_id:a}=(0,f.useParams)();return(0,p.jsx)(k.qG,{localStorageKey:a,children:(0,p.jsx)(Y.jI,{projectId:a,children:(0,p.jsx)(iO.zV,{projectId:a,children:(0,p.jsx)(C.m,{children:(0,p.jsx)(eK.c8,{children:(0,p.jsx)($.h,{projectId:a,children:(0,p.jsx)(em.f6,{children:(0,p.jsx)(rK.eP,{children:(0,p.jsx)(ei.jJ,{children:(0,p.jsx)(en.hg,{children:(0,p.jsx)(rZ.cb,{children:(0,p.jsx)(e6.NE,{children:(0,p.jsx)(to.TO,{projectId:a,children:(0,p.jsx)(A.vw,{children:(0,p.jsx)(z.aM,{projectId:a,children:(0,p.jsx)(ez.wF,{children:(0,p.jsx)(iM,{children:t})})})})})})})})})})})})})})})})})}function iM(e){let{children:t}=e,a=(0,Y.iZ)(e=>e.projectId),s=(0,f.useSearchParams)(),l=(0,f.useRouter)(),r=(0,f.usePathname)(),n=(0,Y.iZ)(e=>e.project),i=(0,g.useRef)(new Set),o=(0,h.NL)(),{authUser:c}=(0,b.Eu)(),d=()=>{let e=new URLSearchParams(s.toString());e.delete(iL);let t=e.toString(),a=t?"".concat(r,"?").concat(t):r;l.replace(a)},{mutate:u}=(0,x.D)({mutationFn:async e=>(0,E.SJ)().put("/projects/".concat(e,"/collaborators/accept-invite")),onSuccess:()=>{i.current.has(a)||v.Am.success("You've been added to \"".concat(null==n?void 0:n.name,'"'),{description:"You now have access to this project"}),i.current.add(a),d()},onError:e=>{(0,N.Eo)(e)},onSettled:()=>{o.invalidateQueries({queryKey:_.iZ.collaborators(a)})}});return(0,g.useEffect)(()=>{let e=s.get(iL);if(!c&&e){l.replace("/login");return}e&&n&&!i.current.has(a)&&u(a)},[s,a,r,l,n,u,c]),!function(e){let{projectId:t}=e,{canEdit:a}=(0,w.t)(),s=(0,h.NL)(),l=(0,T.useCurrentWorkspaceStore)(e=>e.currentWorkspace),{setIsSendChatMessageMutationPending:r}=(0,A.Xr)(),{updateConsoleStateOnStreaming:n}=(0,P.k)({autoSwitchToCode:!1}),{createChatRequestPerformanceMeasurer:i}=(0,U.t)(),{updateMessage:o,setLatestStreamedMessage:c,snapshot:{getUserMessageCount:d,getLastUserMessage:u}}=(0,z.mx)(),{playAudioOnGenerationComplete:m}=F(),{handleChatStreamingError:p}=(0,L.Z)(),x=(0,g.useRef)(null),f=(0,g.useRef)(!1),v=(0,g.useRef)(""),b=(0,g.useRef)(!1),j=(0,g.useRef)(null),y=K((0,g.useCallback)(e=>{if(v.current&&x.current){let t={...e,stopped:!!e.stopped,status:"running"};c(t);let a=(0,O.AR)(t);a&&("aiMessage"===a.type||"userMessage"===a.type)&&o(e.id,a,!0)}},[c,o]),100),N=(0,g.useCallback)(e=>{if("message"!==e.type){R.logging.error("received_unknown_chat_sse",{event_type:e.type,event_data:e.data});return}let a=e.data;x.current!=a.message_id&&(v.current="",f.current=!1),x.current=a.message_id;let o=!f.current&&!a.is_final,p=f.current&&a.is_final;if(f.current=!a.is_final,o&&(r(!0),v.current="",b.current=!1),p){var h,g;if(null==l?void 0:l.id){let e=l.id;(async()=>{for(let a=0;a<5;a++){var t;if(await new Promise(e=>setTimeout(e,1e3)),null===(t=j.current)||void 0===t?void 0:t.signal.aborted)return;await s.invalidateQueries({queryKey:_.E.detail(e),refetchType:"active"})}})()}r(!1),c(void 0),v.current="";let{measureTimeToLastToken:e}=i({projectId:t});e();let a=1>=d(),n=null!==(g=null===(h=u())||void 0===h?void 0:h.chatOnly)&&void 0!==g&&g;a&&S.ZP.capture(I.SL.CREATION.DONE_AND_RETAINED_VIEW,{project_id:t}),b.current||m({isCreation:a,isChatOnly:n});return}v.current+=a.content;let w={id:a.message_id,content:v.current,created_at:a.created_at,role:D.r.role.AI,tag:D.r.tag.INSTANT_MODE_MESSAGE,status:"running",stopped:!1,thinking_time_ms:a.thinking_time_ms,time_to_first_token_ms:a.time_to_first_token_ms,graph_id:a.graph_id,exclude_from_history:!1};y(w),n(w)},[c,n,r,i,t,d,u,m,y,s,null==l?void 0:l.id]);(0,g.useEffect)(()=>{let e=new AbortController;j.current=e;let s=async()=>{try{let a=(0,E.SJ)();await a.getWithStreaming({url:"/projects/".concat(t,"/latest-message"),onMessage:N,signal:e.signal,reconnectOptions:{onReconnect:()=>{f.current=!1}}})}catch(e){var a,s;e instanceof Error&&"AbortError"===e.name&&(b.current=!0),p(e,{lastUserMessageId:null!==(s=null===(a=u())||void 0===a?void 0:a.id)&&void 0!==s?s:""})}};return a&&s(),()=>{b.current=!0,e.abort()}},[a,t,u,p,N])}({projectId:a}),er(),(0,p.jsx)(j.$,{projectId:a,children:(0,p.jsx)(ad,{projectId:a,children:(0,p.jsx)(iF,{children:t})})})}let iF=e=>{let{children:t}=e,a=(0,Y.iZ)(e=>e.projectId),{startLiveModeInBackground:s}=(0,ez.My)(),{canEdit:l}=(0,w.t)();iS();let r=(0,y.Z)("md");return(0,g.useEffect)(()=>{l&&s()},[s,l]),(0,p.jsx)(iA,{children:(0,p.jsx)(tu.P,{children:r?(0,p.jsx)(ik,{projectId:a,children:t}):(0,p.jsx)(nU,{projectId:a,children:t})})})}},44426:function(e,t,a){"use strict";a.d(t,{I_:function(){return u},PanelStoreProvider:function(){return c},SE:function(){return d},k6:function(){return m}});var s=a(52155),l=a(98244),r=a(67801),n=a(77528),i=a(58432);let o=(0,l.createContext)(null);function c(e){let{initialPanelSizes:t,children:a}=e,r=(0,l.useRef)();return r.current||(r.current=(0,n.b)(t)),(0,s.jsx)(o.Provider,{value:r.current,children:a})}function d(e){let t=(0,l.useContext)(o);if(!t)throw Error("usePanelStore must be used within a PanelStoreProvider");return(0,r.oR)(t,e)}let u=()=>{let{width:e}=(0,i.Z)();return e?325/e*100:20},m=()=>{let{width:e}=(0,i.Z)();return e?600/e*100:60}},77528:function(e,t,a){"use strict";a.d(t,{DEFAULT_SIDEBAR_SIZE:function(){return r},b:function(){return l}});var s=a(67801);let l=e=>(0,s.Ue)(t=>({panelSizes:e||[r,100-r],updatePanelSizes:e=>t({panelSizes:e})})),r=30},34947:function(e,t,a){"use strict";var s=a(52155),l=a(37298),r=a(56852),n=a(53259),i=a(99792),o=a(4578);t.Z=e=>{let{title:t,iconName:a,imageSrc:c,onClick:d,internalHref:u,externalHref:m,className:p,iconClassName:h}=e,x=(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)(i.Z,{name:a,className:"shrink-0 text-foreground ".concat(h)}),c&&(0,s.jsx)(l.default,{alt:"icon",src:c,width:"14",height:"14"}),(0,s.jsx)("span",{className:"truncate text-primary",children:t})]});return(0,s.jsx)(n.Xi,{className:(0,o.cn)("",p),asChild:!0,children:u?(0,s.jsx)(r.default,{href:u,children:x}):m?(0,s.jsxs)("a",{href:m,target:"_blank",rel:"noopener noreferrer",children:[x,(0,s.jsx)(i.Z,{name:"arrow_outward",className:"ml-auto h-4 w-4 text-foreground"})]}):(0,s.jsx)("div",{onClick:()=>{d&&d()},children:x})})}},88199:function(e,t,a){"use strict";a.d(t,{R:function(){return i}});var s=a(52155),l=a(98244),r=a(3011),n=a(4578);let i=l.forwardRef((e,t)=>{let{value:a,onChange:i,min:o=0,max:c=100,step:d=1,className:u,inputClassName:m,leftIconClassName:p,scrubSensitivity:h=.5,direction:x="horizontal",icon:f,leftIcon:g,disabled:v=!1,...b}=e,[j,y]=l.useState(a.toString()),[w,N]=l.useState(!1),E=l.useRef(!1),k=l.useRef(0),C=l.useRef(0),_=l.useRef(parseFloat(j)||o),S=l.useMemo(()=>{if(!Number.isFinite(d))return 0;let e=d.toString().split(".")[1];return e?e.length:0},[d]);function T(e){v||0!==e.button||(N(!0),E.current=!0,k.current=e.clientX,C.current=e.clientY,_.current=parseFloat(j)||o,document.addEventListener("pointermove",R),document.addEventListener("pointerup",I))}function R(e){if(!E.current)return;let t=e.clientX-k.current,a=-e.clientY+C.current,s=_.current+("horizontal"===x?t:a)*d*h;y((s=parseFloat(Math.max(o,Math.min(Math.round(s/d)*d,c)).toFixed(S))).toString()),i(s)}function I(){N(!1),E.current=!1,document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",I)}let D=()=>{y(o.toString()),i(o)},P=e=>{let t=parseFloat(e);return isNaN(t)?null:t};return l.useEffect(()=>{y(a.toString())},[a]),(0,s.jsxs)("div",{className:(0,n.cn)("relative w-fit",u,{"opacity-50":v}),children:[g&&(0,s.jsx)("div",{className:(0,n.cn)("absolute inset-y-0 left-0 flex select-none items-center px-2 text-muted-foreground",p,"horizontal"===x?"cursor-ew-resize":"cursor-ns-resize"),onPointerDown:T,children:g}),(0,s.jsx)(r.I,{ref:t,type:"text",className:(0,n.cn)("pr-0 [appearance:textfield] active:cursor-none disabled:opacity-100 [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none","horizontal"===x?"hover:cursor-ew-resize":"hover:cursor-ns-resize",g?"pl-8":"",m),disabled:v,step:d,value:j,onChange:function(e){let t=e.target.value;if(""===t){y("");return}if(isNaN(Number(t)))return;y(t);let a=P(t);null!==a&&i(a)},onBlur:function(){(null===P(j)||""===j)&&D()},onPointerDown:T,...b}),!!w&&(0,s.jsx)("div",{className:(0,n.cn)("fixed inset-0","horizontal"===x?"cursor-ew-resize":"cursor-ns-resize")})]})});i.displayName="NumericScrubber"},96179:function(e,t,a){"use strict";a.d(t,{G:function(){return d},t:function(){return c}});var s=a(52155),l=a(1802),r=a(98244),n=a(34987),i=a(4578);let o=r.createContext({size:"default",variant:"default"}),c=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,children:c,...d}=e;return(0,s.jsx)(l.fC,{ref:t,className:(0,i.cn)("flex items-center justify-center gap-1",a),...d,children:(0,s.jsx)(o.Provider,{value:{variant:r,size:n},children:c})})});c.displayName=l.fC.displayName;let d=r.forwardRef((e,t)=>{let{className:a,children:c,variant:d,size:u,...m}=e,p=r.useContext(o);return(0,s.jsx)(l.ck,{ref:t,className:(0,i.cn)((0,n.E)({variant:p.variant||d,size:p.size||u}),a),...m,children:c})});d.displayName=l.ck.displayName},34987:function(e,t,a){"use strict";a.d(t,{E:function(){return o},Z:function(){return c}});var s=a(52155),l=a(61291),r=a(34255),n=a(98244),i=a(4578);let o=(0,r.j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-accent focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:a,variant:r,size:n,...c}=e;return(0,s.jsx)(l.f,{ref:t,className:(0,i.cn)(o({variant:r,size:n,className:a})),...c})});c.displayName=l.f.displayName},63708:function(e,t,a){"use strict";a.d(t,{u:function(){return l}});var s=a(98244);let l=()=>{let[e,t]=(0,s.useState)(!1),l=(0,s.useCallback)(async()=>{try{let{scan:e}=await Promise.all([a.e(1694),a.e(343)]).then(a.bind(a,82162));e({enabled:!0,showToolbar:!0,animationSpeed:"fast"})}catch(e){console.error("Failed to initialize React Scan:",e)}},[]),r=(0,s.useCallback)(async()=>{try{let{setOptions:e}=await Promise.all([a.e(1694),a.e(343)]).then(a.bind(a,82162));e({enabled:!1,showToolbar:!1})}catch(e){console.error("Failed to disable React Scan:",e)}},[]),n=(0,s.useCallback)(()=>{t(e=>!e)},[]);return(0,s.useEffect)(()=>(e?l():r(),()=>{}),[e,l,r]),{isEnabled:e,toggleReactScan:n}}},17855:function(e,t,a){"use strict";a.d(t,{V:function(){return l}});var s=a(98244);let l=()=>{let[e,t]=(0,s.useState)(!1),l=(0,s.useRef)(null),r=(0,s.useRef)(null),n=(0,s.useCallback)(async()=>{try{let e=new(await a.e(860).then(a.t.bind(a,10860,23))).default;e.showPanel(1),e.dom.style.position="fixed",e.dom.style.left="0",e.dom.style.top="0",e.dom.style.zIndex="10000",document.body.appendChild(e.dom),l.current=e;let t=()=>{l.current&&(l.current.update(),r.current=requestAnimationFrame(t))};r.current=requestAnimationFrame(t)}catch(e){console.error("Failed to initialize stats.js:",e)}},[]),i=(0,s.useCallback)(()=>{var e,t;r.current&&(cancelAnimationFrame(r.current),r.current=null),(null===(t=l.current)||void 0===t?void 0:null===(e=t.dom)||void 0===e?void 0:e.parentNode)&&(document.body.removeChild(l.current.dom),l.current=null)},[]),o=(0,s.useCallback)(()=>{t(e=>!e)},[]);return(0,s.useEffect)(()=>(e?n():i(),i),[e,n,i]),{isEnabled:e,toggleStats:o}}},75961:function(e){e.exports={editor:"CodeEditor_editor__SnrZP"}}},function(e){e.O(0,[9241,8622,2625,1729,4282,2255,1307,313,1020,9887,7990,6555,7522,2703,2352,5283,5243,9361,3521,2122,6166,5394,8089,5108,8046,704,9217,7025,2368,368,3556,8476,7929,7662,3550,8648,8698,2196,4671,66,5619,248,3880,702,3475,2417,5551,6229,6900,7472,6839,5143,1744],function(){return e(e.s=53996)}),_N_E=e.O()}]);